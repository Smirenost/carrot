{"version":3,"sources":["../src/enums/ConnectionType.js","../src/enums/NodeType.js","../src/utils/Utils.js","../src/methods/Mutation.js","../src/architecture/Connection.js","../src/architecture/Node.js","../src/enums/GatingType.js","../src/architecture/Layers/Layer.js","../src/architecture/Nodes/ConstantNode.js","../src/architecture/Nodes/NoiseNode.js","../src/architecture/Layers/NoiseLayers/NoiseLayer.js","../src/architecture/Layers/CoreLayers/InputLayer.js","../src/architecture/Layers/CoreLayers/OutputLayer.js","../src/methods/Loss.js","../src/methods/Rate.js","../src/architecture/Species.js","../src/methods/Selection.js","../src/NEAT.js","../src/architecture/Network.js","../src/architecture/Architect.js","../src/architecture/Nodes/ActivationNode.js","../src/architecture/Layers/CoreLayers/ActivationLayer.js","../src/architecture/Layers/CoreLayers/DenseLayer.js","../src/architecture/Nodes/DropoutNode.js","../src/architecture/Layers/CoreLayers/DropoutLayer.js","../src/architecture/Nodes/PoolNode.js","../src/architecture/Layers/PoolingLayers/PoolingLayer.js","../src/architecture/Layers/PoolingLayers/AvgPooling1DLayer.js","../src/architecture/Layers/PoolingLayers/GlobalAvgPooling1DLayer.js","../src/architecture/Layers/PoolingLayers/MaxPooling1DLayer.js","../src/architecture/Layers/PoolingLayers/GlobalMaxPooling1DLayer.js","../src/architecture/Layers/PoolingLayers/MinPooling1DLayer.js","../src/architecture/Layers/PoolingLayers/GlobalMinPooling1DLayer.js","../src/architecture/Layers/RecurrentLayers/GRULayer.js","../src/architecture/Layers/RecurrentLayers/HopfieldLayer.js","../src/architecture/Layers/RecurrentLayers/LSTMLayer.js","../src/architecture/Layers/RecurrentLayers/MemoryLayer.js","../src/architecture/Layers/RecurrentLayers/RNNLayer.js","index.js"],"names":["ConnectionType","Object","defineProperty","exports","value","NodeType","PoolNodeType","NoiseNodeType","pickRandom","arr","Array","isArray","length","RangeError","randInt","from","min","max","Math","floor","random","randDouble","randBoolean","removeFromArray","elem","index","indexOf","splice","getOrDefault","defaultValue","shuffle","array","counter","temp","maxValue","i","maxValueIndex","minValueIndex","minValue","avg","sum","_i","array_1","generateGaussian","mean","deviation","__extends","extendStatics","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","prototype","create","SwapNodesMutation","SubBackConnectionMutation","AddBackConnectionMutation","SubSelfConnectionMutation","AddSelfConnectionMutation","SubGateMutation","AddGateMutation","ModActivationMutation","ModBiasMutation","ModWeightMutation","SubConnectionMutation","AddConnectionMutation","SubNodeMutation","AddNodeMutation","Mutation","ONLY_STRUCTURE","NO_STRUCTURE_MUTATIONS","FEEDFORWARD_MUTATIONS","ALL_MUTATIONS","Node_1","require","NodeType_1","Utils_1","_super","randomActivation","_this","call","mutate","network","options","undefined","maxNodes","nodes","node","Node","HIDDEN","mutateActivation","connection","connections","to","disconnect","minBound","inputSize","newConnection1","connect","newConnection2","weight","gateNode","addGate","keepGates","possible","filter","isHiddenNode","removeNode","apply","arguments","maxConnections","size","outputSize","j","isProjectingTo","push","pair","conn","outgoing","incoming","randomConnection","isInputNode","mutateBias","mutateOutput","allowedActivations","selfConnection","maxGates","gates","removeGate","node1_1","node2","biasTemp","bias","squashTemp","squash","Connection","gain","eligibility","deltaWeightsPrevious","deltaWeightsTotal","xTrace","Map","innovationID","a","toJSON","fromIndex","toIndex","gateNodeIndex","getInnovationID","src_1","Mutation_1","Connection_1","type","Logistic","activation","derivativeState","state","old","mask","deltaBiasPrevious","deltaBiasTotal","Set","gated","errorResponsibility","errorProjected","errorGated","NaN","fromJSON","json","_a","_b","_c","_d","clear","forEach","method","values","ALL_ACTIVATIONS","isProjectedBy","map","includes","add","delete","target","twoSided","ReferenceError","Error","propagate","momentum","rate","update","Number","isFinite","influence","gradient","key","activate","input","trace","nodes_1","influences_1","has","set","get","INPUT","isOutputNode","OUTPUT","setBias","setActivationType","GatingType","Layer","ConnectionType_1","GatingType_1","inputNodes","outputNodes","connectionType","ALL_TO_ALL","NO_CONNECTION","fromNodes","toNodes","fromNode","toNode","ONE_TO_ONE","POOLING","ratio_1","gate","gateType","gatedConnections","_loop_1","SELF","_loop_2","ConstantNode","Identitiy","NoiseNode","ConstantNode_1","noiseType","GAUSSIAN_NOISE","incomingStates","gaussian","connectionsStates","NoiseLayer","NoiseNode_1","Layer_1","getDefaultIncomingConnectionType","connectionTypeisAllowed","InputLayer","NoiseLayer_1","noise","noiseLayer","OutputLayer","ALL_LOSSES","HINGELoss","MSLELoss","WAPELoss","MAPELoss","MAELoss","BinaryLoss","MBELoss","MSELoss","targets","outputs","error","pow","round","abs","log","InverseRate","ExponentialRate","StepRate","FixedRate","Rate","baseRate","calc","iteration","gamma","stepSize","power","Species","NEAT_1","Network_1","representative","species","members","score","put","distance","NEAT","SPECIES_DISTANCE_THRESHOLD","forcePut","evaluateScore","reset","genome","kill","percentage","sort","amount","breed","Network","crossOver","getBest","networks","Infinity","TournamentSelection","PowerSelection","FitnessProportionateSelection","Selection","select","population","totalFitness","minimalFitness","population_1","population_2","probability","individuals","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","adopt","done","then","__generator","body","_","f","y","t","g","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","pop","Species_1","Selection_1","fitnessFunction","dataset","output","generation","equal","populationSize","mutationRate","mutationAmount","selection","mutations","activations","template","copy","mutateRandom","allowed","name","evolve","fittest","genSpecies","evaluate","SURVIVORS","removeExtinctSpecies","reproduce","getFittest","getAverage","val","replacePopulation","genomes","speciesArr","selectedSpecies","member","killRate","found","C1","C2","C3","__assign","assign","s","__importDefault","mod","__esModule","os_1","threads_1","dist_1","Loss_1","Rate_1","sqrt","nodeJSON","jsonConnection","network1","network2","offspring","score1","offspringSize","score2","chosenNode","chosenNodeType","inputNumber","sourceNetwork","outputNumber","newNode","n1connections","n2connections","keys1","keys","keys2","parseInt","connectionJSON","dropoutRate","inputs","shift","allowedMethods","train","iterations","loss","dropout","batchSize","ratePolicy","start","trainingSetSize","trainingSet","testSet","currentTrainingRate","Date","now","crossValidateTestSize","ceil","slice","iterationCount","trainError","trainEpoch","trainingRate","test","console","schedule","function","time","dataset_1","entry","_e","targetError","workerPool","serializedDataSet_1","lossIndex_1","neat","bestFitness","bestGenome","_f","JSON","stringify","Pool","spawn","Worker","threads","default","cpus","queue","completed","terminate","g2","g1","indexG1","indexG2","connections1","connections2","highestInnovationID1","disjointGenes","totalWeightDiff","similarGenes","gene1","gene2","excessGenes","N","errorSum","correctOutput","Architect","InputLayer_1","OutputLayer_1","layers","addLayer","layer","incomingConnectionType","buildModel","ActivationNode","ActivationLayer","ActivationNode_1","DenseLayer","activationType","DropoutNode","droppedOut","incomingConnection","gradient_1","DropoutLayer","DropoutNode_1","PoolNode","poolingType","MAX_POOLING","receivingNode","poolType","AVG_POOLING","MIN_POOLING","PoolingLayer","AvgPooling1DLayer","PoolNode_1","PoolingLayer_1","GlobalAvgPooling1DLayer","AvgPooling1DLayer_1","MaxPooling1DLayer","GlobalMaxPooling1DLayer","MaxPooling1DLayer_1","MinPooling1DLayer","GlobalMinPooling1DLayer","MinPooling1DLayer_1","GRULayer","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","updateGate","inverseUpdateGate","resetGate","memoryCell","previousOutput","TANH","inverseUpdate","HopfieldLayer","BinaryStep","LSTMLayer","inputGate","forgetGate","outputGate","forgetGateConnections","outputGateConnections","inputGateConnections","MemoryLayer","prevNodes","memorySize","block","reverse","RNNLayer","Architect_1","enumerable","ActivationLayer_1","DenseLayer_1","DropoutLayer_1","GlobalAvgPooling1DLayer_1","GlobalMaxPooling1DLayer_1","GlobalMinPooling1DLayer_1","GRULayer_1","HopfieldLayer_1","LSTMLayer_1","MemoryLayer_1","RNNLayer_1"],"mappings":"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","file":"index.min.js","sourceRoot":"..\\..\\build\\scripts","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ConnectionType = void 0;\r\n/**\r\n * The type of a connection.\r\n */\r\nvar ConnectionType;\r\n(function (ConnectionType) {\r\n    /**\r\n     * No connection used for exceptions.\r\n     */\r\n    ConnectionType[ConnectionType[\"NO_CONNECTION\"] = 0] = \"NO_CONNECTION\";\r\n    /**\r\n     * Connect all input to all output nodes\r\n     */\r\n    ConnectionType[ConnectionType[\"ALL_TO_ALL\"] = 1] = \"ALL_TO_ALL\";\r\n    /**\r\n     * Connect one input to one output node\r\n     */\r\n    ConnectionType[ConnectionType[\"ONE_TO_ONE\"] = 2] = \"ONE_TO_ONE\";\r\n    /**\r\n     * Connect with pooling\r\n     */\r\n    ConnectionType[ConnectionType[\"POOLING\"] = 3] = \"POOLING\";\r\n})(ConnectionType = exports.ConnectionType || (exports.ConnectionType = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NoiseNodeType = exports.PoolNodeType = exports.NodeType = void 0;\r\n/**\r\n * The type of node.\r\n */\r\nvar NodeType;\r\n(function (NodeType) {\r\n    /**\r\n     * Node is an input node.\r\n     */\r\n    NodeType[NodeType[\"INPUT\"] = 0] = \"INPUT\";\r\n    /**\r\n     * Node is a hidden node.\r\n     */\r\n    NodeType[NodeType[\"HIDDEN\"] = 1] = \"HIDDEN\";\r\n    /**\r\n     * Node is a output node.\r\n     */\r\n    NodeType[NodeType[\"OUTPUT\"] = 2] = \"OUTPUT\";\r\n})(NodeType = exports.NodeType || (exports.NodeType = {}));\r\n/**\r\n * The type of pool node.\r\n */\r\nvar PoolNodeType;\r\n(function (PoolNodeType) {\r\n    /**\r\n     * Maximum pooling node.\r\n     */\r\n    PoolNodeType[PoolNodeType[\"MAX_POOLING\"] = 0] = \"MAX_POOLING\";\r\n    /**\r\n     * Average pooling node.\r\n     */\r\n    PoolNodeType[PoolNodeType[\"AVG_POOLING\"] = 1] = \"AVG_POOLING\";\r\n    /**\r\n     * Minimum pooling node.\r\n     */\r\n    PoolNodeType[PoolNodeType[\"MIN_POOLING\"] = 2] = \"MIN_POOLING\";\r\n})(PoolNodeType = exports.PoolNodeType || (exports.PoolNodeType = {}));\r\n/**\r\n * The type of noise node.\r\n */\r\nvar NoiseNodeType;\r\n(function (NoiseNodeType) {\r\n    /**\r\n     * Gaussian noise node\r\n     */\r\n    NoiseNodeType[NoiseNodeType[\"GAUSSIAN_NOISE\"] = 0] = \"GAUSSIAN_NOISE\";\r\n})(NoiseNodeType = exports.NoiseNodeType || (exports.NoiseNodeType = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.generateGaussian = exports.avg = exports.sum = exports.min = exports.minValueIndex = exports.maxValueIndex = exports.max = exports.shuffle = exports.getOrDefault = exports.removeFromArray = exports.randBoolean = exports.randDouble = exports.randInt = exports.pickRandom = void 0;\r\n/**\r\n * Returns an random element from the given array.\r\n *\r\n * @param arr the array to pick from\r\n * @time O(1)\r\n * @returns the random picked element\r\n */\r\nfunction pickRandom(arr) {\r\n    if (Array.isArray(arr)) {\r\n        if (arr.length === 0) {\r\n            throw new RangeError(\"Cannot pick from an empty array\");\r\n        }\r\n        return arr[randInt(0, arr.length)];\r\n    }\r\n    else {\r\n        return pickRandom(Array.from(arr));\r\n    }\r\n}\r\nexports.pickRandom = pickRandom;\r\n/**\r\n * Returns a random integer in the range [min,max)\r\n *\r\n * @param min bound\r\n * @param max bound\r\n * @time O(1)\r\n * @returns random integer in [min,max)\r\n */\r\nfunction randInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min) + min);\r\n}\r\nexports.randInt = randInt;\r\n/**\r\n * Returns a random double in the range [min,max)\r\n *\r\n * @param min bound\r\n * @param max bound\r\n * @time O(1)\r\n * @returns random double in [min,max)\r\n */\r\nfunction randDouble(min, max) {\r\n    return Math.random() * (max - min) + min;\r\n}\r\nexports.randDouble = randDouble;\r\n/**\r\n * Returns a random boolean\r\n *\r\n * @returns random boolean\r\n * @time O(1)\r\n */\r\nfunction randBoolean() {\r\n    return Math.random() >= 0.5;\r\n}\r\nexports.randBoolean = randBoolean;\r\n/**\r\n * Removes an element from an array.\r\n *\r\n * @param arr the array\r\n * @param elem the element which will be removed\r\n * @time O(n)\r\n * @returns false -> element does not exists on array; true -> element removed from array\r\n */\r\nfunction removeFromArray(arr, elem) {\r\n    var index = arr.indexOf(elem);\r\n    if (index === -1) {\r\n        return false;\r\n    }\r\n    else {\r\n        arr.splice(index, 1);\r\n        return true;\r\n    }\r\n}\r\nexports.removeFromArray = removeFromArray;\r\n/**\r\n * Checks a given value. If value is undefined return the default value.\r\n *\r\n * @param value to check\r\n * @param defaultValue to return if value is undefined\r\n * @returns value if defined otherwise defaultValue\r\n * @time O(1)\r\n */\r\nfunction getOrDefault(value, defaultValue) {\r\n    return value !== null && value !== void 0 ? value : defaultValue;\r\n}\r\nexports.getOrDefault = getOrDefault;\r\n/**\r\n * Shuffles an array\r\n * @param array the array\r\n * @returns the shuffled array\r\n * @time O(n)\r\n */\r\nfunction shuffle(array) {\r\n    // While there are elements in the array\r\n    for (var counter = array.length - 1; counter > 0; counter--) {\r\n        // Pick a random index\r\n        var index = randInt(0, counter);\r\n        // And swap the last element with it\r\n        var temp = array[counter];\r\n        array[counter] = array[index];\r\n        array[index] = temp;\r\n    }\r\n}\r\nexports.shuffle = shuffle;\r\n/**\r\n * Finds the maximum value of an number array\r\n *\r\n * @param array\r\n * @time O(n)\r\n */\r\nfunction max(array) {\r\n    if (array.length === 0) {\r\n        throw new RangeError();\r\n    }\r\n    var maxValue = array[0];\r\n    for (var i = 1; i < array.length; i++) {\r\n        if (array[i] > maxValue) {\r\n            maxValue = array[i];\r\n        }\r\n    }\r\n    return maxValue;\r\n}\r\nexports.max = max;\r\n/**\r\n * Finds the maximum value index of an number array\r\n *\r\n * @param array\r\n * @time O(n)\r\n */\r\nfunction maxValueIndex(array) {\r\n    if (array.length === 0) {\r\n        throw new RangeError();\r\n    }\r\n    var maxValue = array[0];\r\n    var maxValueIndex = 0;\r\n    for (var i = 1; i < array.length; i++) {\r\n        if (array[i] > maxValue) {\r\n            maxValue = array[i];\r\n            maxValueIndex = i;\r\n        }\r\n    }\r\n    return maxValueIndex;\r\n}\r\nexports.maxValueIndex = maxValueIndex;\r\n/**\r\n * Finds the minimum value index of an number array\r\n *\r\n * @param array\r\n * @time O(n)\r\n */\r\nfunction minValueIndex(array) {\r\n    if (array.length === 0) {\r\n        throw new RangeError();\r\n    }\r\n    var minValue = array[0];\r\n    var minValueIndex = 0;\r\n    for (var i = 1; i < array.length; i++) {\r\n        if (array[i] < minValue) {\r\n            minValue = array[i];\r\n            minValueIndex = i;\r\n        }\r\n    }\r\n    return minValueIndex;\r\n}\r\nexports.minValueIndex = minValueIndex;\r\n/**\r\n * Finds the minimum value of an number array\r\n *\r\n * @param array\r\n * @time O(n)\r\n */\r\nfunction min(array) {\r\n    if (array.length === 0) {\r\n        throw new RangeError();\r\n    }\r\n    var minValue = array[0];\r\n    for (var i = 1; i < array.length; i++) {\r\n        if (array[i] < minValue) {\r\n            minValue = array[i];\r\n        }\r\n    }\r\n    return minValue;\r\n}\r\nexports.min = min;\r\n/**\r\n * Calculates the average value of an array\r\n *\r\n * @param array\r\n * @time O(n)\r\n */\r\nfunction avg(array) {\r\n    return sum(array) / array.length;\r\n}\r\nexports.avg = avg;\r\n/**\r\n * Calculates the sum of all values of an array\r\n *\r\n * @param array\r\n * @time O(n)\r\n */\r\nfunction sum(array) {\r\n    if (array.length === 0) {\r\n        throw new RangeError();\r\n    }\r\n    var sum = 0;\r\n    for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {\r\n        var value = array_1[_i];\r\n        sum += value;\r\n    }\r\n    return sum;\r\n}\r\nexports.sum = sum;\r\n/**\r\n * Generates a random number with the gaussian distribution.\r\n *\r\n * @see https://en.wikipedia.org/wiki/Normal_distribution\r\n *\r\n * @param mean the mean value\r\n * @param deviation the standard deviation\r\n * @time O(1)\r\n */\r\nfunction generateGaussian(mean, deviation) {\r\n    if (mean === void 0) { mean = 0; }\r\n    if (deviation === void 0) { deviation = 2; }\r\n    var sum = 0;\r\n    var numSamples = 10;\r\n    for (var i = 0; i < numSamples; i++) {\r\n        sum += Math.random();\r\n    }\r\n    return deviation * sum / numSamples + mean - 0.5 * deviation;\r\n}\r\nexports.generateGaussian = generateGaussian;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SwapNodesMutation = exports.SubBackConnectionMutation = exports.AddBackConnectionMutation = exports.SubSelfConnectionMutation = exports.AddSelfConnectionMutation = exports.SubGateMutation = exports.AddGateMutation = exports.ModActivationMutation = exports.ModBiasMutation = exports.ModWeightMutation = exports.SubConnectionMutation = exports.AddConnectionMutation = exports.SubNodeMutation = exports.AddNodeMutation = exports.Mutation = exports.ONLY_STRUCTURE = exports.NO_STRUCTURE_MUTATIONS = exports.FEEDFORWARD_MUTATIONS = exports.ALL_MUTATIONS = void 0;\r\nvar Node_1 = require(\"../architecture/Node\");\r\nvar NodeType_1 = require(\"../enums/NodeType\");\r\nvar Utils_1 = require(\"../utils/Utils\");\r\n/**\r\n *\r\n * Genetic algorithm mutation methods. Creates variations (mutations) in neural networks which are then selected for better performance.\r\n *\r\n * @see {@link https://en.wikipedia.org/wiki/mutation_(genetic_algorithm)|Mutation (genetic algorithms) on Wikipedia}\r\n * @see {@link https://en.wikipedia.org/wiki/Genetic_algorithm#Selection|Selection (genetic algorithms) on Wikipedia}\r\n */\r\nvar Mutation = /** @class */ (function () {\r\n    function Mutation() {\r\n    }\r\n    return Mutation;\r\n}());\r\nexports.Mutation = Mutation;\r\n/**\r\n * Add node mutation.\r\n *\r\n * Adds a hidden node to the network.\r\n */\r\nvar AddNodeMutation = /** @class */ (function (_super) {\r\n    __extends(AddNodeMutation, _super);\r\n    /**\r\n     * Constructs a AddNodeMutation object\r\n     * @param randomActivation Should choose a random activation for a new node?\r\n     */\r\n    function AddNodeMutation(randomActivation) {\r\n        if (randomActivation === void 0) { randomActivation = true; }\r\n        var _this = _super.call(this) || this;\r\n        _this.randomActivation = randomActivation;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @param options\r\n     * @time O(n)\r\n     */\r\n    AddNodeMutation.prototype.mutate = function (network, options) {\r\n        if (options === void 0) { options = {}; }\r\n        // check if max nodes is already reached\r\n        if (options.maxNodes !== undefined && network.nodes.length >= options.maxNodes) {\r\n            return;\r\n        }\r\n        // create a new hidden node\r\n        var node = new Node_1.Node(NodeType_1.NodeType.HIDDEN);\r\n        if (this.randomActivation) {\r\n            node.mutateActivation(); // choose random activation\r\n        }\r\n        // take a random connection\r\n        var connection = Utils_1.pickRandom(Array.from(network.connections));\r\n        var from = connection.from;\r\n        var to = connection.to;\r\n        network.disconnect(from, to); // disconnect it\r\n        // put the node in between the connection\r\n        var minBound = Math.max(network.inputSize, 1 + network.nodes.indexOf(from));\r\n        network.nodes.splice(minBound, 0, node);\r\n        var newConnection1 = network.connect(from, node, 1);\r\n        var newConnection2 = network.connect(node, to, connection.weight);\r\n        if (connection.gateNode != null) {\r\n            // if connection had a gate node\r\n            // choose randomly which new connection should get this gate node\r\n            if (Utils_1.randBoolean()) {\r\n                network.addGate(connection.gateNode, newConnection1);\r\n            }\r\n            else {\r\n                network.addGate(connection.gateNode, newConnection2);\r\n            }\r\n        }\r\n    };\r\n    return AddNodeMutation;\r\n}(Mutation));\r\nexports.AddNodeMutation = AddNodeMutation;\r\n/**\r\n * Sub node mutation.\r\n *\r\n * Removes a random node from the network.\r\n */\r\nvar SubNodeMutation = /** @class */ (function (_super) {\r\n    __extends(SubNodeMutation, _super);\r\n    function SubNodeMutation(keepGates) {\r\n        if (keepGates === void 0) { keepGates = true; }\r\n        var _this = _super.call(this) || this;\r\n        _this.keepGates = keepGates;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @time O(n&sup3;)\r\n     */\r\n    SubNodeMutation.prototype.mutate = function (network) {\r\n        var possible = network.nodes.filter(function (node) { return node !== undefined && node.isHiddenNode(); }); // hidden nodes\r\n        if (possible.length > 0) {\r\n            network.removeNode(Utils_1.pickRandom(possible), this.keepGates); // remove a random node from the filtered array\r\n        }\r\n    };\r\n    return SubNodeMutation;\r\n}(Mutation));\r\nexports.SubNodeMutation = SubNodeMutation;\r\n/**\r\n * Add connections mutation.\r\n *\r\n * Adds a connection to the network.\r\n */\r\nvar AddConnectionMutation = /** @class */ (function (_super) {\r\n    __extends(AddConnectionMutation, _super);\r\n    function AddConnectionMutation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @param options\r\n     * @time O(n&sup3;)\r\n     */\r\n    AddConnectionMutation.prototype.mutate = function (network, options) {\r\n        if (options === void 0) { options = {}; }\r\n        // check if max connections is already reached\r\n        if (options.maxConnections !== undefined && network.connections.size >= options.maxConnections) {\r\n            return;\r\n        }\r\n        var possible = [];\r\n        for (var i = 0; i < network.nodes.length - network.outputSize; i++) {\r\n            var from = network.nodes[i];\r\n            for (var j = Math.max(i + 1, network.inputSize); j < network.nodes.length; j++) {\r\n                var to = network.nodes[j];\r\n                if (!from.isProjectingTo(to)) {\r\n                    possible.push([from, to]);\r\n                }\r\n            }\r\n        }\r\n        if (possible.length > 0) {\r\n            var pair = Utils_1.pickRandom(possible);\r\n            network.connect(pair[0], pair[1]);\r\n        }\r\n    };\r\n    return AddConnectionMutation;\r\n}(Mutation));\r\nexports.AddConnectionMutation = AddConnectionMutation;\r\n/**\r\n * Sub connection mutation.\r\n *\r\n * Removes a random connection from the network.\r\n */\r\nvar SubConnectionMutation = /** @class */ (function (_super) {\r\n    __extends(SubConnectionMutation, _super);\r\n    function SubConnectionMutation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @time O(n&sup2;)\r\n     */\r\n    SubConnectionMutation.prototype.mutate = function (network) {\r\n        var possible = Array.from(network.connections)\r\n            .filter(function (conn) { return conn.from.outgoing.size > 1; }) // do not deactivate a neuron\r\n            .filter(function (conn) { return conn.to.incoming.size > 1; }) // do not deactivate a neuron\r\n            .filter(function (conn) { return network.nodes.indexOf(conn.to) > network.nodes.indexOf(conn.from); }); // look for forward pointing connections\r\n        if (possible.length > 0) {\r\n            var randomConnection = Utils_1.pickRandom(possible); // pick a random connection from the filtered array\r\n            network.disconnect(randomConnection.from, randomConnection.to); // remove the connection from the network\r\n        }\r\n    };\r\n    return SubConnectionMutation;\r\n}(Mutation));\r\nexports.SubConnectionMutation = SubConnectionMutation;\r\n/**\r\n * Mod weight mutation.\r\n *\r\n * Modifies the weight of a random connection.\r\n */\r\nvar ModWeightMutation = /** @class */ (function (_super) {\r\n    __extends(ModWeightMutation, _super);\r\n    /**\r\n     * Constructs a ModWeightMutation object\r\n     * @param min The minimum weight.\r\n     * @param max The maximum weight.\r\n     */\r\n    function ModWeightMutation(min, max) {\r\n        if (min === void 0) { min = -1; }\r\n        if (max === void 0) { max = 1; }\r\n        var _this = _super.call(this) || this;\r\n        _this.min = min;\r\n        _this.max = max;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @time O(1)\r\n     */\r\n    ModWeightMutation.prototype.mutate = function (network) {\r\n        // pick random connection and mutate it's weight\r\n        Utils_1.pickRandom(Array.from(network.connections)).weight += Utils_1.randDouble(this.min, this.max);\r\n    };\r\n    return ModWeightMutation;\r\n}(Mutation));\r\nexports.ModWeightMutation = ModWeightMutation;\r\n/**\r\n * Mod bias mutation.\r\n *\r\n * Modifies the bias value of a random hidden or output node\r\n */\r\nvar ModBiasMutation = /** @class */ (function (_super) {\r\n    __extends(ModBiasMutation, _super);\r\n    /**\r\n     * Constructs a ModBiasMutation object\r\n     * @param min The minimum bias.\r\n     * @param max The maximum bias.\r\n     */\r\n    function ModBiasMutation(min, max) {\r\n        if (min === void 0) { min = -1; }\r\n        if (max === void 0) { max = 1; }\r\n        var _this = _super.call(this) || this;\r\n        _this.min = min;\r\n        _this.max = max;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @time O(n)\r\n     */\r\n    ModBiasMutation.prototype.mutate = function (network) {\r\n        Utils_1.pickRandom(network.nodes.filter(function (node) { return !node.isInputNode(); })) // pick random hidden or output node\r\n            .mutateBias(this); // mutate it's bias\r\n    };\r\n    return ModBiasMutation;\r\n}(Mutation));\r\nexports.ModBiasMutation = ModBiasMutation;\r\n/**\r\n * Mod activation mutation.\r\n *\r\n * Modifies the activation function of a random node\r\n */\r\nvar ModActivationMutation = /** @class */ (function (_super) {\r\n    __extends(ModActivationMutation, _super);\r\n    /**\r\n     * Constructs a ModActivationMutation object\r\n     * @param mutateOutput Can the output be mutated?\r\n     */\r\n    function ModActivationMutation(mutateOutput) {\r\n        if (mutateOutput === void 0) { mutateOutput = false; }\r\n        var _this = _super.call(this) || this;\r\n        _this.mutateOutput = mutateOutput;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @param options\r\n     * @time O(n)\r\n     */\r\n    ModActivationMutation.prototype.mutate = function (network, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var possible = this.mutateOutput\r\n            ? network.nodes.filter(function (node) { return !node.isInputNode(); }) // hidden and output nodes\r\n            : network.nodes.filter(function (node) { return node.isHiddenNode(); }); // hidden nodes\r\n        if (possible.length > 0) {\r\n            Utils_1.pickRandom(possible).mutateActivation(options.allowedActivations); // mutate the activation of the node\r\n        }\r\n    };\r\n    return ModActivationMutation;\r\n}(Mutation));\r\nexports.ModActivationMutation = ModActivationMutation;\r\n/**\r\n * Add self connection.\r\n *\r\n * Adds a connection from a node to itself.\r\n */\r\nvar AddSelfConnectionMutation = /** @class */ (function (_super) {\r\n    __extends(AddSelfConnectionMutation, _super);\r\n    function AddSelfConnectionMutation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @time O(n)\r\n     */\r\n    AddSelfConnectionMutation.prototype.mutate = function (network) {\r\n        var possible = network.nodes\r\n            .filter(function (node) { return !node.isInputNode(); }) // no input nodes\r\n            .filter(function (node) { return node.selfConnection.weight === 0; }); // only nodes that doesn't have an self connection already\r\n        if (possible.length > 0) {\r\n            var node = Utils_1.pickRandom(possible); // pick a random node from the filtered array\r\n            network.connect(node, node); // connection the node to itself\r\n        }\r\n    };\r\n    return AddSelfConnectionMutation;\r\n}(Mutation));\r\nexports.AddSelfConnectionMutation = AddSelfConnectionMutation;\r\n/**\r\n * Sub self connection.\r\n *\r\n * Removes a connection from a node to itself.\r\n */\r\nvar SubSelfConnectionMutation = /** @class */ (function (_super) {\r\n    __extends(SubSelfConnectionMutation, _super);\r\n    function SubSelfConnectionMutation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @time O(n)\r\n     */\r\n    SubSelfConnectionMutation.prototype.mutate = function (network) {\r\n        var possible = Array.from(network.connections).filter(function (conn) { return conn.from === conn.to; });\r\n        if (possible.length > 0) {\r\n            var randomConnection = Utils_1.pickRandom(possible);\r\n            network.disconnect(randomConnection.from, randomConnection.to);\r\n        }\r\n    };\r\n    return SubSelfConnectionMutation;\r\n}(Mutation));\r\nexports.SubSelfConnectionMutation = SubSelfConnectionMutation;\r\n/**\r\n * Add gate mutation.\r\n *\r\n * Adds a gate to the network.\r\n */\r\nvar AddGateMutation = /** @class */ (function (_super) {\r\n    __extends(AddGateMutation, _super);\r\n    function AddGateMutation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @param options\r\n     * @time O(n)\r\n     */\r\n    AddGateMutation.prototype.mutate = function (network, options) {\r\n        if (options === void 0) { options = {}; }\r\n        // check if max gates isn't reached already\r\n        if (options.maxGates !== undefined && network.gates.size >= options.maxGates) {\r\n            return;\r\n        }\r\n        // use only connections that aren't already gated\r\n        var possible = Array.from(network.connections).filter(function (conn) { return conn.gateNode === null; });\r\n        if (possible.length > 0) {\r\n            var node = Utils_1.pickRandom(network.nodes.filter(function (node) { return !node.isInputNode(); })); // hidden or output node\r\n            var connection = Utils_1.pickRandom(possible); // random connection from filtered array\r\n            network.addGate(node, connection); // use the node to gate the connection\r\n        }\r\n    };\r\n    return AddGateMutation;\r\n}(Mutation));\r\nexports.AddGateMutation = AddGateMutation;\r\n/**\r\n * Sub gate mutation.\r\n *\r\n * Removes a gate from the network.\r\n */\r\nvar SubGateMutation = /** @class */ (function (_super) {\r\n    __extends(SubGateMutation, _super);\r\n    function SubGateMutation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @time O(1)\r\n     */\r\n    SubGateMutation.prototype.mutate = function (network) {\r\n        if (network.gates.size > 0) {\r\n            network.removeGate(Utils_1.pickRandom(Array.from(network.gates)));\r\n        }\r\n    };\r\n    return SubGateMutation;\r\n}(Mutation));\r\nexports.SubGateMutation = SubGateMutation;\r\n/**\r\n * Add back connection mutation.\r\n *\r\n * Adds a backward pointing connection to the network.\r\n */\r\nvar AddBackConnectionMutation = /** @class */ (function (_super) {\r\n    __extends(AddBackConnectionMutation, _super);\r\n    function AddBackConnectionMutation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @time O(n&sup3;)\r\n     */\r\n    AddBackConnectionMutation.prototype.mutate = function (network) {\r\n        var possible = [];\r\n        for (var i = network.inputSize; i < network.nodes.length; i++) {\r\n            var from = network.nodes[i];\r\n            for (var j = network.inputSize; j < i; j++) {\r\n                var to = network.nodes[j];\r\n                if (!from.isProjectingTo(to)) {\r\n                    possible.push([from, to]);\r\n                }\r\n            }\r\n        }\r\n        if (possible.length > 0) {\r\n            var pair = Utils_1.pickRandom(possible);\r\n            network.connect(pair[0], pair[1]);\r\n        }\r\n    };\r\n    return AddBackConnectionMutation;\r\n}(Mutation));\r\nexports.AddBackConnectionMutation = AddBackConnectionMutation;\r\n/**\r\n * Sub back connection mutation.\r\n *\r\n * Removes a backward pointing connection to the network.\r\n */\r\nvar SubBackConnectionMutation = /** @class */ (function (_super) {\r\n    __extends(SubBackConnectionMutation, _super);\r\n    function SubBackConnectionMutation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @time O(n&sup2;)\r\n     */\r\n    SubBackConnectionMutation.prototype.mutate = function (network) {\r\n        var possible = Array.from(network.connections)\r\n            .filter(function (conn) { return conn.from.outgoing.size > 1; })\r\n            .filter(function (conn) { return conn.to.incoming.size > 1; })\r\n            .filter(function (conn) { return network.nodes.indexOf(conn.from) > network.nodes.indexOf(conn.to); });\r\n        if (possible.length > 0) {\r\n            var randomConnection = Utils_1.pickRandom(possible);\r\n            network.disconnect(randomConnection.from, randomConnection.to);\r\n        }\r\n    };\r\n    return SubBackConnectionMutation;\r\n}(Mutation));\r\nexports.SubBackConnectionMutation = SubBackConnectionMutation;\r\n/**\r\n * Swap nodes mutation.\r\n *\r\n * Swaps the values of two randomly picked nodes.\r\n */\r\nvar SwapNodesMutation = /** @class */ (function (_super) {\r\n    __extends(SwapNodesMutation, _super);\r\n    /**\r\n     * Constructs a SwapNodeMutation object\r\n     * @param mutateOutput Can the output be mutated?\r\n     */\r\n    function SwapNodesMutation(mutateOutput) {\r\n        if (mutateOutput === void 0) { mutateOutput = false; }\r\n        var _this = _super.call(this) || this;\r\n        _this.mutateOutput = mutateOutput;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Mutates the network.\r\n     *\r\n     * @param network The network which gets mutated\r\n     * @time O(n)\r\n     */\r\n    SwapNodesMutation.prototype.mutate = function (network) {\r\n        var possible = this.mutateOutput\r\n            ? network.nodes.filter(function (node) { return node !== undefined && !node.isInputNode(); }) // hidden or output nodes\r\n            : network.nodes.filter(function (node) { return node !== undefined && node.isHiddenNode(); }); // only hidden nodes\r\n        if (possible.length >= 2) {\r\n            // select two different nodes from the filtered array\r\n            var node1_1 = Utils_1.pickRandom(possible);\r\n            var node2 = Utils_1.pickRandom(possible.filter(function (node) { return node !== node1_1; }));\r\n            // change there parameters\r\n            var biasTemp = node1_1.bias;\r\n            var squashTemp = node1_1.squash;\r\n            node1_1.bias = node2.bias;\r\n            node1_1.squash = node2.squash;\r\n            node2.bias = biasTemp;\r\n            node2.squash = squashTemp;\r\n        }\r\n    };\r\n    return SwapNodesMutation;\r\n}(Mutation));\r\nexports.SwapNodesMutation = SwapNodesMutation;\r\n/**\r\n * Array of all mutation methods\r\n */\r\nvar ALL_MUTATIONS = [\r\n    new AddNodeMutation(),\r\n    new SubNodeMutation(),\r\n    new AddConnectionMutation(),\r\n    new SubConnectionMutation(),\r\n    new ModWeightMutation(),\r\n    new ModBiasMutation(),\r\n    new ModActivationMutation(),\r\n    new AddGateMutation(),\r\n    new SubGateMutation(),\r\n    new AddSelfConnectionMutation(),\r\n    new SubSelfConnectionMutation(),\r\n    new AddBackConnectionMutation(),\r\n    new SubBackConnectionMutation(),\r\n    new SwapNodesMutation(),\r\n];\r\nexports.ALL_MUTATIONS = ALL_MUTATIONS;\r\n/**\r\n * Array of all feed forward mutation methods\r\n */\r\nvar FEEDFORWARD_MUTATIONS = [\r\n    new AddNodeMutation(),\r\n    new SubNodeMutation(),\r\n    new AddConnectionMutation(),\r\n    new SubConnectionMutation(),\r\n    new ModWeightMutation(),\r\n    new ModBiasMutation(),\r\n    new ModActivationMutation(),\r\n    new SwapNodesMutation(),\r\n];\r\nexports.FEEDFORWARD_MUTATIONS = FEEDFORWARD_MUTATIONS;\r\nvar NO_STRUCTURE_MUTATIONS = [\r\n    new ModWeightMutation(),\r\n    new ModBiasMutation(),\r\n    new ModActivationMutation(),\r\n];\r\nexports.NO_STRUCTURE_MUTATIONS = NO_STRUCTURE_MUTATIONS;\r\nvar ONLY_STRUCTURE = [\r\n    new AddNodeMutation(),\r\n    new SubNodeMutation(),\r\n    new AddConnectionMutation(),\r\n    new SubConnectionMutation(),\r\n    new AddGateMutation(),\r\n    new SubGateMutation(),\r\n    new AddSelfConnectionMutation(),\r\n    new SubSelfConnectionMutation(),\r\n    new AddBackConnectionMutation(),\r\n    new SubBackConnectionMutation(),\r\n    new SwapNodesMutation(),\r\n];\r\nexports.ONLY_STRUCTURE = ONLY_STRUCTURE;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Connection = void 0;\r\n/**\r\n * A connection instance describes the connection between two nodes.\r\n */\r\nvar Connection = /** @class */ (function () {\r\n    function Connection(from, to, weight, gateNode) {\r\n        this.from = from;\r\n        this.to = to;\r\n        this.weight = weight !== null && weight !== void 0 ? weight : 0;\r\n        this.gain = 1;\r\n        this.eligibility = 0;\r\n        this.deltaWeightsPrevious = 0;\r\n        this.deltaWeightsTotal = 0;\r\n        this.xTrace = new Map();\r\n        if (gateNode) {\r\n            this.gateNode = gateNode;\r\n            gateNode.addGate(this);\r\n        }\r\n        else {\r\n            this.gateNode = null;\r\n        }\r\n    }\r\n    /**\r\n     * Returns an innovation ID\r\n     *\r\n     * @see {@link https://en.wikipedia.org/wiki/Pairing_function (Cantor pairing function)|Pairing function (Cantor pairing function)}\r\n     *\r\n     * @param a - A [natural number](https://en.wikipedia.org/wiki/Natural_number), which is an integer greater than or equal to zero\r\n     * @param b - A [natural number](https://en.wikipedia.org/wiki/Natural_number), which is an integer greater than or equal to zero\r\n     * @time O(1)\r\n     *\r\n     * @return An Integer that uniquely represents a pair of Integers\r\n     */\r\n    Connection.innovationID = function (a, b) {\r\n        return 1 / 2 * (a + b) * (a + b + 1) + b;\r\n    };\r\n    /**\r\n     * Returns the connection as a JSON\r\n     * @time O(1)\r\n     *\r\n     * @return Connection as a JSON\r\n     */\r\n    Connection.prototype.toJSON = function () {\r\n        return {\r\n            fromIndex: this.from.index,\r\n            toIndex: this.to.index,\r\n            gateNodeIndex: this.gateNode === null ? null : this.gateNode.index,\r\n            weight: this.weight\r\n        };\r\n    };\r\n    /**\r\n     * Get the innovation ID for this connection\r\n     */\r\n    Connection.prototype.getInnovationID = function () {\r\n        return Connection.innovationID(this.from.index, this.to.index);\r\n    };\r\n    return Connection;\r\n}());\r\nexports.Connection = Connection;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Node = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar NodeType_1 = require(\"../enums/NodeType\");\r\nvar Mutation_1 = require(\"../methods/Mutation\");\r\nvar Utils_1 = require(\"../utils/Utils\");\r\nvar Connection_1 = require(\"./Connection\");\r\n/**\r\n * Creates a new neuron/node\r\n *\r\n * Neurons are the basic unit of the neural network. They can be connected together, or used to gate connections between other neurons. A Neuron can perform basically 4 operations: form connections, gate connections, activate and [propagate](https://www.youtube.com/watch?v=Ilg3gGewQ5U).\r\n *\r\n * For more information check:\r\n * - [BecomingHuman](https://becominghuman.ai/what-is-an-artificial-neuron-8b2e421ce42e)\r\n * - [Wikipedia](https://en.wikipedia.org/wiki/Artificial_neuron)\r\n * - [Neataptic](https://wagenaartje.github.io/neataptic/docs/architecture/node/)\r\n * - [Synaptic](https://github.com/cazala/synaptic/wiki/Neural-Networks-101)\r\n * - [Keras](https://keras.io/backend/#bias_add)\r\n */\r\nvar Node = /** @class */ (function () {\r\n    function Node(type) {\r\n        if (type === void 0) { type = NodeType_1.NodeType.HIDDEN; }\r\n        this.type = type;\r\n        this.bias = Utils_1.randDouble(-1, 1);\r\n        this.squash = src_1.Logistic;\r\n        this.activation = 0;\r\n        this.derivativeState = 1;\r\n        this.state = 0;\r\n        this.old = 0;\r\n        this.mask = 1;\r\n        this.deltaBiasPrevious = 0;\r\n        this.deltaBiasTotal = 0;\r\n        this.incoming = new Set();\r\n        this.outgoing = new Set();\r\n        this.gated = new Set();\r\n        this.selfConnection = new Connection_1.Connection(this, this, 0);\r\n        this.errorResponsibility = 0;\r\n        this.errorProjected = 0;\r\n        this.errorGated = 0;\r\n        this.index = NaN;\r\n    }\r\n    /**\r\n     * Convert a json object to a node\r\n     *\r\n     * @param json A node represented as a JSON object\r\n     * @time O(1)\r\n     *\r\n     * @returns itself\r\n     */\r\n    Node.prototype.fromJSON = function (json) {\r\n        var _a, _b, _c, _d;\r\n        this.bias = (_a = json.bias) !== null && _a !== void 0 ? _a : Utils_1.randDouble(-1, 1);\r\n        this.type = json.type;\r\n        this.squash = (_b = json.squash) !== null && _b !== void 0 ? _b : src_1.Logistic;\r\n        this.mask = (_c = json.mask) !== null && _c !== void 0 ? _c : 1;\r\n        this.index = (_d = json.index) !== null && _d !== void 0 ? _d : NaN;\r\n        return this;\r\n    };\r\n    /**\r\n     * Clears this node's state information - _i.e. resets node and its connections to \"factory settings\"_\r\n     *\r\n     * `node.clear()` is useful for predicting time series.\r\n     * @time O(n&sup2;)\r\n     */\r\n    Node.prototype.clear = function () {\r\n        this.incoming.forEach(function (connection) {\r\n            connection.eligibility = 0;\r\n            connection.xTrace.clear();\r\n        });\r\n        this.gated.forEach(function (conn) { return conn.gain = 0; });\r\n        this.errorResponsibility = this.errorProjected = this.errorGated = 0;\r\n        this.old = this.state = this.activation = 0;\r\n    };\r\n    /**\r\n     * Mutates the node's bias\r\n     *\r\n     * @param method The method is needed for the min and max value of the node's bias otherwise a range of [-1,1] is chosen\r\n     * @time O(1)\r\n     */\r\n    Node.prototype.mutateBias = function (method) {\r\n        if (method === void 0) { method = new Mutation_1.ModBiasMutation(); }\r\n        this.bias += Utils_1.randDouble(method.min, method.max); // add a random value in range [min,max)\r\n    };\r\n    /**\r\n     * Mutates the node's activation function\r\n     * @time O(n)\r\n     */\r\n    Node.prototype.mutateActivation = function (allowedActivations) {\r\n        var _this = this;\r\n        if (allowedActivations === void 0) { allowedActivations = Object.values(src_1.ALL_ACTIVATIONS); }\r\n        // pick a random activation from allowed activations except the current activation\r\n        var possible = allowedActivations.filter(function (activation) { return activation !== _this.squash; });\r\n        if (possible.length > 0) {\r\n            this.squash = Utils_1.pickRandom(possible);\r\n        }\r\n    };\r\n    /**\r\n     * Checks if the given node(s) are have outgoing connections to this node\r\n     *\r\n     * @param node Checks if `node(s)` have outgoing connections into this node\r\n     * @time O(n)\r\n     *\r\n     * @return Returns true, if every node(s) has an outgoing connection into this node\r\n     */\r\n    Node.prototype.isProjectedBy = function (node) {\r\n        if (node === this) { // self connection\r\n            return this.selfConnection.weight !== 0; // is projected, if weight of self connection is unequal 0\r\n        }\r\n        else {\r\n            return Array.from(this.incoming).map(function (conn) { return conn.from; }).includes(node); // check every incoming connection for node\r\n        }\r\n    };\r\n    /**\r\n     * Checks if this node has an outgoing connection(s) into the given node(s)\r\n     *\r\n     * @param node Checks if this node has outgoing connection(s) into `node(s)`\r\n     * @time O(n)\r\n     *\r\n     * @returns Returns true, if this node has an outgoing connection into every node(s)\r\n     */\r\n    Node.prototype.isProjectingTo = function (node) {\r\n        if (node === this) { // self connection\r\n            return this.selfConnection.weight !== 0; // is projected, if weight of self connection is unequal 0\r\n        }\r\n        else {\r\n            return Array.from(this.outgoing).map(function (conn) { return conn.to; }).includes(node); // check every outgoing connection for node\r\n        }\r\n    };\r\n    /**\r\n     * This node gates (influences) the given connection\r\n     *\r\n     * @param connection Connection to be gated (influenced) by a neuron\r\n     * @time O(1)\r\n     */\r\n    Node.prototype.addGate = function (connection) {\r\n        this.gated.add(connection);\r\n        connection.gateNode = this;\r\n    };\r\n    /**\r\n     * Stops this node from gating (manipulating) the given connection(s)\r\n     *\r\n     * @param connection Connections to remove gate - _i.e. remove this node from_\r\n     * @time O(1)\r\n     */\r\n    Node.prototype.removeGate = function (connection) {\r\n        this.gated.delete(connection);\r\n        connection.gateNode = null;\r\n        connection.gain = 1;\r\n    };\r\n    /**\r\n     * Connects this node to the given node(s)\r\n     *\r\n     * @param target Node(s) to project connection(s) to\r\n     * @param weight Initial connection(s) [weight](https://en.wikipedia.org/wiki/Synaptic_weight)\r\n     * @param twoSided If `true` connect nodes to each other\r\n     * @time O(n)\r\n     */\r\n    Node.prototype.connect = function (target, weight, twoSided) {\r\n        if (weight === void 0) { weight = 1; }\r\n        if (twoSided === void 0) { twoSided = false; }\r\n        if (target === this) { // self connection\r\n            this.selfConnection.weight = weight;\r\n            return this.selfConnection;\r\n        }\r\n        else if (this.isProjectingTo(target)) {\r\n            throw new ReferenceError(\"Their is already a connection!\"); // already connected\r\n        }\r\n        else {\r\n            var connection = new Connection_1.Connection(this, target, weight); // create new connection\r\n            // add it to the arrays\r\n            this.outgoing.add(connection);\r\n            target.incoming.add(connection);\r\n            if (twoSided) {\r\n                target.connect(this); // connect in the other direction\r\n            }\r\n            return connection;\r\n        }\r\n    };\r\n    /**\r\n     * Disconnects this node from the given node(s)\r\n     *\r\n     * @param node Node(s) to remove connection(s) to\r\n     * @param twoSided=false If `true` disconnects nodes from each other (i.e. both sides)\r\n     * @time O(n)\r\n     */\r\n    Node.prototype.disconnect = function (node, twoSided) {\r\n        if (twoSided === void 0) { twoSided = false; }\r\n        if (node === this) { // self connection\r\n            this.selfConnection.weight = 0; // set weight to 0\r\n            return this.selfConnection;\r\n        }\r\n        var connections = Array.from(this.outgoing).filter(function (conn) { return conn.to === node; });\r\n        if (connections.length === 0) {\r\n            throw new Error(\"No Connection found\");\r\n        }\r\n        var connection = connections[0];\r\n        // remove it from the arrays\r\n        this.outgoing.delete(connection);\r\n        connection.to.incoming.delete(connection);\r\n        if (connection.gateNode !== undefined && connection.gateNode != null) {\r\n            connection.gateNode.removeGate(connection); // if connection is gated -> remove gate\r\n        }\r\n        if (twoSided) {\r\n            node.disconnect(this); // disconnect the other direction\r\n        }\r\n        return connection;\r\n    };\r\n    /**\r\n     * Backpropagate the error (a.k.a. learn).\r\n     *\r\n     * After an activation, you can teach the node what should have been the correct output (a.k.a. train). This is done by backpropagating. [Momentum](https://www.willamette.edu/~gorr/classes/cs449/momrate.html) adds a fraction of the previous weight update to the current one. When the gradient keeps pointing in the same direction, this will increase the size of the steps taken towards the minimum.\r\n     *\r\n     * If you combine a high learning rate with a lot of momentum, you will rush past the minimum (of the error function) with huge steps. It is therefore often necessary to reduce the global learning rate µ when using a lot of momentum (m close to 1).\r\n     *\r\n     * @param target The target value (i.e. \"the value the network SHOULD have given\")\r\n     * @param options More options for propagation\r\n     * @time O(n&sup2;)\r\n     *\r\n     * @see [Regularization Neataptic](https://wagenaartje.github.io/neataptic/docs/methods/regularization/)\r\n     * @see [What is backpropagation | YouTube](https://www.youtube.com/watch?v=Ilg3gGewQ5U)\r\n     */\r\n    Node.prototype.propagate = function (target, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        options.momentum = Utils_1.getOrDefault(options.momentum, 0);\r\n        options.rate = Utils_1.getOrDefault(options.rate, 0.3);\r\n        options.update = Utils_1.getOrDefault(options.update, true);\r\n        if (target !== undefined && Number.isFinite(target)) {\r\n            this.errorResponsibility = this.errorProjected = target - this.activation;\r\n        }\r\n        else {\r\n            this.errorProjected = 0;\r\n            this.outgoing.forEach(function (connection) {\r\n                _this.errorProjected += connection.to.errorResponsibility * connection.weight * connection.gain;\r\n            });\r\n            this.errorProjected *= this.derivativeState;\r\n            this.errorGated = 0;\r\n            this.gated.forEach(function (connection) {\r\n                var influence;\r\n                if (connection.to.selfConnection.gateNode === _this) { // self connection is gated with this node\r\n                    influence = connection.to.old + connection.weight * connection.from.activation;\r\n                }\r\n                else {\r\n                    influence = connection.weight * connection.from.activation;\r\n                }\r\n                _this.errorGated += connection.to.errorResponsibility * influence;\r\n            });\r\n            this.errorGated *= this.derivativeState;\r\n            this.errorResponsibility = this.errorProjected + this.errorGated;\r\n        }\r\n        this.incoming.forEach(function (connection) {\r\n            var _a, _b;\r\n            // calculate gradient\r\n            var gradient = _this.errorProjected * connection.eligibility;\r\n            connection.xTrace.forEach(function (value, key) { return gradient += key.errorResponsibility * value; });\r\n            connection.deltaWeightsTotal += ((_a = options.rate) !== null && _a !== void 0 ? _a : 0.3) * gradient * _this.mask;\r\n            if (options.update) {\r\n                connection.deltaWeightsTotal += ((_b = options.momentum) !== null && _b !== void 0 ? _b : 0) * connection.deltaWeightsPrevious;\r\n                connection.weight += connection.deltaWeightsTotal;\r\n                connection.deltaWeightsPrevious = connection.deltaWeightsTotal;\r\n                connection.deltaWeightsTotal = 0;\r\n            }\r\n        });\r\n        this.deltaBiasTotal += options.rate * this.errorResponsibility;\r\n        if (options.update) {\r\n            this.deltaBiasTotal += options.momentum * this.deltaBiasPrevious;\r\n            this.bias += this.deltaBiasTotal;\r\n            this.deltaBiasPrevious = this.deltaBiasTotal;\r\n            this.deltaBiasTotal = 0;\r\n        }\r\n    };\r\n    /**\r\n     * Actives the node.\r\n     *\r\n     * When a neuron activates, it computes its state from all its input connections and 'squashes' it using its activation function, and returns the output (activation).\r\n     *\r\n     * You can also provide the activation (a float between 0 and 1) as a parameter, which is useful for neurons in the input layer.\r\n     *\r\n     * @param [input] Environment signal (i.e. optional numerical value passed to the network as input)  - _should only be passed in input neurons_\r\n     * @param [trace] Controls whether traces are created when activation happens (a trace is meta information left behind for different uses, e.g. backpropagation).\r\n     * @time O(n&sup2;)\r\n     *\r\n     * @returns A neuron's ['Squashed'](https://medium.com/the-theory-of-everything/understanding-activation-functions-in-neural-networks-9491262884e0) output value\r\n     */\r\n    Node.prototype.activate = function (input, trace) {\r\n        var _this = this;\r\n        if (trace === void 0) { trace = true; }\r\n        if (input !== undefined) {\r\n            return this.activation = input;\r\n        }\r\n        else if (this.isInputNode()) {\r\n            throw new ReferenceError(\"There is no input given to an input node!\");\r\n        }\r\n        if (trace) {\r\n            this.old = this.state;\r\n            this.state = this.selfConnection.gain * this.selfConnection.weight * this.state + this.bias;\r\n            this.incoming.forEach(function (conn) {\r\n                _this.state += conn.from.activation * conn.weight * conn.gain;\r\n            });\r\n            this.activation = this.squash(this.state, false) * this.mask;\r\n            this.derivativeState = this.squash(this.state, true);\r\n            // store traces\r\n            var nodes_1 = [];\r\n            var influences_1 = [];\r\n            // Adjust 'gain' (to gated connections) & Build traces\r\n            this.gated.forEach(function (connection) {\r\n                connection.gain = _this.activation;\r\n                // Build traces\r\n                var index = nodes_1.indexOf(connection.to);\r\n                if (index > -1) { // Node & influence exist\r\n                    influences_1[index] += connection.weight * connection.from.activation;\r\n                }\r\n                else { // Add node & corresponding influence\r\n                    nodes_1.push(connection.to);\r\n                    if (connection.to.selfConnection.gateNode === _this) {\r\n                        influences_1.push(connection.weight * connection.from.activation + connection.to.old);\r\n                    }\r\n                    else {\r\n                        influences_1.push(connection.weight * connection.from.activation);\r\n                    }\r\n                }\r\n            });\r\n            // Forwarding 'xTrace' (to incoming connections)\r\n            this.incoming.forEach(function (connection) {\r\n                var _a;\r\n                connection.eligibility = _this.selfConnection.gain * _this.selfConnection.weight * connection.eligibility + connection.from.activation * connection.gain;\r\n                for (var i = 0; i < nodes_1.length; i++) {\r\n                    var node = nodes_1[i];\r\n                    var influence = influences_1[i];\r\n                    if (connection.xTrace.has(node)) {\r\n                        connection.xTrace.set(node, node.selfConnection.gain * node.selfConnection.weight * ((_a = connection.xTrace.get(node)) !== null && _a !== void 0 ? _a : 0) + _this.derivativeState * connection.eligibility * influence);\r\n                    }\r\n                    else {\r\n                        connection.xTrace.set(node, _this.derivativeState * connection.eligibility * influence);\r\n                    }\r\n                }\r\n            });\r\n            return this.activation;\r\n        }\r\n        else {\r\n            if (this.isInputNode())\r\n                return this.activation = 0;\r\n            this.state = this.selfConnection.gain * this.selfConnection.weight * this.state + this.bias;\r\n            this.incoming.forEach(function (connection) { return _this.state += connection.from.activation * connection.weight * connection.gain; });\r\n            this.activation = this.squash(this.state, false);\r\n            // Adjust gain\r\n            this.gated.forEach(function (connection) { return connection.gain = _this.activation; });\r\n            return this.activation;\r\n        }\r\n    };\r\n    /**\r\n     * Converts the node to a json object that can later be converted back\r\n     *\r\n     * @time O(1)\r\n     * @returns A node representing json object\r\n     */\r\n    Node.prototype.toJSON = function () {\r\n        return {\r\n            bias: this.bias,\r\n            type: this.type,\r\n            squash: this.squash,\r\n            mask: this.mask,\r\n            index: this.index\r\n        };\r\n    };\r\n    /**\r\n     * Is this a input Node?\r\n     * @time O(1)\r\n     */\r\n    Node.prototype.isInputNode = function () {\r\n        return this.type === NodeType_1.NodeType.INPUT;\r\n    };\r\n    /**\r\n     * Is this a hidden Node?\r\n     * @time O(1)\r\n     */\r\n    Node.prototype.isHiddenNode = function () {\r\n        return this.type === NodeType_1.NodeType.HIDDEN;\r\n    };\r\n    /**\r\n     * Is this a output Node?\r\n     * @time O(1)\r\n     */\r\n    Node.prototype.isOutputNode = function () {\r\n        return this.type === NodeType_1.NodeType.OUTPUT;\r\n    };\r\n    /**\r\n     * Set bias.\r\n     *\r\n     * @param bias the new bias value\r\n     * @time O(1)\r\n     */\r\n    Node.prototype.setBias = function (bias) {\r\n        this.bias = bias;\r\n        return this;\r\n    };\r\n    /**\r\n     * Set activation type\r\n     *\r\n     * @param activation the new activation type\r\n     * @time O(1)\r\n     */\r\n    Node.prototype.setActivationType = function (activation) {\r\n        this.squash = activation;\r\n        return this;\r\n    };\r\n    return Node;\r\n}());\r\nexports.Node = Node;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GatingType = void 0;\r\n/**\r\n * The type of gating.\r\n */\r\nvar GatingType;\r\n(function (GatingType) {\r\n    /**\r\n     * Gate incoming connections.\r\n     */\r\n    GatingType[GatingType[\"INPUT\"] = 0] = \"INPUT\";\r\n    /**\r\n     * Gate self connections.\r\n     */\r\n    GatingType[GatingType[\"SELF\"] = 1] = \"SELF\";\r\n    /**\r\n     * Gate outgoing connections.\r\n     */\r\n    GatingType[GatingType[\"OUTPUT\"] = 2] = \"OUTPUT\";\r\n})(GatingType = exports.GatingType || (exports.GatingType = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Layer = void 0;\r\nvar ConnectionType_1 = require(\"../../enums/ConnectionType\");\r\nvar GatingType_1 = require(\"../../enums/GatingType\");\r\n/**\r\n * Parent class for layers.\r\n */\r\nvar Layer = /** @class */ (function () {\r\n    function Layer(outputSize) {\r\n        this.outputSize = outputSize;\r\n        this.nodes = [];\r\n        this.inputNodes = new Set();\r\n        this.outputNodes = new Set();\r\n        this.connections = [];\r\n        this.gates = [];\r\n    }\r\n    /**\r\n     * Connect two Layers or sets of Nodes.\r\n     *\r\n     * @param from origin Nodes / Layer\r\n     * @param to destination Nodes / Layer\r\n     * @param connectionType The type of connection\r\n     * @param weight the initial weights for all new connections\r\n     *\r\n     * @returns all created connections\r\n     */\r\n    Layer.connect = function (from, to, connectionType, weight) {\r\n        if (connectionType === void 0) { connectionType = ConnectionType_1.ConnectionType.ALL_TO_ALL; }\r\n        if (weight === void 0) { weight = 1; }\r\n        if (connectionType === ConnectionType_1.ConnectionType.NO_CONNECTION) {\r\n            throw new ReferenceError(\"Cannot connect with 'NO_CONNECTION' connection type\");\r\n        }\r\n        var fromNodes = Array.from(from instanceof Layer ? from.outputNodes : from);\r\n        var toNodes = Array.from(to instanceof Layer ? to.inputNodes : to);\r\n        if (toNodes.length === 0) {\r\n            throw new ReferenceError(\"Target from has no input nodes!\");\r\n        }\r\n        if (fromNodes.length === 0) {\r\n            throw new ReferenceError(\"This from has no output nodes!\");\r\n        }\r\n        var connections = [];\r\n        if (connectionType === ConnectionType_1.ConnectionType.ALL_TO_ALL) {\r\n            fromNodes.forEach(function (fromNode) {\r\n                toNodes.forEach(function (toNode) {\r\n                    connections.push(fromNode.connect(toNode, weight)); // connect every \"from node\" to every \"to node\"\r\n                });\r\n            });\r\n        }\r\n        else if (connectionType === ConnectionType_1.ConnectionType.ONE_TO_ONE) {\r\n            if (fromNodes.length !== toNodes.length) {\r\n                throw new RangeError(\"Can't connect one to one! Number of output nodes from are unequal number of incoming nodes from next layer!\");\r\n            }\r\n            for (var i = 0; i < fromNodes.length; i++) {\r\n                connections.push(fromNodes[i].connect(toNodes[i], weight)); // connect every nodes with same indices\r\n            }\r\n        }\r\n        else if (connectionType === ConnectionType_1.ConnectionType.POOLING) {\r\n            // connect the same amount of input nodes to every output node\r\n            // every input node has only one connection available\r\n            var ratio_1 = toNodes.length / fromNodes.length;\r\n            connections.push.apply(connections, fromNodes.map(function (node, index) { return node.connect(toNodes[Math.floor(index * ratio_1)], weight); }));\r\n        }\r\n        return connections;\r\n    };\r\n    /**\r\n     * Gate nodes and connections.\r\n     *\r\n     * @param nodes the nodes which function as gateNodes\r\n     * @param connections the connections which will be gated\r\n     * @param gateType The type of gating\r\n     *\r\n     * @returns all gated connections\r\n     */\r\n    Layer.gate = function (nodes, connections, gateType) {\r\n        var gatedConnections = [];\r\n        switch (gateType) {\r\n            case GatingType_1.GatingType.INPUT: { // gate incoming connections\r\n                var toNodes = Array.from(new Set(connections.map(function (conn) { return conn.to; })));\r\n                var _loop_1 = function (i) {\r\n                    var node = toNodes[i];\r\n                    var gateNode = nodes[i % nodes.length];\r\n                    node.incoming\r\n                        .forEach(function (conn) {\r\n                        if (connections.includes(conn)) {\r\n                            gateNode.addGate(conn);\r\n                            gatedConnections.push(conn);\r\n                        }\r\n                    });\r\n                };\r\n                for (var i = 0; i < toNodes.length; i++) {\r\n                    _loop_1(i);\r\n                }\r\n                break;\r\n            }\r\n            case GatingType_1.GatingType.SELF: { // gate self connections\r\n                var fromNodes = Array.from(new Set(connections.map(function (conn) { return conn.from; })));\r\n                for (var i = 0; i < fromNodes.length; i++) {\r\n                    if (connections.includes(fromNodes[i].selfConnection)) {\r\n                        nodes[i % nodes.length].addGate(fromNodes[i].selfConnection);\r\n                        gatedConnections.push(fromNodes[i].selfConnection);\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case GatingType_1.GatingType.OUTPUT: { // gate outgoing connections\r\n                var fromNodes = Array.from(new Set(connections.map(function (conn) { return conn.from; })));\r\n                var _loop_2 = function (i) {\r\n                    var node = fromNodes[i];\r\n                    var gateNode = nodes[i % nodes.length];\r\n                    node.outgoing\r\n                        .forEach(function (conn) {\r\n                        if (connections.includes(conn)) {\r\n                            gateNode.addGate(conn);\r\n                            gatedConnections.push(conn);\r\n                        }\r\n                    });\r\n                };\r\n                for (var i = 0; i < fromNodes.length; i++) {\r\n                    _loop_2(i);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        return gatedConnections;\r\n    };\r\n    return Layer;\r\n}());\r\nexports.Layer = Layer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ConstantNode = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar NodeType_1 = require(\"../../enums/NodeType\");\r\nvar Node_1 = require(\"../Node\");\r\n/**\r\n * Constant node\r\n */\r\nvar ConstantNode = /** @class */ (function (_super) {\r\n    __extends(ConstantNode, _super);\r\n    function ConstantNode() {\r\n        var _this = _super.call(this, NodeType_1.NodeType.HIDDEN) || this;\r\n        _this.bias = 1;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Create a constant node from json object.\r\n     *\r\n     * @param json the json object representing the node\r\n     *\r\n     * @returns the created node\r\n     */\r\n    ConstantNode.prototype.fromJSON = function (json) {\r\n        var _a, _b;\r\n        this.index = (_a = json.index) !== null && _a !== void 0 ? _a : -1;\r\n        this.squash = (_b = json.squash) !== null && _b !== void 0 ? _b : src_1.Identitiy;\r\n        return this;\r\n    };\r\n    /**\r\n     * Convert this node into a json object.\r\n     *\r\n     * @returns the json object representing this node\r\n     */\r\n    ConstantNode.prototype.toJSON = function () {\r\n        return { index: this.index, squash: this.squash };\r\n    };\r\n    /**\r\n     * Bias mutations aren't allowed for a constant node.\r\n     */\r\n    ConstantNode.prototype.mutateBias = function () {\r\n        throw new ReferenceError(\"Cannot mutate a pool node!\");\r\n    };\r\n    /**\r\n     * Activation mutations aren't allowed for a constant node.\r\n     */\r\n    ConstantNode.prototype.mutateActivation = function () {\r\n        throw new ReferenceError(\"Cannot mutate a pool node!\");\r\n    };\r\n    /**\r\n     * Constant nodes can't gate a connection.\r\n     */\r\n    ConstantNode.prototype.addGate = function () {\r\n        throw new ReferenceError(\"A pool node can't gate a connection!\");\r\n    };\r\n    /**\r\n     * Constant nodes can't gate a connection.\r\n     */\r\n    ConstantNode.prototype.removeGate = function () {\r\n        throw new ReferenceError(\"A pool node can't gate a connection!\");\r\n    };\r\n    /**\r\n     * Can't set the bias of a constant node.\r\n     */\r\n    ConstantNode.prototype.setBias = function () {\r\n        throw new ReferenceError(\"Cannot set the bias of a pool node!\");\r\n    };\r\n    return ConstantNode;\r\n}(Node_1.Node));\r\nexports.ConstantNode = ConstantNode;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NoiseNode = void 0;\r\nvar NodeType_1 = require(\"../../enums/NodeType\");\r\nvar Utils_1 = require(\"../../utils/Utils\");\r\nvar ConstantNode_1 = require(\"./ConstantNode\");\r\n/**\r\n * Noise node\r\n */\r\nvar NoiseNode = /** @class */ (function (_super) {\r\n    __extends(NoiseNode, _super);\r\n    function NoiseNode(options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this) || this;\r\n        _this.noiseType = Utils_1.getOrDefault(options.noiseType, NodeType_1.NoiseNodeType.GAUSSIAN_NOISE);\r\n        _this.options = options;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Actives the node.\r\n     *\r\n     * When a neuron activates, it computes its state from all its input connections and 'squashes' it using its activation function, and returns the output (activation).\r\n     *\r\n     * You can also provide the activation (a float between 0 and 1) as a parameter, which is useful for neurons in the input layer.\r\n     *\r\n     * @returns A neuron's output value\r\n     */\r\n    NoiseNode.prototype.activate = function () {\r\n        var _a, _b, _c, _d;\r\n        this.old = this.state;\r\n        var incomingStates = Array.from(this.incoming).map(function (conn) { return conn.from.activation * conn.weight * conn.gain; });\r\n        switch (this.noiseType) {\r\n            case NodeType_1.NoiseNodeType.GAUSSIAN_NOISE:\r\n                this.state = Utils_1.avg(incomingStates) + Utils_1.generateGaussian((_b = (_a = this.options.gaussian) === null || _a === void 0 ? void 0 : _a.mean) !== null && _b !== void 0 ? _b : 0, (_d = (_c = this.options.gaussian) === null || _c === void 0 ? void 0 : _c.deviation) !== null && _d !== void 0 ? _d : 2);\r\n                break;\r\n            default:\r\n                throw new ReferenceError(\"Cannot activate this noise type!\");\r\n        }\r\n        this.activation = this.squash(this.state, false) * this.mask;\r\n        this.derivativeState = this.squash(this.state, true);\r\n        return this.activation;\r\n    };\r\n    /**\r\n     * Backpropagate the error (a.k.a. learn).\r\n     *\r\n     * After an activation, you can teach the node what should have been the correct output (a.k.a. train). This is done by backpropagating. [Momentum](https://www.willamette.edu/~gorr/classes/cs449/momrate.html) adds a fraction of the previous weight update to the current one. When the gradient keeps pointing in the same direction, this will increase the size of the steps taken towards the minimum.\r\n     *\r\n     * If you combine a high learning rate with a lot of momentum, you will rush past the minimum (of the error function) with huge steps. It is therefore often necessary to reduce the global learning rate µ when using a lot of momentum (m close to 1).\r\n     *\r\n     * @param target The target value (i.e. \"the value the network SHOULD have given\")\r\n     * @param options More options for propagation\r\n     */\r\n    NoiseNode.prototype.propagate = function (target, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        options.momentum = Utils_1.getOrDefault(options.momentum, 0);\r\n        options.rate = Utils_1.getOrDefault(options.rate, 0.3);\r\n        options.update = Utils_1.getOrDefault(options.update, true);\r\n        var connectionsStates = Array.from(this.outgoing).map(function (conn) { return conn.to.errorResponsibility * conn.weight * conn.gain; });\r\n        this.errorResponsibility = this.errorProjected = Utils_1.sum(connectionsStates) * this.derivativeState;\r\n        this.incoming.forEach(function (connection) {\r\n            var _a, _b;\r\n            // calculate gradient\r\n            var gradient = _this.errorProjected * connection.eligibility;\r\n            connection.xTrace.forEach(function (value, key) {\r\n                gradient += key.errorResponsibility * value;\r\n            });\r\n            connection.deltaWeightsTotal += ((_a = options.rate) !== null && _a !== void 0 ? _a : 0.3) * gradient * _this.mask;\r\n            if (options.update) {\r\n                connection.deltaWeightsTotal += ((_b = options.momentum) !== null && _b !== void 0 ? _b : 0) * connection.deltaWeightsPrevious;\r\n                connection.weight += connection.deltaWeightsTotal;\r\n                connection.deltaWeightsPrevious = connection.deltaWeightsTotal;\r\n                connection.deltaWeightsTotal = 0;\r\n            }\r\n        });\r\n    };\r\n    return NoiseNode;\r\n}(ConstantNode_1.ConstantNode));\r\nexports.NoiseNode = NoiseNode;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NoiseLayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar ConnectionType_1 = require(\"../../../enums/ConnectionType\");\r\nvar NodeType_1 = require(\"../../../enums/NodeType\");\r\nvar NoiseNode_1 = require(\"../../Nodes/NoiseNode\");\r\nvar Layer_1 = require(\"../Layer\");\r\n/**\r\n * Noise layer\r\n */\r\nvar NoiseLayer = /** @class */ (function (_super) {\r\n    __extends(NoiseLayer, _super);\r\n    function NoiseLayer(outputSize, options) {\r\n        var _a;\r\n        if (options === void 0) { options = {}; }\r\n        var _b;\r\n        var _this = _super.call(this, outputSize) || this;\r\n        var activation = (_b = options.activation) !== null && _b !== void 0 ? _b : src_1.Identitiy;\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new NoiseNode_1.NoiseNode({\r\n                noiseType: NodeType_1.NoiseNodeType.GAUSSIAN_NOISE,\r\n                gaussian: options\r\n            }).setActivationType(activation));\r\n        }\r\n        _this.outputNodes = _this.inputNodes;\r\n        (_a = _this.nodes).push.apply(_a, Array.from(_this.inputNodes));\r\n        return _this;\r\n    }\r\n    /**\r\n     * Gets the default connection type for a incoming connection to this layer.\r\n     *\r\n     * @returns the default incoming connection\r\n     */\r\n    NoiseLayer.prototype.getDefaultIncomingConnectionType = function () {\r\n        return ConnectionType_1.ConnectionType.ONE_TO_ONE;\r\n    };\r\n    /**\r\n     * Checks if a given connection type is allowed on this layer.\r\n     *\r\n     * @param type the type to check\r\n     *\r\n     * @return Is this connection type allowed?\r\n     */\r\n    NoiseLayer.prototype.connectionTypeisAllowed = function (type) {\r\n        return type === ConnectionType_1.ConnectionType.ONE_TO_ONE;\r\n    };\r\n    return NoiseLayer;\r\n}(Layer_1.Layer));\r\nexports.NoiseLayer = NoiseLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InputLayer = void 0;\r\nvar ConnectionType_1 = require(\"../../../enums/ConnectionType\");\r\nvar NodeType_1 = require(\"../../../enums/NodeType\");\r\nvar Node_1 = require(\"../../Node\");\r\nvar Layer_1 = require(\"../Layer\");\r\nvar NoiseLayer_1 = require(\"../NoiseLayers/NoiseLayer\");\r\n/**\r\n * Input layer\r\n */\r\nvar InputLayer = /** @class */ (function (_super) {\r\n    __extends(InputLayer, _super);\r\n    function InputLayer(outputSize, options) {\r\n        var _a;\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, outputSize) || this;\r\n        for (var i = 0; i < outputSize; i++) {\r\n            var node = new Node_1.Node(NodeType_1.NodeType.INPUT);\r\n            _this.nodes.push(node);\r\n        }\r\n        if (options.noise) {\r\n            var noiseLayer = new NoiseLayer_1.NoiseLayer(options.noise);\r\n            noiseLayer.outputNodes.forEach(function (node) { return _this.outputNodes.add(node); });\r\n            (_a = _this.connections).push.apply(_a, Layer_1.Layer.connect(_this.nodes, noiseLayer, noiseLayer.getDefaultIncomingConnectionType()));\r\n        }\r\n        else {\r\n            _this.nodes.forEach(function (node) { return _this.outputNodes.add(node); });\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Gets the default connection type for a incoming connection to this layer.\r\n     *\r\n     * @returns the default incoming connection\r\n     */\r\n    InputLayer.prototype.getDefaultIncomingConnectionType = function () {\r\n        return ConnectionType_1.ConnectionType.NO_CONNECTION;\r\n    };\r\n    /**\r\n     * Checks if a given connection type is allowed on this layer.\r\n     *\r\n     * @param type the type to check\r\n     *\r\n     * @return Is this connection type allowed?\r\n     */\r\n    InputLayer.prototype.connectionTypeisAllowed = function (type) {\r\n        return type === ConnectionType_1.ConnectionType.NO_CONNECTION;\r\n    };\r\n    return InputLayer;\r\n}(Layer_1.Layer));\r\nexports.InputLayer = InputLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutputLayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar ConnectionType_1 = require(\"../../../enums/ConnectionType\");\r\nvar NodeType_1 = require(\"../../../enums/NodeType\");\r\nvar Node_1 = require(\"../../Node\");\r\nvar Layer_1 = require(\"../Layer\");\r\n/**\r\n * Output layer\r\n */\r\nvar OutputLayer = /** @class */ (function (_super) {\r\n    __extends(OutputLayer, _super);\r\n    function OutputLayer(outputSize, options) {\r\n        var _a;\r\n        if (options === void 0) { options = {}; }\r\n        var _b;\r\n        var _this = _super.call(this, outputSize) || this;\r\n        var activation = (_b = options.activation) !== null && _b !== void 0 ? _b : src_1.Identitiy;\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new Node_1.Node(NodeType_1.NodeType.OUTPUT).setActivationType(activation));\r\n        }\r\n        (_a = _this.nodes).push.apply(_a, Array.from(_this.inputNodes));\r\n        return _this;\r\n    }\r\n    /**\r\n     * A outgoing connection is not allowed for an output layer!\r\n     */\r\n    OutputLayer.prototype.connect = function () {\r\n        throw new ReferenceError(\"Could not connect an OutputLayer!\");\r\n    };\r\n    /**\r\n     * Checks if a given connection type is allowed on this layer.\r\n     *\r\n     * @param type the type to check\r\n     *\r\n     * @return Is this connection type allowed?\r\n     */\r\n    OutputLayer.prototype.connectionTypeisAllowed = function (type) {\r\n        return true;\r\n    };\r\n    /**\r\n     * Gets the default connection type for a incoming connection to this layer.\r\n     *\r\n     * @returns the default incoming connection\r\n     */\r\n    OutputLayer.prototype.getDefaultIncomingConnectionType = function () {\r\n        return ConnectionType_1.ConnectionType.ALL_TO_ALL;\r\n    };\r\n    return OutputLayer;\r\n}(Layer_1.Layer));\r\nexports.OutputLayer = OutputLayer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ALL_LOSSES = exports.HINGELoss = exports.MSLELoss = exports.WAPELoss = exports.MAPELoss = exports.MAELoss = exports.BinaryLoss = exports.MBELoss = exports.MSELoss = void 0;\r\nvar Utils_1 = require(\"../utils/Utils\");\r\nexports.MSELoss = function (targets, outputs) {\r\n    var error = 0;\r\n    outputs.forEach((function (value, index) {\r\n        error += Math.pow((targets[index] - value), 2);\r\n    }));\r\n    return error / outputs.length;\r\n};\r\nexports.MBELoss = function (targets, outputs) {\r\n    var error = 0;\r\n    outputs.forEach((function (value, index) {\r\n        error += (targets[index] - value);\r\n    }));\r\n    return error / outputs.length;\r\n};\r\nexports.BinaryLoss = function (targets, outputs) {\r\n    var error = 0;\r\n    outputs.forEach((function (value, index) {\r\n        error += Math.round(targets[index] * 2) !== Math.round(value * 2) ? 1 : 0;\r\n    }));\r\n    return error / outputs.length;\r\n};\r\nexports.MAELoss = function (targets, outputs) {\r\n    var error = 0;\r\n    outputs.forEach((function (value, index) {\r\n        error += Math.abs(targets[index] - value);\r\n    }));\r\n    return error / outputs.length;\r\n};\r\nexports.MAPELoss = function (targets, outputs) {\r\n    var error = 0;\r\n    outputs.forEach((function (value, index) {\r\n        error += Math.abs((value - targets[index]) / Math.max(targets[index], 1e-15));\r\n    }));\r\n    return error / outputs.length;\r\n};\r\nexports.WAPELoss = function (targets, outputs) {\r\n    var error = 0;\r\n    outputs.forEach((function (value, index) {\r\n        error += Math.abs(targets[index] - value);\r\n    }));\r\n    return error / Utils_1.sum(targets);\r\n};\r\nexports.MSLELoss = function (targets, outputs) {\r\n    var error = 0;\r\n    outputs.forEach((function (value, index) {\r\n        error += Math.log(Math.max(targets[index], 1e-15)) - Math.log(Math.max(value, 1e-15));\r\n    }));\r\n    return error / outputs.length;\r\n};\r\nexports.HINGELoss = function (targets, outputs) {\r\n    var error = 0;\r\n    outputs.forEach(function (value, index) {\r\n        error += Math.max(0, 1 - value * targets[index]);\r\n    });\r\n    return error / outputs.length;\r\n};\r\nexports.ALL_LOSSES = {\r\n    MSELoss: exports.MSELoss,\r\n    MBELoss: exports.MBELoss,\r\n    BinaryLoss: exports.BinaryLoss,\r\n    MAELoss: exports.MAELoss,\r\n    MAPELoss: exports.MAPELoss,\r\n    WAPELoss: exports.WAPELoss,\r\n    MSLELoss: exports.MSLELoss,\r\n    HINGELoss: exports.HINGELoss\r\n};\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InverseRate = exports.ExponentialRate = exports.StepRate = exports.FixedRate = exports.Rate = void 0;\r\n/**\r\n * Built-in learning rate policies, which allow for a dynamic learning rate during neural network training.\r\n *\r\n * @see [Learning rates and how-to improve performance](https://towardsdatascience.com/understanding-learning-rates-and-how-it-improves-performance-in-deep-learning-d0d4059c1c10)\r\n * @see [Learning rate policy](https://stackoverflow.com/questions/30033096/what-is-lr-policy-in-caffe/30045244)\r\n *\r\n */\r\nvar Rate = /** @class */ (function () {\r\n    /**\r\n     * Constructs a rate policy\r\n     * @param baseRate the rate at first iteration\r\n     */\r\n    function Rate(baseRate) {\r\n        this.baseRate = baseRate;\r\n    }\r\n    return Rate;\r\n}());\r\nexports.Rate = Rate;\r\n/**\r\n * Fixed Learning Rate\r\n *\r\n * Default rate policy. Using this will make learning rate static (no change). Useful as a way to update a previous rate policy.\r\n */\r\nvar FixedRate = /** @class */ (function (_super) {\r\n    __extends(FixedRate, _super);\r\n    function FixedRate() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Calculates the current training rate.\r\n     *\r\n     * @param iteration count\r\n     * @time O(1)\r\n     * @returns the current training rate\r\n     */\r\n    FixedRate.prototype.calc = function (iteration) {\r\n        return this.baseRate;\r\n    };\r\n    return FixedRate;\r\n}(Rate));\r\nexports.FixedRate = FixedRate;\r\n/**\r\n * Step Learning Rate\r\n *\r\n * The learning rate will decrease (i.e. 'step down') every `stepSize` iterations.\r\n */\r\nvar StepRate = /** @class */ (function (_super) {\r\n    __extends(StepRate, _super);\r\n    /**\r\n     * Constructs a step rate policy.\r\n     *\r\n     * @param baseRate the rate at first iteration\r\n     * @param gamma=0.9 Learning rate retention per step; - _0 < `gamma` < 1_ - _large `gamma` CAN cause networks to never converge, low `gamma` CAN cause networks to converge too quickly_\r\n     * @param stepSize=100 Learning rate is updated every `step_size` iterations\r\n     */\r\n    function StepRate(baseRate, gamma, stepSize) {\r\n        if (gamma === void 0) { gamma = 0.9; }\r\n        if (stepSize === void 0) { stepSize = 100; }\r\n        var _this = _super.call(this, baseRate) || this;\r\n        _this.gamma = gamma;\r\n        _this.stepSize = stepSize;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Calculates the current training rate.\r\n     *\r\n     * @param iteration count\r\n     * @time O(1)\r\n     * @returns the current training rate\r\n     */\r\n    StepRate.prototype.calc = function (iteration) {\r\n        return this.baseRate * Math.pow(this.gamma, Math.floor(iteration / this.stepSize));\r\n    };\r\n    return StepRate;\r\n}(Rate));\r\nexports.StepRate = StepRate;\r\n/**\r\n * Exponential Learning Rate\r\n *\r\n * The learning rate will exponentially decrease.\r\n *\r\n * The rate at `iteration` is calculated as: `rate = base_rate * Math.pow(gamma, iteration)`\r\n */\r\nvar ExponentialRate = /** @class */ (function (_super) {\r\n    __extends(ExponentialRate, _super);\r\n    /**\r\n     * Constructs a step rate policy.\r\n     *\r\n     * @param baseRate the rate at first iteration\r\n     * @param gamma=0.9 Learning rate retention per step; - _0 < `gamma` < 1_ - _large `gamma` CAN cause networks to never converge, low `gamma` CAN cause networks to converge too quickly_\r\n     */\r\n    function ExponentialRate(baseRate, gamma) {\r\n        if (gamma === void 0) { gamma = 0.999; }\r\n        var _this = _super.call(this, baseRate) || this;\r\n        _this.gamma = gamma;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Calculates the current training rate.\r\n     *\r\n     * @param iteration count\r\n     * @time O(1)\r\n     * @returns the current training rate\r\n     */\r\n    ExponentialRate.prototype.calc = function (iteration) {\r\n        return this.baseRate * Math.pow(this.gamma, iteration);\r\n    };\r\n    return ExponentialRate;\r\n}(Rate));\r\nexports.ExponentialRate = ExponentialRate;\r\n/**\r\n * Inverse Exponential Learning Rate\r\n *\r\n * The learning rate will exponentially decrease.\r\n *\r\n * The rate at `iteration` is calculated as: `rate = baseRate * Math.pow(1 + gamma * iteration, -power)`\r\n */\r\nvar InverseRate = /** @class */ (function (_super) {\r\n    __extends(InverseRate, _super);\r\n    /**\r\n     * Constructs a step rate policy.\r\n     *\r\n     * @param baseRate the rate at first iteration\r\n     * @param gamma=0.001 Learning rate decay per iteration; - _0 < `gamma` < 1_ - _large `gamma` CAN cause networks to converge too quickly and stop learning, low `gamma` CAN cause networks to converge to learn VERY slowly_\r\n     * @param power=2 Decay rate per iteration - _0 < `power`_ - _large `power` CAN cause networks to stop learning quickly, low `power` CAN cause networks to learn VERY slowly_\r\n     */\r\n    function InverseRate(baseRate, gamma, power) {\r\n        if (gamma === void 0) { gamma = 0.001; }\r\n        if (power === void 0) { power = 2; }\r\n        var _this = _super.call(this, baseRate) || this;\r\n        _this.gamma = gamma;\r\n        _this.power = power;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Calculates the current training rate.\r\n     *\r\n     * @param iteration count\r\n     * @time O(1)\r\n     * @returns the current training rate\r\n     */\r\n    InverseRate.prototype.calc = function (iteration) {\r\n        return this.baseRate * Math.pow((1 + this.gamma * iteration), -this.power);\r\n    };\r\n    return InverseRate;\r\n}(Rate));\r\nexports.InverseRate = InverseRate;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Species = void 0;\r\nvar NEAT_1 = require(\"../NEAT\");\r\nvar Utils_1 = require(\"../utils/Utils\");\r\nvar Network_1 = require(\"./Network\");\r\n/**\r\n * A class holding a species\r\n */\r\nvar Species = /** @class */ (function () {\r\n    function Species(representative) {\r\n        this.representative = representative;\r\n        this.representative.species = this;\r\n        this.members = new Set();\r\n        this.members.add(representative);\r\n        this.score = 0;\r\n    }\r\n    /**\r\n     * Puts a network to the species, after checking the distance\r\n     * @param network\r\n     */\r\n    Species.prototype.put = function (network) {\r\n        if (network.distance(this.representative) < NEAT_1.NEAT.SPECIES_DISTANCE_THRESHOLD) {\r\n            this.forcePut(network);\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\n     * Puts a network to the species without checking the distance\r\n     * @param network\r\n     */\r\n    Species.prototype.forcePut = function (network) {\r\n        if (network === undefined) {\r\n            return;\r\n        }\r\n        this.members.add(network);\r\n        network.species = this;\r\n    };\r\n    /**\r\n     * Calculate the score of this species\r\n     */\r\n    Species.prototype.evaluateScore = function () {\r\n        var sum = 0;\r\n        this.members.forEach(function (network) { var _a; return sum += (_a = network.score) !== null && _a !== void 0 ? _a : 0; });\r\n        this.score = sum / this.members.size;\r\n    };\r\n    /**\r\n     * Reset this object\r\n     */\r\n    Species.prototype.reset = function () {\r\n        this.representative = Utils_1.pickRandom(this.members);\r\n        this.members.forEach(function (genome) { return genome.species = null; });\r\n        this.members.clear();\r\n        this.members.add(this.representative);\r\n        this.representative.species = this;\r\n        this.score = 0;\r\n    };\r\n    /**\r\n     * Kill a specific percantage of networks\r\n     * @param percentage\r\n     */\r\n    Species.prototype.kill = function (percentage) {\r\n        var arr = Array.from(this.members);\r\n        arr.sort(function (a, b) {\r\n            return a.score === undefined || b.score === undefined ? 0 : a.score - b.score;\r\n        });\r\n        var amount = Math.floor(percentage * this.members.size);\r\n        for (var i = 0; i < amount; i++) {\r\n            this.members.delete(arr[i]);\r\n            arr[i].species = null;\r\n        }\r\n    };\r\n    /**\r\n     * Create offspring\r\n     */\r\n    Species.prototype.breed = function () {\r\n        return Network_1.Network.crossOver(Utils_1.pickRandom(this.members), Utils_1.pickRandom(this.members));\r\n    };\r\n    /**\r\n     * The size of this species\r\n     */\r\n    Species.prototype.size = function () {\r\n        return this.members.size;\r\n    };\r\n    Species.prototype.getBest = function () {\r\n        var networks = Array.from(this.members);\r\n        return networks[Utils_1.maxValueIndex(networks.map(function (genome) { var _a; return (_a = genome.score) !== null && _a !== void 0 ? _a : -Infinity; }))];\r\n    };\r\n    return Species;\r\n}());\r\nexports.Species = Species;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TournamentSelection = exports.PowerSelection = exports.FitnessProportionateSelection = exports.Selection = void 0;\r\nvar Utils_1 = require(\"../utils/Utils\");\r\n/**\r\n * Genetic Algorithm Selection Methods (Genetic Operator)\r\n *\r\n * @see [Genetic Algorithm - Selection]{@link https://en.wikipedia.org/wiki/Selection_(genetic_algorithm)}\r\n */\r\nvar Selection = /** @class */ (function () {\r\n    function Selection() {\r\n    }\r\n    return Selection;\r\n}());\r\nexports.Selection = Selection;\r\n/**\r\n * Fitness proportionate selection\r\n *\r\n * [Fitness Proportionate / Roulette Wheel Selection on Wikipedia](https://en.wikipedia.org/wiki/Fitness_proportionate_selection)\r\n */\r\nvar FitnessProportionateSelection = /** @class */ (function (_super) {\r\n    __extends(FitnessProportionateSelection, _super);\r\n    function FitnessProportionateSelection() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Selects a genome from the population according to the Selection method.\r\n     *\r\n     * @param population the pool of networks\r\n     * @time O(n)\r\n     * @returns the selected genome\r\n     */\r\n    FitnessProportionateSelection.prototype.select = function (population) {\r\n        var _a, _b, _c;\r\n        var totalFitness = 0;\r\n        var minimalFitness = 0;\r\n        for (var _i = 0, population_1 = population; _i < population_1.length; _i++) {\r\n            var genome = population_1[_i];\r\n            minimalFitness = Math.min((_a = genome.score) !== null && _a !== void 0 ? _a : minimalFitness, minimalFitness);\r\n            totalFitness += (_b = genome.score) !== null && _b !== void 0 ? _b : 0;\r\n        }\r\n        minimalFitness = Math.abs(minimalFitness);\r\n        totalFitness += minimalFitness * population.length;\r\n        var random = Utils_1.randDouble(0, totalFitness);\r\n        var value = 0;\r\n        for (var _d = 0, population_2 = population; _d < population_2.length; _d++) {\r\n            var genome = population_2[_d];\r\n            value += ((_c = genome.score) !== null && _c !== void 0 ? _c : 0) + minimalFitness;\r\n            if (random < value) {\r\n                return genome;\r\n            }\r\n        }\r\n        return Utils_1.pickRandom(population);\r\n    };\r\n    return FitnessProportionateSelection;\r\n}(Selection));\r\nexports.FitnessProportionateSelection = FitnessProportionateSelection;\r\n/**\r\n * Power selection\r\n *\r\n * A random decimal value between 0 and 1 will be generated (e.g. 0.5) then this value will get an exponential value (power, default is 4). So 0.5**4 = 0.0625. This is converted into an index for the array of the current population, sorted from fittest to worst.\r\n */\r\nvar PowerSelection = /** @class */ (function (_super) {\r\n    __extends(PowerSelection, _super);\r\n    /**\r\n     * Constructs a power selection.\r\n     * @param power Probability of picking better networks.\r\n     */\r\n    function PowerSelection(power) {\r\n        if (power === void 0) { power = 4; }\r\n        var _this = _super.call(this) || this;\r\n        _this.power = power;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Selects a genome from the population according to the Selection method.\r\n     *\r\n     * @param population the pool of networks\r\n     * @time O(1)\r\n     * @returns the selected genome\r\n     */\r\n    PowerSelection.prototype.select = function (population) {\r\n        return population[Math.floor(Math.pow(Math.random(), this.power) * population.length)];\r\n    };\r\n    return PowerSelection;\r\n}(Selection));\r\nexports.PowerSelection = PowerSelection;\r\n/**\r\n * Tournament selection\r\n *\r\n * [Tournament Selection on Wikipedia](https://en.wikipedia.org/wiki/Tournament_selection)\r\n */\r\nvar TournamentSelection = /** @class */ (function (_super) {\r\n    __extends(TournamentSelection, _super);\r\n    /**\r\n     * Constructs a tournament selection.\r\n     * @param size the size of a tournament\r\n     * @param probability Selects the best individual (when probability = 1).\r\n     */\r\n    function TournamentSelection(size, probability) {\r\n        if (size === void 0) { size = 5; }\r\n        if (probability === void 0) { probability = 0.5; }\r\n        var _this = _super.call(this) || this;\r\n        _this.size = size;\r\n        _this.probability = probability;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Selects a genome from the population according to the Selection method.\r\n     *\r\n     * @param population the pool of networks\r\n     * @time O(n)\r\n     * @returns the selected genome\r\n     */\r\n    TournamentSelection.prototype.select = function (population) {\r\n        if (this.size > population.length) {\r\n            throw new Error(\"Your tournament size should be lower than the population size, please change methods.selection.TOURNAMENT.size\");\r\n        }\r\n        // Create a tournament\r\n        var individuals = [];\r\n        for (var i = 0; i < this.size; i++) {\r\n            individuals.push(Utils_1.pickRandom(population));\r\n        }\r\n        // Sort the tournament individuals by score\r\n        individuals.sort(function (a, b) {\r\n            return b.score === undefined || a.score === undefined ? 0 : b.score - a.score;\r\n        });\r\n        // Select an individual\r\n        for (var i = 0; i < this.size; i++) {\r\n            if (Math.random() < this.probability || i === this.size - 1) {\r\n                return individuals[i];\r\n            }\r\n        }\r\n        return Utils_1.pickRandom(population);\r\n    };\r\n    return TournamentSelection;\r\n}(Selection));\r\nexports.TournamentSelection = TournamentSelection;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NEAT = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar Network_1 = require(\"./architecture/Network\");\r\nvar Species_1 = require(\"./architecture/Species\");\r\nvar Mutation_1 = require(\"./methods/Mutation\");\r\nvar Selection_1 = require(\"./methods/Selection\");\r\nvar Utils_1 = require(\"./utils/Utils\");\r\n/**\r\n * Runs the NEAT algorithm on group of neural networks.\r\n *\r\n * @constructs Neat\r\n */\r\nvar NEAT = /** @class */ (function () {\r\n    /**\r\n     * Constructs a NEAT object.\r\n     *\r\n     * @param options\r\n     * @time O(n)\r\n     */\r\n    function NEAT(options) {\r\n        if (!options.fitnessFunction) {\r\n            throw new ReferenceError(\"No fitness function given!\");\r\n        }\r\n        this.dataset = options.dataset;\r\n        if (options.dataset && options.dataset.length > 0) {\r\n            this.input = options.dataset[0].input.length;\r\n            this.output = options.dataset[0].output.length;\r\n        }\r\n        else {\r\n            this.input = Utils_1.getOrDefault(options.input, 0);\r\n            this.output = Utils_1.getOrDefault(options.output, 0);\r\n        }\r\n        this.generation = Utils_1.getOrDefault(options.generation, 0);\r\n        this.equal = Utils_1.getOrDefault(options.equal, true);\r\n        this.clear = Utils_1.getOrDefault(options.clear, false);\r\n        this.populationSize = Utils_1.getOrDefault(options.populationSize, 50);\r\n        this.mutationRate = Utils_1.getOrDefault(options.mutationRate, 0.6);\r\n        this.mutationAmount = Utils_1.getOrDefault(options.mutationAmount, 5);\r\n        this.fitnessFunction = options.fitnessFunction;\r\n        this.selection = Utils_1.getOrDefault(options.selection, new Selection_1.FitnessProportionateSelection());\r\n        this.mutations = Utils_1.getOrDefault(options.mutations, Mutation_1.FEEDFORWARD_MUTATIONS);\r\n        this.activations = Utils_1.getOrDefault(options.activations, Object.values(src_1.ALL_ACTIVATIONS));\r\n        this.template = Utils_1.getOrDefault(options.template, new Network_1.Network(this.input, this.output));\r\n        this.maxNodes = Utils_1.getOrDefault(options.maxNodes, Infinity);\r\n        this.maxConnections = Utils_1.getOrDefault(options.maxConnections, Infinity);\r\n        this.maxGates = Utils_1.getOrDefault(options.maxGates, Infinity);\r\n        this.population = [];\r\n        this.species = new Set();\r\n        for (var i = 0; i < this.populationSize; i++) {\r\n            this.population.push(this.template.copy());\r\n        }\r\n    }\r\n    /**\r\n     * Mutate a network with a random mutation from the allowed array.\r\n     *\r\n     * @param network The network which will be mutated.\r\n     * @time O(n&sup3;)\r\n     */\r\n    NEAT.prototype.mutateRandom = function (network) {\r\n        var _this = this;\r\n        var allowed = this.mutations.filter(function (method) {\r\n            return (method.constructor.name !== Mutation_1.AddNodeMutation.constructor.name || network.nodes.length < _this.maxNodes ||\r\n                method.constructor.name !== Mutation_1.AddConnectionMutation.constructor.name || network.connections.size < _this.maxConnections ||\r\n                method.constructor.name !== Mutation_1.AddGateMutation.constructor.name || network.gates.size < _this.maxGates);\r\n        });\r\n        network.mutate(Utils_1.pickRandom(allowed), { allowedActivations: this.activations });\r\n    };\r\n    /**\r\n     * Evaluates, selects, breeds and mutates population\r\n     *\r\n     * @time O(time for fitness function + n * time for adjust genome + n&sup5;)\r\n     * @returns {Network} Fittest network\r\n     */\r\n    NEAT.prototype.evolve = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var fittest;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.genSpecies();\r\n                        if (!(this.population[this.population.length - 1].score === undefined)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.evaluate()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        this.species.forEach(function (species) { return species.evaluateScore(); });\r\n                        this.sort();\r\n                        this.kill(1 - NEAT.SURVIVORS);\r\n                        this.removeExtinctSpecies();\r\n                        this.reproduce();\r\n                        this.mutate();\r\n                        // evaluate the population\r\n                        return [4 /*yield*/, this.evaluate()];\r\n                    case 3:\r\n                        // evaluate the population\r\n                        _a.sent();\r\n                        // Sort in order of fitness (fittest first)\r\n                        this.sort();\r\n                        fittest = this.population[0].copy();\r\n                        fittest.score = this.population[0].score;\r\n                        // Reset the scores\r\n                        this.population.forEach(function (genome) { return genome.score = undefined; });\r\n                        this.generation++;\r\n                        return [2 /*return*/, fittest];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Mutates the given (or current) population\r\n     *\r\n     * @param {Mutation} [method] A mutation method to mutate the population with. When not specified will pick a random mutation from the set allowed mutations.\r\n     * @time O(n&sup5;)\r\n     */\r\n    NEAT.prototype.mutate = function (method) {\r\n        var _this = this;\r\n        // Elitist genomes should not be included\r\n        this.population\r\n            .filter(function () { return Math.random() <= _this.mutationRate; })\r\n            .forEach(function (genome) {\r\n            for (var i = 0; i < _this.mutationAmount; i++) {\r\n                if (method) {\r\n                    genome.mutate(method);\r\n                }\r\n                else {\r\n                    _this.mutateRandom(genome);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Evaluates the current population, basically sets their `.score` property\r\n     *\r\n     * @time O(n&sup3; + time for fitness function)\r\n     * @return {Network} Fittest Network\r\n     */\r\n    NEAT.prototype.evaluate = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.clear) {\r\n                            this.population.forEach(function (genome) { return genome.clear(); });\r\n                        }\r\n                        return [4 /*yield*/, this.fitnessFunction(this.population, this.dataset)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        // Sort the population in order of fitness\r\n                        this.sort();\r\n                        return [2 /*return*/, this.population[0]];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Sorts the population by score (descending)\r\n     * @time O(n)\r\n     * @todo implement a quicksort algorithm in utils\r\n     */\r\n    NEAT.prototype.sort = function () {\r\n        this.population.sort(function (a, b) {\r\n            return a.score === undefined || b.score === undefined ? 0 : b.score - a.score;\r\n        });\r\n    };\r\n    /**\r\n     * Returns the fittest genome of the current population\r\n     *\r\n     * @time O(n + time for fitness function)\r\n     * @returns {Network} Current population's fittest genome\r\n     */\r\n    NEAT.prototype.getFittest = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(this.population[this.population.length - 1].score === undefined)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.evaluate()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        this.sort();\r\n                        return [2 /*return*/, this.population[0]];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Returns the average fitness of the current population\r\n     *\r\n     * @time O(n + time for fitness function)\r\n     * @returns {number} Average fitness of the current population\r\n     */\r\n    NEAT.prototype.getAverage = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var score;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(this.population[this.population.length - 1].score === undefined)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.evaluate()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        score = 0;\r\n                        this.population\r\n                            .map(function (genome) { return genome.score; })\r\n                            .forEach(function (val) { return score += val !== null && val !== void 0 ? val : 0; });\r\n                        return [2 /*return*/, score / this.population.length];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Replace the whole population with the new genomes\r\n     * @param genomes the genomes which replace the population\r\n     * @time O(1)\r\n     */\r\n    NEAT.prototype.replacePopulation = function (genomes) {\r\n        this.population = genomes;\r\n        this.populationSize = genomes.length;\r\n    };\r\n    /**\r\n     * Reporduce the population, by replacing the killed networks\r\n     * @param killedNetworks\r\n     * @private\r\n     */\r\n    NEAT.prototype.reproduce = function () {\r\n        var speciesArr = Array.from(this.species);\r\n        for (var i = 0; i < this.population.length; i++) {\r\n            if (this.population[i].species === null) {\r\n                var selectedSpecies = this.selection.select(speciesArr);\r\n                this.population[i] = selectedSpecies.breed();\r\n                selectedSpecies.forcePut(this.population[i]);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Remove empty species\r\n     * @private\r\n     */\r\n    NEAT.prototype.removeExtinctSpecies = function () {\r\n        for (var _i = 0, _a = Array.from(this.species); _i < _a.length; _i++) {\r\n            var species = _a[_i];\r\n            if (species.size() <= 1) {\r\n                species.members.forEach(function (member) { return member.species = null; });\r\n                this.species.delete(species);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Kill bad networks\r\n     * @param killRate\r\n     * @private\r\n     */\r\n    NEAT.prototype.kill = function (killRate) {\r\n        this.species.forEach(function (species) { return species.kill(killRate); });\r\n    };\r\n    /**\r\n     * Generate species\r\n     * @private\r\n     */\r\n    NEAT.prototype.genSpecies = function () {\r\n        var _this = this;\r\n        this.species.forEach(function (species) { return species.reset(); });\r\n        this.population.filter(function (genome) { return genome.species === null; }).forEach(function (genome) {\r\n            var found = false;\r\n            for (var _i = 0, _a = Array.from(_this.species); _i < _a.length; _i++) {\r\n                var species = _a[_i];\r\n                if (species.put(genome)) {\r\n                    found = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!found) {\r\n                _this.species.add(new Species_1.Species(genome));\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * How big could the distance be between two networks in a species\r\n     */\r\n    NEAT.SPECIES_DISTANCE_THRESHOLD = 3;\r\n    NEAT.C1 = 1;\r\n    NEAT.C2 = 1;\r\n    NEAT.C3 = 1;\r\n    NEAT.SURVIVORS = 0.8;\r\n    return NEAT;\r\n}());\r\nexports.NEAT = NEAT;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Network = void 0;\r\nvar os_1 = __importDefault(require(\"os\"));\r\nvar threads_1 = require(\"threads\");\r\nvar dist_1 = require(\"threads/dist\");\r\nrequire(\"threads/register\");\r\nvar NodeType_1 = require(\"../enums/NodeType\");\r\nvar Loss_1 = require(\"../methods/Loss\");\r\nvar Mutation_1 = require(\"../methods/Mutation\");\r\nvar Rate_1 = require(\"../methods/Rate\");\r\nvar NEAT_1 = require(\"../NEAT\");\r\nvar Utils_1 = require(\"../utils/Utils\");\r\nvar Connection_1 = require(\"./Connection\");\r\nvar Node_1 = require(\"./Node\");\r\n/**\r\n * Create a neural network\r\n *\r\n * Networks are easy to create, all you need to specify is an `input` and an `output` size.\r\n *\r\n * @constructs Network\r\n */\r\nvar Network = /** @class */ (function () {\r\n    function Network(inputSize, outputSize) {\r\n        this.inputSize = inputSize;\r\n        this.outputSize = outputSize;\r\n        this.nodes = [];\r\n        this.connections = new Set();\r\n        this.gates = new Set();\r\n        this.score = undefined;\r\n        this.species = null;\r\n        // Create input and output nodes\r\n        for (var i = 0; i < inputSize; i++) {\r\n            this.nodes.push(new Node_1.Node(NodeType_1.NodeType.INPUT));\r\n        }\r\n        for (var i = 0; i < outputSize; i++) {\r\n            this.nodes.push(new Node_1.Node(NodeType_1.NodeType.OUTPUT));\r\n        }\r\n        // Connect input and output nodes\r\n        for (var i = 0; i < this.inputSize; i++) {\r\n            for (var j = this.inputSize; j < this.outputSize + this.inputSize; j++) {\r\n                // https://stats.stackexchange.com/a/248040/147931\r\n                var weight = (Math.random() - 0.5) * this.inputSize * Math.sqrt(2 / this.inputSize);\r\n                this.connect(this.nodes[i], this.nodes[j], weight);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Convert a json object to a network\r\n     *\r\n     * @param {{input:{number},output:{number},dropout:{number},nodes:Array<object>,connections:Array<object>}} json A network represented as a json object\r\n     * @time O(n&sup2;)\r\n     *\r\n     * @returns {Network} Network A reconstructed network\r\n     */\r\n    Network.fromJSON = function (json) {\r\n        var network = new Network(json.inputSize, json.outputSize);\r\n        network.nodes = [];\r\n        network.connections.clear();\r\n        json.nodes\r\n            .map(function (nodeJSON) { return new Node_1.Node().fromJSON(nodeJSON); })\r\n            .forEach(function (node) { return network.nodes[node.index] = node; });\r\n        json.connections.forEach(function (jsonConnection) {\r\n            var connection = network.connect(network.nodes[jsonConnection.fromIndex], network.nodes[jsonConnection.toIndex], jsonConnection.weight);\r\n            if (jsonConnection.gateNodeIndex != null) {\r\n                network.addGate(network.nodes[jsonConnection.gateNodeIndex], connection);\r\n            }\r\n        });\r\n        return network;\r\n    };\r\n    /**\r\n     * Create an offspring from two parent networks.\r\n     *\r\n     * Networks are not required to have the same size, however input and output size should be the same!\r\n     *\r\n     * @todo Add custom [crossover](crossover) method customization\r\n     *\r\n     * @param {Network} network1 First parent network\r\n     * @param {Network} network2 Second parent network\r\n     * @param {boolean} [equal] Flag to indicate equally fit Networks\r\n     * @time O(n&sup2;)\r\n     *\r\n     * @returns {Network} New network created from mixing parent networks\r\n     */\r\n    Network.crossOver = function (network1, network2, equal) {\r\n        var _a, _b;\r\n        if (equal === void 0) { equal = false; }\r\n        if (network1.inputSize !== network2.inputSize || network1.outputSize !== network2.outputSize) {\r\n            throw new Error(\"Networks don`t have the same input/output size!\");\r\n        }\r\n        // Initialise offspring\r\n        var offspring = new Network(network1.inputSize, network1.outputSize);\r\n        offspring.connections.clear(); // clear\r\n        offspring.nodes = []; // clear\r\n        // Save scores and create a copy\r\n        var score1 = (_a = network1.score) !== null && _a !== void 0 ? _a : 0;\r\n        var score2 = (_b = network2.score) !== null && _b !== void 0 ? _b : 0;\r\n        // Determine offspring node size\r\n        var offspringSize;\r\n        if (equal || score1 === score2) {\r\n            var max = Math.max(network1.nodes.length, network2.nodes.length);\r\n            var min = Math.min(network1.nodes.length, network2.nodes.length);\r\n            offspringSize = Utils_1.randInt(min, max + 1); // [min,max]\r\n        }\r\n        else if (score1 > score2) {\r\n            offspringSize = network1.nodes.length;\r\n        }\r\n        else {\r\n            offspringSize = network2.nodes.length;\r\n        }\r\n        var inputSize = network1.inputSize;\r\n        var outputSize = network1.outputSize;\r\n        // set node indices\r\n        for (var i = 0; i < network1.nodes.length; i++) {\r\n            network1.nodes[i].index = i;\r\n        }\r\n        // set node indices\r\n        for (var i = 0; i < network2.nodes.length; i++) {\r\n            network2.nodes[i].index = i;\r\n        }\r\n        // Assign nodes from parents to offspring\r\n        for (var i = 0; i < offspringSize; i++) {\r\n            var chosenNode = void 0;\r\n            var chosenNodeType = null;\r\n            // decide what type of node is needed first check for input and output nodes and fill up with hidden nodes\r\n            if (i < inputSize) { // pick input node\r\n                chosenNodeType = NodeType_1.NodeType.INPUT;\r\n                var sourceNetwork = Utils_1.randBoolean() ? network1 : network2;\r\n                var inputNumber = -1;\r\n                var j = -1;\r\n                while (inputNumber < i) {\r\n                    if (j++ >= sourceNetwork.nodes.length) {\r\n                        throw RangeError('something is wrong with the size of the input');\r\n                    }\r\n                    if (sourceNetwork.nodes[j].isInputNode()) {\r\n                        inputNumber++;\r\n                    }\r\n                }\r\n                chosenNode = sourceNetwork.nodes[j];\r\n            }\r\n            else if (i < inputSize + outputSize) { // pick output node\r\n                chosenNodeType = NodeType_1.NodeType.OUTPUT;\r\n                var sourceNetwork = Utils_1.randBoolean() ? network1 : network2;\r\n                var outputNumber = -1;\r\n                var j = -1;\r\n                while (outputNumber < i - inputSize) {\r\n                    j++;\r\n                    if (j >= sourceNetwork.nodes.length) {\r\n                        throw RangeError('something is wrong with the size of the output');\r\n                    }\r\n                    if (sourceNetwork.nodes[j].isOutputNode()) {\r\n                        outputNumber++;\r\n                    }\r\n                }\r\n                chosenNode = sourceNetwork.nodes[j];\r\n            }\r\n            else { // pick hidden node\r\n                chosenNodeType = NodeType_1.NodeType.HIDDEN;\r\n                var sourceNetwork = void 0;\r\n                if (i >= network1.nodes.length) {\r\n                    sourceNetwork = network2;\r\n                }\r\n                else if (i >= network2.nodes.length) {\r\n                    sourceNetwork = network1;\r\n                }\r\n                else {\r\n                    sourceNetwork = Utils_1.randBoolean() ? network1 : network2;\r\n                }\r\n                chosenNode = Utils_1.pickRandom(sourceNetwork.nodes);\r\n            }\r\n            var newNode = new Node_1.Node(chosenNodeType);\r\n            newNode.bias = chosenNode.bias;\r\n            newNode.squash = chosenNode.squash;\r\n            offspring.nodes.push(newNode);\r\n        }\r\n        // Create arrays of connection genes\r\n        var n1connections = [];\r\n        var n2connections = [];\r\n        // Add the connections of network 1\r\n        network1.connections.forEach(function (connection) {\r\n            n1connections[Connection_1.Connection.innovationID(connection.from.index, connection.to.index)] = connection.toJSON();\r\n        });\r\n        // Add the connections of network 2\r\n        network2.connections.forEach(function (connection) {\r\n            n2connections[Connection_1.Connection.innovationID(connection.from.index, connection.to.index)] = connection.toJSON();\r\n        });\r\n        // Split common conn genes from disjoint or excess conn genes\r\n        var connections = [];\r\n        var keys1 = Object.keys(n1connections);\r\n        var keys2 = Object.keys(n2connections);\r\n        for (var i = keys1.length - 1; i >= 0; i--) {\r\n            if (n2connections[parseInt(keys1[i])] !== undefined) {\r\n                connections.push(Utils_1.randBoolean() ? n1connections[parseInt(keys1[i])] : n2connections[parseInt(keys1[i])]);\r\n                n2connections[parseInt(keys1[i])] = undefined;\r\n            }\r\n            else if (score1 >= score2 || equal) {\r\n                connections.push(n1connections[parseInt(keys1[i])]);\r\n            }\r\n        }\r\n        // Excess/disjoint gene\r\n        if (score2 >= score1 || equal) {\r\n            keys2\r\n                .map(function (key) { return parseInt(key); }) // convert to numbers\r\n                .map(function (key) { return n2connections[key]; }) // get the connection\r\n                .filter(function (conn) { return conn !== undefined; }) // filter out undefined connections\r\n                .forEach(function (conn) { return connections.push(conn); }); // add the filtered connections\r\n        }\r\n        // Add common conn genes uniformly\r\n        connections.forEach(function (connectionJSON) {\r\n            if (connectionJSON !== undefined && connectionJSON.toIndex < offspringSize && connectionJSON.fromIndex < offspringSize) {\r\n                var from = offspring.nodes[connectionJSON.fromIndex];\r\n                var to = offspring.nodes[connectionJSON.toIndex];\r\n                var connection = offspring.connect(from, to, connectionJSON.weight);\r\n                if (connectionJSON.gateNodeIndex !== null && connectionJSON.gateNodeIndex < offspringSize) {\r\n                    offspring.addGate(offspring.nodes[connectionJSON.gateNodeIndex], connection);\r\n                }\r\n            }\r\n        });\r\n        return offspring;\r\n    };\r\n    /**\r\n     * Returns a copy of Network.\r\n     * @time O(n&sup2;)\r\n     * @returns {Network} Returns an identical network\r\n     */\r\n    Network.prototype.copy = function () {\r\n        return Network.fromJSON(this.toJSON());\r\n    };\r\n    /**\r\n     * Connects a Node to another Node or Group in the network\r\n     *\r\n     * @param {Node} from The source Node\r\n     * @param {Node} to The destination Node or Group\r\n     * @param {number} [weight=0] An initial weight for the connections to be formed\r\n     * @time O(n)\r\n     *\r\n     * @returns {Connection[]} An array of the formed connections\r\n     */\r\n    Network.prototype.connect = function (from, to, weight) {\r\n        if (weight === void 0) { weight = 0; }\r\n        var connection = from.connect(to, weight); // run node-level connect\r\n        this.connections.add(connection); // add it to the array\r\n        return connection;\r\n    };\r\n    /**\r\n     * Activates the network\r\n     *\r\n     * It will activate all the nodes in activation order and produce an output.\r\n     *\r\n     * @param {number[]} [input] Input values to activate nodes with\r\n     * @param options\r\n     * @time O(n&sup3;)\r\n     * @returns {number[]} Squashed output values\r\n     */\r\n    Network.prototype.activate = function (input, options) {\r\n        if (options === void 0) { options = {}; }\r\n        if (input.length !== this.inputSize) {\r\n            throw new RangeError(\"Input size of dataset is different to network input size!\");\r\n        }\r\n        // get default value if no value is given\r\n        options.dropoutRate = Utils_1.getOrDefault(options.dropoutRate, 0);\r\n        options.trace = Utils_1.getOrDefault(options.trace, true);\r\n        this.nodes\r\n            .filter(function (node) { return node.isInputNode(); }) // only input nodes\r\n            .forEach(function (node, index) { return node.activate(input[index], options.trace); }); // activate them with the input\r\n        this.nodes\r\n            .filter(function (node) { return node.isHiddenNode(); }) // only hidden nodes\r\n            .forEach(function (node) {\r\n            if (options.dropoutRate) {\r\n                node.mask = Math.random() >= options.dropoutRate ? 1 : 0;\r\n            }\r\n            node.activate(undefined, options.trace); // activate them\r\n        });\r\n        return this.nodes\r\n            .filter(function (node) { return node.isOutputNode(); }) // only output nodes\r\n            .map(function (node) { return node.activate(undefined, options.trace); }); // map them to there activation value will give the network's output\r\n    };\r\n    /**\r\n     * Backpropagate the network\r\n     *\r\n     * This function allows you to teach the network. If you want to do more complex training, use the `network.train()` function.\r\n     *\r\n     * @param {number[]} target Ideal values of the previous activate. Will use the difference to improve the weights\r\n     * @param options More option for propagation\r\n     * @time O(n&sup3;)\r\n     */\r\n    Network.prototype.propagate = function (target, options) {\r\n        if (options === void 0) { options = {}; }\r\n        // get default value if value isn't given\r\n        options.rate = Utils_1.getOrDefault(options.rate, 0.3);\r\n        options.momentum = Utils_1.getOrDefault(options.momentum, 0);\r\n        options.update = Utils_1.getOrDefault(options.update, false);\r\n        if (target.length !== this.outputSize) {\r\n            throw new Error(\"Output target length should match network output length\");\r\n        }\r\n        // Backpropagation: output -> hidden -> input\r\n        // propagate through the output nodes\r\n        this.nodes\r\n            .filter(function (node) { return node.isOutputNode(); }) // only output nodes\r\n            .forEach(function (node, index) { return node.propagate(target[index], options); }); // propagate\r\n        // propagate backwards through the hidden nodes\r\n        for (var i = this.nodes.length - 1; i >= 0; i--) {\r\n            if (this.nodes[i].isHiddenNode()) { // only hidden nodes\r\n                this.nodes[i].propagate(undefined, options);\r\n            }\r\n        }\r\n        // propagate through the input nodes\r\n        this.nodes\r\n            .filter(function (node) { return node.isInputNode(); }) // only input nodes\r\n            .forEach(function (node) { return node.propagate(undefined, options); }); // propagate\r\n    };\r\n    /**\r\n     * Clear the context of the network\r\n     * @time O(n&sup3;)\r\n     */\r\n    Network.prototype.clear = function () {\r\n        this.nodes.forEach(function (node) { return node.clear(); });\r\n    };\r\n    /**\r\n     * Removes the connection of the `from` node to the `to` node\r\n     *\r\n     * @param {Node} from Source node\r\n     * @param {Node} to Destination node\r\n     * @time O(n)\r\n     */\r\n    Network.prototype.disconnect = function (from, to) {\r\n        var _this = this;\r\n        // remove the connection network-level\r\n        this.connections.forEach(function (conn) {\r\n            if (conn.from === from && conn.to === to) {\r\n                if (conn.gateNode !== null) {\r\n                    _this.removeGate(conn); // remove possible gate\r\n                }\r\n                _this.connections.delete(conn); // remove connection from array\r\n            }\r\n        });\r\n        // disconnect node-level\r\n        return from.disconnect(to);\r\n    };\r\n    /**\r\n     * Makes a network node gate a connection\r\n     *\r\n     * @param {Node} node Gating node\r\n     * @param {Connection} connection Connection to gate with node\r\n     * @time O(n)\r\n     */\r\n    Network.prototype.addGate = function (node, connection) {\r\n        if (this.nodes.indexOf(node) === -1) {\r\n            throw new ReferenceError(\"This node is not part of the network!\");\r\n        }\r\n        else if (connection.gateNode != null) {\r\n            return;\r\n        }\r\n        node.addGate(connection);\r\n        this.gates.add(connection);\r\n    };\r\n    /**\r\n     * Remove the gate of a connection.\r\n     *\r\n     * @param {Connection} connection Connection to remove gate from\r\n     * @time O(1)\r\n     */\r\n    Network.prototype.removeGate = function (connection) {\r\n        if (!this.gates.has(connection)) {\r\n            throw new Error(\"This connection is not gated!\");\r\n        }\r\n        this.gates.delete(connection);\r\n        if (connection.gateNode != null) {\r\n            connection.gateNode.removeGate(connection);\r\n        }\r\n    };\r\n    /**\r\n     * Removes a node from a network, all its connections will be redirected. If it gates a connection, the gate will be removed.\r\n     *\r\n     * @param {Node} node Node to remove from the network\r\n     * @param keepGates\r\n     * @time O(&sup3;)\r\n     */\r\n    Network.prototype.removeNode = function (node, keepGates) {\r\n        var _this = this;\r\n        if (keepGates === void 0) { keepGates = new Mutation_1.SubNodeMutation().keepGates; }\r\n        if (!this.nodes.includes(node)) {\r\n            throw new ReferenceError(\"This node does not exist in the network!\");\r\n        }\r\n        this.disconnect(node, node); // remove self connection\r\n        var inputs = []; // keep track\r\n        var gates = []; // keep track\r\n        var outputs = []; // keep track\r\n        var connections = []; // keep track\r\n        // read all inputs from node and keep track of the nodes that gate the incoming connection\r\n        node.incoming.forEach(function (connection) {\r\n            if (keepGates && connection.gateNode !== null && connection.gateNode !== node) {\r\n                gates.push(connection.gateNode);\r\n            }\r\n            inputs.push(connection.from);\r\n            _this.disconnect(connection.from, node);\r\n        });\r\n        // read all outputs from node and keep track of the nodes that gate the outgoing connection\r\n        node.outgoing.forEach(function (connection) {\r\n            if (keepGates && connection.gateNode !== null && connection.gateNode !== node) {\r\n                gates.push(connection.gateNode);\r\n            }\r\n            outputs.push(connection.to);\r\n            _this.disconnect(node, connection.to);\r\n        });\r\n        // add all connections the node has\r\n        inputs.forEach(function (input) {\r\n            outputs.forEach(function (output) {\r\n                if (!input.isProjectingTo(output)) {\r\n                    connections.push(_this.connect(input, output));\r\n                }\r\n            });\r\n        });\r\n        // as long as there are gates and connections\r\n        while (gates.length > 0 && connections.length > 0) {\r\n            var gate = gates.shift(); // take a gate node and remove it from the array\r\n            if (gate === undefined) {\r\n                continue;\r\n            }\r\n            var connection = Utils_1.pickRandom(connections); // take a random connection\r\n            this.addGate(gate, connection); // gate the connection with the gate node\r\n            Utils_1.removeFromArray(connections, connection); // remove the connection from the array\r\n        }\r\n        // remove every gate the node has\r\n        node.gated.forEach(this.removeGate);\r\n        Utils_1.removeFromArray(this.nodes, node); // remove the node from the nodes array\r\n    };\r\n    /**\r\n     * Mutates the network with the given method.\r\n     *\r\n     * @param {Mutation} method [Mutation method](mutation)\r\n     * @param {object} options\r\n     * @param {number} [options.maxNodes]\r\n     * @param {number} [options.maxConnections]\r\n     * @param {number} [options.maxGates] Maximum amount of Gates a network can grow to\r\n     * @time O(n&sup3;)\r\n     */\r\n    Network.prototype.mutate = function (method, options) {\r\n        method.mutate(this, options);\r\n    };\r\n    /**\r\n     * Selects a random mutation method and returns a mutated copy of the network. Warning! Mutates network directly.\r\n     *\r\n     * @param {Mutation[]} [allowedMethods=methods.mutation.ALL] An array of [Mutation methods](mutation) to automatically pick from\r\n     * @param {object} options\r\n     * @param {number} [options.maxNodes] Maximum amount of [Nodes](node) a network can grow to\r\n     * @param {number} [options.maxConnections] Maximum amount of [Connections](connection) a network can grow to\r\n     * @param {number} [options.maxGates] Maximum amount of Gates a network can grow to\r\n     * @time O(n&sup3;)\r\n     */\r\n    Network.prototype.mutateRandom = function (allowedMethods, options) {\r\n        if (allowedMethods === void 0) { allowedMethods = Mutation_1.ALL_MUTATIONS; }\r\n        if (options === void 0) { options = {}; }\r\n        if (allowedMethods.length === 0) {\r\n            return;\r\n        }\r\n        // mutate the network with a random allowed mutation\r\n        this.mutate(Utils_1.pickRandom(allowedMethods), options);\r\n    };\r\n    /**\r\n     * Train the given data to this network\r\n     *\r\n     * @param {TrainOptions} options Options used to train network\r\n     * @time O(n&sup5;)\r\n     *\r\n     * @returns {{error:{number},iterations:{number},time:{number}}} A summary object of the network's performance\r\n     */\r\n    Network.prototype.train = function (options) {\r\n        var _a;\r\n        if (!options.dataset || options.dataset[0].input.length !== this.inputSize || options.dataset[0].output.length !== this.outputSize) {\r\n            throw new Error(\"Dataset input/output size should be same as network input/output size!\");\r\n        }\r\n        // Use the default values, if no value is given\r\n        options.iterations = Utils_1.getOrDefault(options.iterations, -1);\r\n        options.error = Utils_1.getOrDefault(options.error, -1);\r\n        options.loss = Utils_1.getOrDefault(options.loss, Loss_1.MSELoss);\r\n        options.dropout = Utils_1.getOrDefault(options.dropout, 0);\r\n        options.momentum = Utils_1.getOrDefault(options.momentum, 0);\r\n        options.batchSize = Math.min(options.dataset.length, Utils_1.getOrDefault(options.batchSize, options.dataset.length));\r\n        var baseRate = Utils_1.getOrDefault(options.rate, 0.3);\r\n        options.ratePolicy = Utils_1.getOrDefault(options.ratePolicy, new Rate_1.FixedRate(baseRate));\r\n        options.log = Utils_1.getOrDefault(options.log, NaN);\r\n        var start = Date.now();\r\n        if (options.iterations <= 0 && options.error <= 0) {\r\n            throw new Error(\"At least one of the following options must be specified: error, iterations\");\r\n        }\r\n        // Split into trainingSet and testSet if cross validation is enabled\r\n        var trainingSetSize;\r\n        var trainingSet;\r\n        var testSet;\r\n        if (options.crossValidateTestSize && options.crossValidateTestSize > 0) {\r\n            trainingSetSize = Math.ceil((1 - options.crossValidateTestSize) * options.dataset.length);\r\n            trainingSet = options.dataset.slice(0, trainingSetSize);\r\n            testSet = options.dataset.slice(trainingSetSize);\r\n        }\r\n        else {\r\n            trainingSet = options.dataset;\r\n            testSet = [];\r\n        }\r\n        var currentTrainingRate;\r\n        var iterationCount = 0;\r\n        var error = 1;\r\n        // train until the target error is reached or the target iterations are reached\r\n        while (error > options.error && (options.iterations <= 0 || iterationCount < options.iterations)) {\r\n            iterationCount++;\r\n            // update the rate according to the rate policy\r\n            currentTrainingRate = options.ratePolicy.calc(iterationCount);\r\n            // train a single epoch\r\n            var trainError = this.trainEpoch(__assign(__assign({}, options), { dataset: trainingSet, trainingRate: currentTrainingRate }));\r\n            if (!Number.isFinite(trainError)) {\r\n                throw new RangeError();\r\n            }\r\n            if (options.clear) {\r\n                this.clear();\r\n            }\r\n            // Run test with the testSet, if cross validation is enabled\r\n            if (options.crossValidateTestSize) {\r\n                error = this.test(testSet, options.loss);\r\n                if (options.clear) {\r\n                    this.clear();\r\n                }\r\n            }\r\n            else {\r\n                error = trainError;\r\n            }\r\n            if ((_a = options.shuffle) !== null && _a !== void 0 ? _a : false) {\r\n                Utils_1.shuffle(options.dataset);\r\n            }\r\n            if (options.log > 0 && iterationCount % options.log === 0) {\r\n                console.log(\"iteration number\", iterationCount, \"error\", error, \"training rate\", currentTrainingRate);\r\n            }\r\n            if (options.schedule && iterationCount % options.schedule.iterations === 0) {\r\n                options.schedule.function(error, iterationCount);\r\n            }\r\n        }\r\n        if (options.clear) {\r\n            this.clear();\r\n        }\r\n        return {\r\n            error: error,\r\n            iterations: iterationCount,\r\n            time: Date.now() - start\r\n        };\r\n    };\r\n    /**\r\n     * Tests a set and returns the error and elapsed time\r\n     *\r\n     * @param {Array<{input:number[],output:number[]}>} dataset A set of input values and ideal output values to test the network against\r\n     * @param {lossType} [loss=MSELoss] The [loss function](https://en.wikipedia.org/wiki/Loss_function) used to determine network error\r\n     * @time O(n&sup4;)\r\n     *\r\n     * @returns {number} A summary object of the network's performance\r\n     */\r\n    Network.prototype.test = function (dataset, loss) {\r\n        if (loss === void 0) { loss = Loss_1.MSELoss; }\r\n        var error = 0;\r\n        for (var _i = 0, dataset_1 = dataset; _i < dataset_1.length; _i++) {\r\n            var entry = dataset_1[_i];\r\n            var input = entry.input;\r\n            var target = entry.output;\r\n            var output = this.activate(input, { trace: false });\r\n            error += loss(target, output);\r\n        }\r\n        return error / dataset.length;\r\n    };\r\n    /**\r\n     * Convert the network to a json object\r\n     *\r\n     * @time O(n)\r\n     * @returns {NetworkJSON} The network represented as a json object\r\n     */\r\n    Network.prototype.toJSON = function () {\r\n        var json = {\r\n            nodes: [],\r\n            connections: [],\r\n            inputSize: this.inputSize,\r\n            outputSize: this.outputSize,\r\n        };\r\n        // set node indices\r\n        for (var i = 0; i < this.nodes.length; i++) {\r\n            this.nodes[i].index = i;\r\n        }\r\n        // convert all nodes to json and add the to the json object\r\n        this.nodes.forEach(function (node) {\r\n            json.nodes.push(node.toJSON());\r\n            if (node.selfConnection.weight !== 0) {\r\n                // if there is a self connection\r\n                // add it to the json object\r\n                json.connections.push(node.selfConnection.toJSON());\r\n            }\r\n        });\r\n        this.connections.forEach(function (conn) {\r\n            json.connections.push(conn.toJSON());\r\n        });\r\n        return json;\r\n    };\r\n    /**\r\n     * Evolves the network to reach a lower error on a dataset using the [NEAT algorithm](http://nn.cs.utexas.edu/downloads/papers/stanley.ec02.pdf)\r\n     *\r\n     * If both `iterations` and `error` options are unset, evolve will default to `iterations` as an end condition.\r\n     *\r\n     * @param {object} [options] Configuration options\r\n     * @time O(n * time for fitness function + n&sup2; * time for adjust genome + n&sup6;)\r\n     *\r\n     * @returns {{error:{number},iterations:{number},time:{number}}} A summary object of the network's performance. <br /> Properties include: `error` - error of the best genome, `iterations` - generations used to evolve networks, `time` - clock time elapsed while evolving\r\n     */\r\n    Network.prototype.evolve = function (options) {\r\n        var _a, _b, _c, _d, _e;\r\n        if (options === void 0) { options = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var targetError, start, workerPool, serializedDataSet_1, lossIndex_1, neat, error, bestFitness, bestGenome, fittest;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        if (!options.fitnessFunction && options.dataset && (options.dataset[0].input.length !== this.inputSize || options.dataset[0].output.length !== this.outputSize)) {\r\n                            throw new Error(\"Dataset input/output size should be same as network input/output size!\");\r\n                        }\r\n                        targetError = 0;\r\n                        if (typeof options.iterations === \"undefined\" && typeof options.error === \"undefined\") {\r\n                            options.iterations = 1000;\r\n                            targetError = 0.05;\r\n                        }\r\n                        else if (options.iterations) {\r\n                            targetError = -1; // run until iterations\r\n                        }\r\n                        else if (options.error) {\r\n                            targetError = options.error;\r\n                            options.iterations = 0; // run until error\r\n                        }\r\n                        // set options to default if necessary\r\n                        options.loss = Utils_1.getOrDefault(options.loss, Loss_1.MSELoss);\r\n                        options.maxNodes = Utils_1.getOrDefault(options.maxNodes, Infinity);\r\n                        options.maxConnections = Utils_1.getOrDefault(options.maxConnections, Infinity);\r\n                        options.maxGates = Utils_1.getOrDefault(options.maxGates, Infinity);\r\n                        options.input = this.inputSize;\r\n                        options.output = this.outputSize;\r\n                        start = Date.now();\r\n                        if (!options.fitnessFunction) {\r\n                            serializedDataSet_1 = JSON.stringify(options.dataset);\r\n                            lossIndex_1 = Object.values(Loss_1.ALL_LOSSES).indexOf((_a = options.loss) !== null && _a !== void 0 ? _a : Loss_1.MSELoss);\r\n                            // init a pool of workers\r\n                            workerPool = dist_1.Pool(function () { return threads_1.spawn(new threads_1.Worker(\"../multithreading/TestWorker\")); }, (_b = options.threads) !== null && _b !== void 0 ? _b : os_1.default.cpus().length);\r\n                            options.fitnessFunction = function (population) {\r\n                                return __awaiter(this, void 0, void 0, function () {\r\n                                    var _loop_1, _i, population_1, genome;\r\n                                    var _this = this;\r\n                                    return __generator(this, function (_a) {\r\n                                        switch (_a.label) {\r\n                                            case 0:\r\n                                                _loop_1 = function (genome) {\r\n                                                    // add a task to the workerPool's queue\r\n                                                    workerPool.queue(function (test) { return __awaiter(_this, void 0, void 0, function () {\r\n                                                        var _a;\r\n                                                        return __generator(this, function (_b) {\r\n                                                            switch (_b.label) {\r\n                                                                case 0:\r\n                                                                    if (genome === undefined) {\r\n                                                                        throw new ReferenceError();\r\n                                                                    }\r\n                                                                    // test the genome\r\n                                                                    _a = genome;\r\n                                                                    return [4 /*yield*/, test(serializedDataSet_1, JSON.stringify(genome.toJSON()), lossIndex_1)];\r\n                                                                case 1:\r\n                                                                    // test the genome\r\n                                                                    _a.score = -(_b.sent());\r\n                                                                    if (!Number.isFinite(genome.score)) {\r\n                                                                        throw new RangeError();\r\n                                                                    }\r\n                                                                    return [2 /*return*/];\r\n                                                            }\r\n                                                        });\r\n                                                    }); });\r\n                                                };\r\n                                                for (_i = 0, population_1 = population; _i < population_1.length; _i++) {\r\n                                                    genome = population_1[_i];\r\n                                                    _loop_1(genome);\r\n                                                }\r\n                                                return [4 /*yield*/, workerPool.completed()];\r\n                                            case 1:\r\n                                                _a.sent(); // wait until every task is done\r\n                                                return [2 /*return*/];\r\n                                        }\r\n                                    });\r\n                                });\r\n                            };\r\n                        }\r\n                        options.template = this; // set this network as template for first generation\r\n                        neat = new NEAT_1.NEAT(options);\r\n                        bestFitness = 0;\r\n                        bestGenome = this;\r\n                        _f.label = 1;\r\n                    case 1: return [4 /*yield*/, neat.evolve()];\r\n                    case 2:\r\n                        fittest = _f.sent();\r\n                        if (!fittest.score) {\r\n                            throw new ReferenceError();\r\n                        }\r\n                        error = fittest.score;\r\n                        if (neat.generation === 1 || fittest.score > bestFitness) {\r\n                            bestFitness = fittest.score;\r\n                            bestGenome = fittest;\r\n                        }\r\n                        if (((_c = options.log) !== null && _c !== void 0 ? _c : 0) > 0 && neat.generation % ((_d = options.log) !== null && _d !== void 0 ? _d : 0) === 0) {\r\n                            console.log(\"iteration\", neat.generation, \"error\", -error);\r\n                        }\r\n                        if (options.schedule && neat.generation % options.schedule.iterations === 0) {\r\n                            options.schedule.function(fittest.score, -error, neat.generation);\r\n                        }\r\n                        _f.label = 3;\r\n                    case 3:\r\n                        if (error < -targetError && (options.iterations === 0 || neat.generation < ((_e = options.iterations) !== null && _e !== void 0 ? _e : 0))) return [3 /*break*/, 1];\r\n                        _f.label = 4;\r\n                    case 4:\r\n                        if (bestGenome !== undefined) {\r\n                            // set this network to the fittest from NEAT\r\n                            this.nodes = bestGenome.nodes;\r\n                            this.connections = bestGenome.connections;\r\n                            this.gates = bestGenome.gates;\r\n                            if (options.clear) {\r\n                                this.clear();\r\n                            }\r\n                        }\r\n                        if (!workerPool) return [3 /*break*/, 6];\r\n                        return [4 /*yield*/, workerPool.terminate()];\r\n                    case 5:\r\n                        _f.sent(); // stop all processes\r\n                        _f.label = 6;\r\n                    case 6: return [2 /*return*/, {\r\n                            error: -error,\r\n                            iterations: neat.generation,\r\n                            time: Date.now() - start,\r\n                        }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Distance function\r\n     * @param g2 other network\r\n     */\r\n    Network.prototype.distance = function (g2) {\r\n        var g1 = this;\r\n        // set node indices\r\n        for (var i = 0; i < g1.nodes.length; i++) {\r\n            g1.nodes[i].index = i;\r\n        }\r\n        // set node indices\r\n        for (var i = 0; i < g2.nodes.length; i++) {\r\n            g2.nodes[i].index = i;\r\n        }\r\n        var indexG1 = 0;\r\n        var indexG2 = 0;\r\n        var connections1 = Array.from(g1.connections).filter(function (conn) { return conn !== undefined; });\r\n        var connections2 = Array.from(g2.connections).filter(function (conn) { return conn !== undefined; });\r\n        connections1 = connections1.sort(function (a, b) {\r\n            return a.getInnovationID() - b.getInnovationID();\r\n        });\r\n        connections2 = connections2.sort(function (a, b) {\r\n            return a.getInnovationID() - b.getInnovationID();\r\n        });\r\n        var highestInnovationID1 = connections1[connections1.length - 1].getInnovationID();\r\n        var highestInnovationID2 = connections2[connections2.length - 1].getInnovationID();\r\n        if (highestInnovationID1 < highestInnovationID2) {\r\n            var temp = g1;\r\n            g1 = g2;\r\n            g2 = temp;\r\n        }\r\n        var disjointGenes = 0;\r\n        var totalWeightDiff = 0;\r\n        var similarGenes = 0;\r\n        while (indexG1 < connections1.length && indexG2 < connections2.length) {\r\n            var gene1 = connections1[indexG1];\r\n            var gene2 = connections2[indexG2];\r\n            if (gene1 === undefined || gene2 === undefined) {\r\n                throw Error(\"HERE\");\r\n            }\r\n            var in1 = gene1.getInnovationID();\r\n            var in2 = gene2.getInnovationID();\r\n            if (in1 === in2) {\r\n                // similarGenes\r\n                indexG1++;\r\n                indexG2++;\r\n                totalWeightDiff += Math.abs(gene1.weight - gene2.weight);\r\n                similarGenes++;\r\n            }\r\n            else if (indexG1 > indexG2) {\r\n                // disjoint of b\r\n                indexG2++;\r\n                disjointGenes++;\r\n            }\r\n            else {\r\n                // disjoint of a\r\n                indexG1++;\r\n                disjointGenes++;\r\n            }\r\n        }\r\n        totalWeightDiff /= similarGenes;\r\n        var excessGenes = g1.connections.size - indexG1;\r\n        var N = Math.max(g1.connections.size, g2.connections.size);\r\n        if (N < 20) {\r\n            N = 1;\r\n        }\r\n        return NEAT_1.NEAT.C1 * excessGenes / N + NEAT_1.NEAT.C2 * disjointGenes / N + NEAT_1.NEAT.C3 * totalWeightDiff;\r\n    };\r\n    /**\r\n     * Performs one training epoch and returns the error - this is a private function used in `self.train`\r\n     *\r\n     * @private\r\n     * @time O(n&sup4;)\r\n     *\r\n     * @returns {number}\r\n     */\r\n    Network.prototype.trainEpoch = function (options) {\r\n        var _a, _b, _c;\r\n        var errorSum = 0;\r\n        for (var i = 0; i < options.dataset.length; i++) {\r\n            var input = options.dataset[i].input;\r\n            var correctOutput = options.dataset[i].output;\r\n            var update = (i + 1) % ((_a = options.batchSize) !== null && _a !== void 0 ? _a : options.dataset.length) === 0 || i + 1 === options.dataset.length;\r\n            var output = this.activate(input, { dropoutRate: (_b = options.dropoutRate) !== null && _b !== void 0 ? _b : 0.5 });\r\n            this.propagate(correctOutput, { rate: options.trainingRate, momentum: options.momentum, update: update });\r\n            errorSum += ((_c = options.loss) !== null && _c !== void 0 ? _c : Loss_1.MSELoss)(correctOutput, output);\r\n        }\r\n        return errorSum / options.dataset.length;\r\n    };\r\n    return Network;\r\n}());\r\nexports.Network = Network;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Architect = void 0;\r\nvar InputLayer_1 = require(\"./Layers/CoreLayers/InputLayer\");\r\nvar OutputLayer_1 = require(\"./Layers/CoreLayers/OutputLayer\");\r\nvar Layer_1 = require(\"./Layers/Layer\");\r\nvar Network_1 = require(\"./Network\");\r\n/**\r\n * Architect constructs multilayer networks with various types of layers.\r\n */\r\nvar Architect = /** @class */ (function () {\r\n    function Architect() {\r\n        this.layers = [];\r\n    }\r\n    /**\r\n     * Adds a layer to the architect.\r\n     *\r\n     * @param layer The layer\r\n     * @param incomingConnectionType The incoming connection to this layer\r\n     * @returns this object to function as builder class\r\n     */\r\n    Architect.prototype.addLayer = function (layer, incomingConnectionType) {\r\n        var connectionType = incomingConnectionType !== null && incomingConnectionType !== void 0 ? incomingConnectionType : layer.getDefaultIncomingConnectionType();\r\n        if (!layer.connectionTypeisAllowed(connectionType)) {\r\n            throw new ReferenceError(\"Connection type \" + connectionType + \" is not allowed at layer \" + layer.constructor.name);\r\n        }\r\n        this.layers.push({\r\n            layer: layer,\r\n            incomingConnectionType: connectionType\r\n        });\r\n        return this; // function as builder class\r\n    };\r\n    /**\r\n     * Build the network from the layers added to the architect.\r\n     *\r\n     * @returns the constructed network\r\n     */\r\n    Architect.prototype.buildModel = function () {\r\n        var _a, _b;\r\n        if (!(this.layers[0].layer instanceof InputLayer_1.InputLayer)) {\r\n            throw new ReferenceError(\"First layer has to be a InputLayer! Currently is: \" + this.layers[0].layer.constructor.name);\r\n        }\r\n        if (!(this.layers[this.layers.length - 1].layer instanceof OutputLayer_1.OutputLayer)) {\r\n            throw new ReferenceError(\"Last layer has to be a OutputLayer! Currently is: \" + this.layers[this.layers.length - 1].layer.constructor.name);\r\n        }\r\n        var inputSize = this.layers[0].layer.nodes.length;\r\n        var outputSize = this.layers[this.layers.length - 1].layer.nodes.length;\r\n        var network = new Network_1.Network(inputSize, outputSize);\r\n        network.nodes = [];\r\n        network.connections.clear();\r\n        for (var i = 0; i < this.layers.length - 1; i++) {\r\n            Layer_1.Layer.connect(this.layers[i].layer, this.layers[i + 1].layer, this.layers[i + 1].incomingConnectionType).forEach(function (conn) { return network.connections.add(conn); });\r\n            (_a = network.nodes).push.apply(_a, this.layers[i].layer.nodes);\r\n            this.layers[i].layer.connections.forEach(function (conn) { return network.connections.add(conn); });\r\n            this.layers[i].layer.gates.forEach(function (conn) { return network.gates.add(conn); });\r\n        }\r\n        (_b = network.nodes).push.apply(_b, this.layers[this.layers.length - 1].layer.nodes);\r\n        return network;\r\n    };\r\n    return Architect;\r\n}());\r\nexports.Architect = Architect;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ActivationNode = void 0;\r\nvar Utils_1 = require(\"../../utils/Utils\");\r\nvar ConstantNode_1 = require(\"./ConstantNode\");\r\n/**\r\n * Activation node\r\n */\r\nvar ActivationNode = /** @class */ (function (_super) {\r\n    __extends(ActivationNode, _super);\r\n    function ActivationNode() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Actives the node.\r\n     *\r\n     * When a neuron activates, it computes its state from all its input connections and 'squashes' it using its activation function, and returns the output (activation).\r\n     *\r\n     * You can also provide the activation (a float between 0 and 1) as a parameter, which is useful for neurons in the input layer.\r\n     *\r\n     * @returns A neuron's output value\r\n     */\r\n    ActivationNode.prototype.activate = function () {\r\n        this.old = this.state;\r\n        var incomingStates = Array.from(this.incoming).map(function (conn) { return conn.from.activation * conn.weight * conn.gain; });\r\n        if (incomingStates.length !== 1) {\r\n            throw new ReferenceError(\"Only 1 incoming connections is allowed!\");\r\n        }\r\n        this.state = incomingStates[0];\r\n        this.activation = this.squash(this.state, false) * this.mask;\r\n        this.derivativeState = this.squash(this.state, true);\r\n        return this.activation;\r\n    };\r\n    /**\r\n     * Backpropagate the error (a.k.a. learn).\r\n     *\r\n     * After an activation, you can teach the node what should have been the correct output (a.k.a. train). This is done by backpropagating. [Momentum](https://www.willamette.edu/~gorr/classes/cs449/momrate.html) adds a fraction of the previous weight update to the current one. When the gradient keeps pointing in the same direction, this will increase the size of the steps taken towards the minimum.\r\n     *\r\n     * If you combine a high learning rate with a lot of momentum, you will rush past the minimum (of the error function) with huge steps. It is therefore often necessary to reduce the global learning rate µ when using a lot of momentum (m close to 1).\r\n     *\r\n     * @param target The target value (i.e. \"the value the network SHOULD have given\")\r\n     * @param options More options for propagation\r\n     */\r\n    ActivationNode.prototype.propagate = function (target, options) {\r\n        var _this = this;\r\n        options.momentum = Utils_1.getOrDefault(options.momentum, 0);\r\n        options.rate = Utils_1.getOrDefault(options.rate, 0.3);\r\n        options.update = Utils_1.getOrDefault(options.update, true);\r\n        var connectionsStates = Array.from(this.outgoing).map(function (conn) { return conn.to.errorResponsibility * conn.weight * conn.gain; });\r\n        this.errorResponsibility = this.errorProjected = Utils_1.sum(connectionsStates) * this.derivativeState;\r\n        this.incoming.forEach(function (connection) {\r\n            var _a, _b;\r\n            // calculate gradient\r\n            var gradient = _this.errorProjected * connection.eligibility;\r\n            connection.xTrace.forEach(function (value, key) {\r\n                gradient += key.errorResponsibility * value;\r\n            });\r\n            connection.deltaWeightsTotal += ((_a = options.rate) !== null && _a !== void 0 ? _a : 0.3) * gradient * _this.mask;\r\n            if (options.update) {\r\n                connection.deltaWeightsTotal += ((_b = options.momentum) !== null && _b !== void 0 ? _b : 0) * connection.deltaWeightsPrevious;\r\n                connection.weight += connection.deltaWeightsTotal;\r\n                connection.deltaWeightsPrevious = connection.deltaWeightsTotal;\r\n                connection.deltaWeightsTotal = 0;\r\n            }\r\n        });\r\n    };\r\n    return ActivationNode;\r\n}(ConstantNode_1.ConstantNode));\r\nexports.ActivationNode = ActivationNode;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ActivationLayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar ConnectionType_1 = require(\"../../../enums/ConnectionType\");\r\nvar ActivationNode_1 = require(\"../../Nodes/ActivationNode\");\r\nvar Layer_1 = require(\"../Layer\");\r\n/**\r\n * Activation layer\r\n */\r\nvar ActivationLayer = /** @class */ (function (_super) {\r\n    __extends(ActivationLayer, _super);\r\n    function ActivationLayer(outputSize, options) {\r\n        var _a;\r\n        if (options === void 0) { options = {}; }\r\n        var _b;\r\n        var _this = _super.call(this, outputSize) || this;\r\n        var activation = (_b = options.activation) !== null && _b !== void 0 ? _b : src_1.Logistic;\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new ActivationNode_1.ActivationNode().setActivationType(activation));\r\n        }\r\n        _this.outputNodes = _this.inputNodes;\r\n        (_a = _this.nodes).push.apply(_a, Array.from(_this.inputNodes));\r\n        return _this;\r\n    }\r\n    /**\r\n     * Checks if a given connection type is allowed on this layer.\r\n     *\r\n     * @param type the type to check\r\n     *\r\n     * @return Is this connection type allowed?\r\n     */\r\n    ActivationLayer.prototype.connectionTypeisAllowed = function (type) {\r\n        return type === ConnectionType_1.ConnectionType.ONE_TO_ONE;\r\n    };\r\n    /**\r\n     * Gets the default connection type for a incoming connection to this layer.\r\n     *\r\n     * @returns the default incoming connection\r\n     */\r\n    ActivationLayer.prototype.getDefaultIncomingConnectionType = function () {\r\n        return ConnectionType_1.ConnectionType.ONE_TO_ONE;\r\n    };\r\n    return ActivationLayer;\r\n}(Layer_1.Layer));\r\nexports.ActivationLayer = ActivationLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DenseLayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar ConnectionType_1 = require(\"../../../enums/ConnectionType\");\r\nvar NodeType_1 = require(\"../../../enums/NodeType\");\r\nvar Node_1 = require(\"../../Node\");\r\nvar Layer_1 = require(\"../Layer\");\r\n/**\r\n * Dense layer\r\n */\r\nvar DenseLayer = /** @class */ (function (_super) {\r\n    __extends(DenseLayer, _super);\r\n    function DenseLayer(outputSize, options) {\r\n        var _a;\r\n        if (options === void 0) { options = {}; }\r\n        var _b;\r\n        var _this = _super.call(this, outputSize) || this;\r\n        var activation = (_b = options.activationType) !== null && _b !== void 0 ? _b : src_1.Logistic;\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new Node_1.Node(NodeType_1.NodeType.HIDDEN).setActivationType(activation));\r\n        }\r\n        _this.outputNodes = _this.inputNodes;\r\n        (_a = _this.nodes).push.apply(_a, Array.from(_this.inputNodes));\r\n        return _this;\r\n    }\r\n    /**\r\n     * Checks if a given connection type is allowed on this layer.\r\n     *\r\n     * @param type the type to check\r\n     *\r\n     * @return Is this connection type allowed?\r\n     */\r\n    DenseLayer.prototype.connectionTypeisAllowed = function (type) {\r\n        return true;\r\n    };\r\n    /**\r\n     * Gets the default connection type for a incoming connection to this layer.\r\n     *\r\n     * @returns the default incoming connection\r\n     */\r\n    DenseLayer.prototype.getDefaultIncomingConnectionType = function () {\r\n        return ConnectionType_1.ConnectionType.ALL_TO_ALL;\r\n    };\r\n    return DenseLayer;\r\n}(Layer_1.Layer));\r\nexports.DenseLayer = DenseLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DropoutNode = void 0;\r\nvar Utils_1 = require(\"../../utils/Utils\");\r\nvar ConstantNode_1 = require(\"./ConstantNode\");\r\n/**\r\n * Dropout node\r\n */\r\nvar DropoutNode = /** @class */ (function (_super) {\r\n    __extends(DropoutNode, _super);\r\n    function DropoutNode(probability) {\r\n        var _this = _super.call(this) || this;\r\n        _this.probability = probability;\r\n        _this.droppedOut = false;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Actives the node.\r\n     *\r\n     * When a neuron activates, it computes its state from all its input connections and 'squashes' it using its activation function, and returns the output (activation).\r\n     *\r\n     * You can also provide the activation (a float between 0 and 1) as a parameter, which is useful for neurons in the input layer.\r\n     *\r\n     * @returns A neuron's output value\r\n     */\r\n    DropoutNode.prototype.activate = function () {\r\n        var _this = this;\r\n        if (this.incoming.size !== 1) {\r\n            throw new RangeError(\"Dropout node should have exactly one incoming connection!\");\r\n        }\r\n        var incomingConnection = Array.from(this.incoming)[0];\r\n        // https://stats.stackexchange.com/a/219240\r\n        if (Utils_1.randDouble(0, 1) < this.probability) {\r\n            // DROPOUT\r\n            this.droppedOut = true;\r\n            this.state = 0;\r\n        }\r\n        else {\r\n            this.droppedOut = false;\r\n            this.state = incomingConnection.from.activation * incomingConnection.weight * incomingConnection.gain;\r\n            this.state *= 1 / (1 - this.probability);\r\n        }\r\n        this.activation = this.squash(this.state, false) * this.mask;\r\n        // Adjust gain\r\n        this.gated.forEach(function (conn) { return conn.gain = _this.activation; });\r\n        return this.activation;\r\n    };\r\n    /**\r\n     * Backpropagate the error (a.k.a. learn).\r\n     *\r\n     * After an activation, you can teach the node what should have been the correct output (a.k.a. train). This is done by backpropagating. [Momentum](https://www.willamette.edu/~gorr/classes/cs449/momrate.html) adds a fraction of the previous weight update to the current one. When the gradient keeps pointing in the same direction, this will increase the size of the steps taken towards the minimum.\r\n     *\r\n     * If you combine a high learning rate with a lot of momentum, you will rush past the minimum (of the error function) with huge steps. It is therefore often necessary to reduce the global learning rate µ when using a lot of momentum (m close to 1).\r\n     *\r\n     * @param target The target value (i.e. \"the value the network SHOULD have given\")\r\n     * @param options More options for propagation\r\n     */\r\n    DropoutNode.prototype.propagate = function (target, options) {\r\n        if (options === void 0) { options = {}; }\r\n        options.momentum = Utils_1.getOrDefault(options.momentum, 0);\r\n        options.rate = Utils_1.getOrDefault(options.rate, 0.3);\r\n        options.update = Utils_1.getOrDefault(options.update, true);\r\n        var connectionsStates = Array.from(this.outgoing).map(function (conn) { return conn.to.errorResponsibility * conn.weight * conn.gain; });\r\n        this.errorResponsibility = this.errorProjected = Utils_1.sum(connectionsStates) / (1 - this.probability);\r\n        if (this.incoming.size !== 1) {\r\n            throw new RangeError(\"Dropout node should have exactly one incoming connection!\");\r\n        }\r\n        var connection = Array.from(this.incoming)[0];\r\n        // calculate gradient\r\n        if (!this.droppedOut) {\r\n            var gradient_1 = this.errorProjected * connection.eligibility;\r\n            connection.xTrace.forEach(function (value, key) {\r\n                gradient_1 += key.errorResponsibility * value;\r\n            });\r\n            if (options.update) {\r\n                connection.deltaWeightsTotal += options.rate * gradient_1 * this.mask + options.momentum * connection.deltaWeightsPrevious;\r\n                connection.weight += connection.deltaWeightsTotal;\r\n                connection.deltaWeightsPrevious = connection.deltaWeightsTotal;\r\n                connection.deltaWeightsTotal = 0;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Create a constant node from json object.\r\n     *\r\n     * @param json the json object representing the node\r\n     *\r\n     * @returns the created node\r\n     */\r\n    DropoutNode.prototype.fromJSON = function (json) {\r\n        _super.prototype.fromJSON.call(this, json);\r\n        this.probability = json.probability;\r\n        return this;\r\n    };\r\n    /**\r\n     * Convert this node into a json object.\r\n     *\r\n     * @returns the json object representing this node\r\n     */\r\n    DropoutNode.prototype.toJSON = function () {\r\n        return Object.assign(_super.prototype.toJSON.call(this), {\r\n            probability: this.probability\r\n        });\r\n    };\r\n    return DropoutNode;\r\n}(ConstantNode_1.ConstantNode));\r\nexports.DropoutNode = DropoutNode;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DropoutLayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar ConnectionType_1 = require(\"../../../enums/ConnectionType\");\r\nvar DropoutNode_1 = require(\"../../Nodes/DropoutNode\");\r\nvar Layer_1 = require(\"../Layer\");\r\n/**\r\n * Dropout layer\r\n */\r\nvar DropoutLayer = /** @class */ (function (_super) {\r\n    __extends(DropoutLayer, _super);\r\n    function DropoutLayer(outputSize, options) {\r\n        var _a;\r\n        if (options === void 0) { options = {}; }\r\n        var _b, _c;\r\n        var _this = _super.call(this, outputSize) || this;\r\n        var activation = (_b = options.activation) !== null && _b !== void 0 ? _b : src_1.Identitiy;\r\n        var probability = (_c = options.probability) !== null && _c !== void 0 ? _c : 0.1;\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new DropoutNode_1.DropoutNode(probability).setActivationType(activation));\r\n        }\r\n        _this.outputNodes = _this.inputNodes;\r\n        (_a = _this.nodes).push.apply(_a, Array.from(_this.inputNodes));\r\n        return _this;\r\n    }\r\n    /**\r\n     * Gets the default connection type for a incoming connection to this layer.\r\n     *\r\n     * @returns the default incoming connection\r\n     */\r\n    DropoutLayer.prototype.getDefaultIncomingConnectionType = function () {\r\n        return ConnectionType_1.ConnectionType.ONE_TO_ONE;\r\n    };\r\n    /**\r\n     * Checks if a given connection type is allowed on this layer.\r\n     *\r\n     * @param type the type to check\r\n     *\r\n     * @return Is this connection type allowed?\r\n     */\r\n    DropoutLayer.prototype.connectionTypeisAllowed = function (type) {\r\n        return type === ConnectionType_1.ConnectionType.ONE_TO_ONE;\r\n    };\r\n    return DropoutLayer;\r\n}(Layer_1.Layer));\r\nexports.DropoutLayer = DropoutLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PoolNode = void 0;\r\nvar NodeType_1 = require(\"../../enums/NodeType\");\r\nvar Utils_1 = require(\"../../utils/Utils\");\r\nvar ConstantNode_1 = require(\"./ConstantNode\");\r\n/**\r\n * Pool node\r\n */\r\nvar PoolNode = /** @class */ (function (_super) {\r\n    __extends(PoolNode, _super);\r\n    function PoolNode(poolingType) {\r\n        if (poolingType === void 0) { poolingType = NodeType_1.PoolNodeType.MAX_POOLING; }\r\n        var _this = _super.call(this) || this;\r\n        _this.poolingType = poolingType;\r\n        _this.receivingNode = null;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Create a constant node from json object.\r\n     *\r\n     * @param json the json object representing the node\r\n     *\r\n     * @returns the created node\r\n     */\r\n    PoolNode.prototype.fromJSON = function (json) {\r\n        _super.prototype.fromJSON.call(this, json);\r\n        this.poolingType = json.poolType;\r\n        return this;\r\n    };\r\n    /**\r\n     * Actives the node.\r\n     *\r\n     * When a neuron activates, it computes its state from all its input connections and 'squashes' it using its activation function, and returns the output (activation).\r\n     *\r\n     * You can also provide the activation (a float between 0 and 1) as a parameter, which is useful for neurons in the input layer.\r\n     *\r\n     * @returns A neuron's output value\r\n     */\r\n    PoolNode.prototype.activate = function () {\r\n        var _this = this;\r\n        var connections = Array.from(this.incoming);\r\n        var incomingStates = connections.map(function (conn) { return conn.from.activation * conn.weight * conn.gain; });\r\n        if (this.poolingType === NodeType_1.PoolNodeType.MAX_POOLING) {\r\n            var index = Utils_1.maxValueIndex(incomingStates);\r\n            this.receivingNode = connections[index].from;\r\n            this.state = incomingStates[index];\r\n        }\r\n        else if (this.poolingType === NodeType_1.PoolNodeType.AVG_POOLING) {\r\n            this.state = Utils_1.avg(incomingStates);\r\n        }\r\n        else if (this.poolingType === NodeType_1.PoolNodeType.MIN_POOLING) {\r\n            var index = Utils_1.minValueIndex(incomingStates);\r\n            this.receivingNode = connections[index].from;\r\n            this.state = incomingStates[index];\r\n        }\r\n        else {\r\n            throw new ReferenceError(\"No valid pooling type! Type: \" + this.poolingType);\r\n        }\r\n        this.activation = this.squash(this.state, false) * this.mask;\r\n        if (this.poolingType === NodeType_1.PoolNodeType.AVG_POOLING) {\r\n            this.derivativeState = this.squash(this.state, true);\r\n        }\r\n        // Adjust gain\r\n        this.gated.forEach(function (conn) { return conn.gain = _this.activation; });\r\n        return this.activation;\r\n    };\r\n    /**\r\n     * Backpropagate the error (a.k.a. learn).\r\n     *\r\n     * After an activation, you can teach the node what should have been the correct output (a.k.a. train). This is done by backpropagating. [Momentum](https://www.willamette.edu/~gorr/classes/cs449/momrate.html) adds a fraction of the previous weight update to the current one. When the gradient keeps pointing in the same direction, this will increase the size of the steps taken towards the minimum.\r\n     *\r\n     * If you combine a high learning rate with a lot of momentum, you will rush past the minimum (of the error function) with huge steps. It is therefore often necessary to reduce the global learning rate µ when using a lot of momentum (m close to 1).\r\n     *\r\n     * @param target The target value (i.e. \"the value the network SHOULD have given\")\r\n     * @param options More options for propagation\r\n     */\r\n    PoolNode.prototype.propagate = function (target, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        options.momentum = Utils_1.getOrDefault(options.momentum, 0);\r\n        options.rate = Utils_1.getOrDefault(options.rate, 0.3);\r\n        options.update = Utils_1.getOrDefault(options.update, true);\r\n        var connectionsStates = Array.from(this.outgoing).map(function (conn) { return conn.to.errorResponsibility * conn.weight * conn.gain; });\r\n        this.errorResponsibility = this.errorProjected = Utils_1.sum(connectionsStates) * this.derivativeState;\r\n        if (this.poolingType === NodeType_1.PoolNodeType.AVG_POOLING) {\r\n            this.incoming.forEach(function (connection) {\r\n                var _a, _b;\r\n                // calculate gradient\r\n                var gradient = _this.errorProjected * connection.eligibility;\r\n                connection.xTrace.forEach(function (value, key) {\r\n                    gradient += key.errorResponsibility * value;\r\n                });\r\n                connection.deltaWeightsTotal += ((_a = options.rate) !== null && _a !== void 0 ? _a : 0.3) * gradient * _this.mask;\r\n                if (options.update) {\r\n                    connection.deltaWeightsTotal += ((_b = options.momentum) !== null && _b !== void 0 ? _b : 0) * connection.deltaWeightsPrevious;\r\n                    connection.weight += connection.deltaWeightsTotal;\r\n                    connection.deltaWeightsPrevious = connection.deltaWeightsTotal;\r\n                    connection.deltaWeightsTotal = 0;\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            // TODO: don't think that this is correct\r\n            // Passing only the connections that were used for getting the min or max\r\n            this.incoming.forEach(function (conn) {\r\n                conn.weight = _this.receivingNode === conn.from ? 1 : 0;\r\n                conn.gain = _this.receivingNode === conn.from ? 1 : 0;\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Convert this node into a json object.\r\n     *\r\n     * @returns the json object representing this node\r\n     */\r\n    PoolNode.prototype.toJSON = function () {\r\n        return Object.assign(_super.prototype.toJSON.call(this), {\r\n            poolType: this.poolingType\r\n        });\r\n    };\r\n    return PoolNode;\r\n}(ConstantNode_1.ConstantNode));\r\nexports.PoolNode = PoolNode;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PoolingLayer = void 0;\r\nvar ConnectionType_1 = require(\"../../../enums/ConnectionType\");\r\nvar Layer_1 = require(\"../Layer\");\r\n/**\r\n * Parent class for all pooling layers\r\n */\r\nvar PoolingLayer = /** @class */ (function (_super) {\r\n    __extends(PoolingLayer, _super);\r\n    function PoolingLayer(outputSize) {\r\n        return _super.call(this, outputSize) || this;\r\n    }\r\n    /**\r\n     * Gets the default connection type for a incoming connection to this layer.\r\n     *\r\n     * @returns the default incoming connection\r\n     */\r\n    PoolingLayer.prototype.getDefaultIncomingConnectionType = function () {\r\n        return ConnectionType_1.ConnectionType.POOLING;\r\n    };\r\n    /**\r\n     * Checks if a given connection type is allowed on this layer.\r\n     *\r\n     * @param type the type to check\r\n     *\r\n     * @return Is this connection type allowed?\r\n     */\r\n    PoolingLayer.prototype.connectionTypeisAllowed = function (type) {\r\n        return true;\r\n    };\r\n    return PoolingLayer;\r\n}(Layer_1.Layer));\r\nexports.PoolingLayer = PoolingLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AvgPooling1DLayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar NodeType_1 = require(\"../../../enums/NodeType\");\r\nvar PoolNode_1 = require(\"../../Nodes/PoolNode\");\r\nvar PoolingLayer_1 = require(\"./PoolingLayer\");\r\n/**\r\n * Average pooling layer 1D\r\n */\r\nvar AvgPooling1DLayer = /** @class */ (function (_super) {\r\n    __extends(AvgPooling1DLayer, _super);\r\n    function AvgPooling1DLayer(outputSize, options) {\r\n        var _a;\r\n        if (options === void 0) { options = {}; }\r\n        var _b;\r\n        var _this = _super.call(this, outputSize) || this;\r\n        var activationType = (_b = options.activation) !== null && _b !== void 0 ? _b : src_1.Identitiy;\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new PoolNode_1.PoolNode(NodeType_1.PoolNodeType.AVG_POOLING).setActivationType(activationType));\r\n        }\r\n        _this.outputNodes = _this.inputNodes;\r\n        (_a = _this.nodes).push.apply(_a, Array.from(_this.inputNodes));\r\n        return _this;\r\n    }\r\n    return AvgPooling1DLayer;\r\n}(PoolingLayer_1.PoolingLayer));\r\nexports.AvgPooling1DLayer = AvgPooling1DLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GlobalAvgPooling1DLayer = void 0;\r\nvar AvgPooling1DLayer_1 = require(\"./AvgPooling1DLayer\");\r\n/**\r\n * Global average pooling layer 1D\r\n */\r\nvar GlobalAvgPooling1DLayer = /** @class */ (function (_super) {\r\n    __extends(GlobalAvgPooling1DLayer, _super);\r\n    function GlobalAvgPooling1DLayer(outputSize, options) {\r\n        if (options === void 0) { options = {}; }\r\n        return _super.call(this, 1, options) || this;\r\n    }\r\n    return GlobalAvgPooling1DLayer;\r\n}(AvgPooling1DLayer_1.AvgPooling1DLayer));\r\nexports.GlobalAvgPooling1DLayer = GlobalAvgPooling1DLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MaxPooling1DLayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar NodeType_1 = require(\"../../../enums/NodeType\");\r\nvar PoolNode_1 = require(\"../../Nodes/PoolNode\");\r\nvar PoolingLayer_1 = require(\"./PoolingLayer\");\r\n/**\r\n * Maximum pooling layer 1D\r\n */\r\nvar MaxPooling1DLayer = /** @class */ (function (_super) {\r\n    __extends(MaxPooling1DLayer, _super);\r\n    function MaxPooling1DLayer(outputSize, options) {\r\n        var _a;\r\n        if (options === void 0) { options = {}; }\r\n        var _b;\r\n        var _this = _super.call(this, outputSize) || this;\r\n        var activationType = (_b = options.activation) !== null && _b !== void 0 ? _b : src_1.Identitiy;\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new PoolNode_1.PoolNode(NodeType_1.PoolNodeType.MAX_POOLING).setActivationType(activationType));\r\n        }\r\n        _this.outputNodes = _this.inputNodes;\r\n        (_a = _this.nodes).push.apply(_a, Array.from(_this.inputNodes));\r\n        return _this;\r\n    }\r\n    return MaxPooling1DLayer;\r\n}(PoolingLayer_1.PoolingLayer));\r\nexports.MaxPooling1DLayer = MaxPooling1DLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GlobalMaxPooling1DLayer = void 0;\r\nvar MaxPooling1DLayer_1 = require(\"./MaxPooling1DLayer\");\r\n/**\r\n * Global maximum pooling layer 1D\r\n */\r\nvar GlobalMaxPooling1DLayer = /** @class */ (function (_super) {\r\n    __extends(GlobalMaxPooling1DLayer, _super);\r\n    function GlobalMaxPooling1DLayer(outputSize, options) {\r\n        if (options === void 0) { options = {}; }\r\n        return _super.call(this, 1, options) || this;\r\n    }\r\n    return GlobalMaxPooling1DLayer;\r\n}(MaxPooling1DLayer_1.MaxPooling1DLayer));\r\nexports.GlobalMaxPooling1DLayer = GlobalMaxPooling1DLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MinPooling1DLayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar NodeType_1 = require(\"../../../enums/NodeType\");\r\nvar PoolNode_1 = require(\"../../Nodes/PoolNode\");\r\nvar PoolingLayer_1 = require(\"./PoolingLayer\");\r\n/**\r\n * Minimum pooling layer 1D\r\n */\r\nvar MinPooling1DLayer = /** @class */ (function (_super) {\r\n    __extends(MinPooling1DLayer, _super);\r\n    function MinPooling1DLayer(outputSize, options) {\r\n        var _a;\r\n        if (options === void 0) { options = {}; }\r\n        var _b;\r\n        var _this = _super.call(this, outputSize) || this;\r\n        var activationType = (_b = options.activation) !== null && _b !== void 0 ? _b : src_1.Identitiy;\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new PoolNode_1.PoolNode(NodeType_1.PoolNodeType.MIN_POOLING).setActivationType(activationType));\r\n        }\r\n        _this.outputNodes = _this.inputNodes;\r\n        (_a = _this.nodes).push.apply(_a, Array.from(_this.inputNodes));\r\n        return _this;\r\n    }\r\n    return MinPooling1DLayer;\r\n}(PoolingLayer_1.PoolingLayer));\r\nexports.MinPooling1DLayer = MinPooling1DLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GlobalMinPooling1DLayer = void 0;\r\nvar MinPooling1DLayer_1 = require(\"./MinPooling1DLayer\");\r\n/**\r\n * Global minimum pooling layer 1D\r\n */\r\nvar GlobalMinPooling1DLayer = /** @class */ (function (_super) {\r\n    __extends(GlobalMinPooling1DLayer, _super);\r\n    function GlobalMinPooling1DLayer(outputSize, options) {\r\n        if (options === void 0) { options = {}; }\r\n        return _super.call(this, 1, options) || this;\r\n    }\r\n    return GlobalMinPooling1DLayer;\r\n}(MinPooling1DLayer_1.MinPooling1DLayer));\r\nexports.GlobalMinPooling1DLayer = GlobalMinPooling1DLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GRULayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar ConnectionType_1 = require(\"../../../enums/ConnectionType\");\r\nvar GatingType_1 = require(\"../../../enums/GatingType\");\r\nvar NodeType_1 = require(\"../../../enums/NodeType\");\r\nvar Node_1 = require(\"../../Node\");\r\nvar Layer_1 = require(\"../Layer\");\r\n/**\r\n * GRU layer\r\n */\r\nvar GRULayer = /** @class */ (function (_super) {\r\n    __extends(GRULayer, _super);\r\n    function GRULayer(outputSize, options) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v;\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, outputSize) || this;\r\n        var updateGate = [];\r\n        var inverseUpdateGate = [];\r\n        var resetGate = [];\r\n        var memoryCell = [];\r\n        var previousOutput = [];\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new Node_1.Node(NodeType_1.NodeType.HIDDEN));\r\n            updateGate.push(new Node_1.Node(NodeType_1.NodeType.HIDDEN).setBias(1));\r\n            inverseUpdateGate.push(new Node_1.Node(NodeType_1.NodeType.HIDDEN).setBias(0).setActivationType(src_1.Logistic));\r\n            resetGate.push(new Node_1.Node(NodeType_1.NodeType.HIDDEN).setBias(0));\r\n            memoryCell.push(new Node_1.Node(NodeType_1.NodeType.HIDDEN).setActivationType(src_1.TANH));\r\n            previousOutput.push(new Node_1.Node(NodeType_1.NodeType.HIDDEN).setBias(0).setActivationType(src_1.Logistic));\r\n            _this.outputNodes.add(new Node_1.Node(NodeType_1.NodeType.HIDDEN));\r\n        }\r\n        (_a = _this.connections).push.apply(_a, Layer_1.Layer.connect(_this.inputNodes, updateGate, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        (_b = _this.connections).push.apply(_b, Layer_1.Layer.connect(_this.inputNodes, resetGate, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        (_c = _this.connections).push.apply(_c, Layer_1.Layer.connect(_this.inputNodes, memoryCell, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        (_d = _this.connections).push.apply(_d, Layer_1.Layer.connect(previousOutput, updateGate, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        (_e = _this.connections).push.apply(_e, Layer_1.Layer.connect(updateGate, inverseUpdateGate, ConnectionType_1.ConnectionType.ONE_TO_ONE, 1));\r\n        (_f = _this.connections).push.apply(_f, Layer_1.Layer.connect(previousOutput, resetGate, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        var reset = Layer_1.Layer.connect(previousOutput, memoryCell, ConnectionType_1.ConnectionType.ALL_TO_ALL);\r\n        (_g = _this.connections).push.apply(_g, reset);\r\n        (_h = _this.gates).push.apply(_h, Layer_1.Layer.gate(resetGate, reset, GatingType_1.GatingType.OUTPUT));\r\n        var update = Layer_1.Layer.connect(previousOutput, _this.outputNodes, ConnectionType_1.ConnectionType.ALL_TO_ALL);\r\n        var inverseUpdate = Layer_1.Layer.connect(memoryCell, _this.outputNodes, ConnectionType_1.ConnectionType.ALL_TO_ALL);\r\n        (_j = _this.connections).push.apply(_j, update);\r\n        (_k = _this.connections).push.apply(_k, inverseUpdate);\r\n        (_l = _this.gates).push.apply(_l, Layer_1.Layer.gate(updateGate, update, GatingType_1.GatingType.OUTPUT));\r\n        (_m = _this.gates).push.apply(_m, Layer_1.Layer.gate(inverseUpdateGate, inverseUpdate, GatingType_1.GatingType.OUTPUT));\r\n        (_o = _this.connections).push.apply(_o, Layer_1.Layer.connect(_this.outputNodes, previousOutput, ConnectionType_1.ConnectionType.ONE_TO_ONE, 1));\r\n        (_p = _this.nodes).push.apply(_p, Array.from(_this.inputNodes));\r\n        (_q = _this.nodes).push.apply(_q, updateGate);\r\n        (_r = _this.nodes).push.apply(_r, inverseUpdateGate);\r\n        (_s = _this.nodes).push.apply(_s, resetGate);\r\n        (_t = _this.nodes).push.apply(_t, memoryCell);\r\n        (_u = _this.nodes).push.apply(_u, Array.from(_this.outputNodes));\r\n        (_v = _this.nodes).push.apply(_v, previousOutput);\r\n        _this.outputNodes.forEach(function (node) { var _a; return node.squash = (_a = options.activation) !== null && _a !== void 0 ? _a : src_1.Logistic; });\r\n        return _this;\r\n    }\r\n    /**\r\n     * Checks if a given connection type is allowed on this layer.\r\n     *\r\n     * @param type the type to check\r\n     *\r\n     * @return Is this connection type allowed?\r\n     */\r\n    GRULayer.prototype.connectionTypeisAllowed = function (type) {\r\n        return true;\r\n    };\r\n    /**\r\n     * Gets the default connection type for a incoming connection to this layer.\r\n     *\r\n     * @returns the default incoming connection\r\n     */\r\n    GRULayer.prototype.getDefaultIncomingConnectionType = function () {\r\n        return ConnectionType_1.ConnectionType.ALL_TO_ALL;\r\n    };\r\n    return GRULayer;\r\n}(Layer_1.Layer));\r\nexports.GRULayer = GRULayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HopfieldLayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar ConnectionType_1 = require(\"../../../enums/ConnectionType\");\r\nvar NodeType_1 = require(\"../../../enums/NodeType\");\r\nvar Node_1 = require(\"../../Node\");\r\nvar Layer_1 = require(\"../Layer\");\r\n/**\r\n * Hopfield layer\r\n */\r\nvar HopfieldLayer = /** @class */ (function (_super) {\r\n    __extends(HopfieldLayer, _super);\r\n    function HopfieldLayer(outputSize) {\r\n        var _a, _b, _c, _d;\r\n        var _this = _super.call(this, outputSize) || this;\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new Node_1.Node(NodeType_1.NodeType.HIDDEN));\r\n            _this.outputNodes.add(new Node_1.Node(NodeType_1.NodeType.HIDDEN).setActivationType(src_1.BinaryStep));\r\n        }\r\n        (_a = _this.connections).push.apply(_a, Layer_1.Layer.connect(_this.inputNodes, _this.outputNodes, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        (_b = _this.connections).push.apply(_b, Layer_1.Layer.connect(_this.outputNodes, _this.inputNodes, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        (_c = _this.nodes).push.apply(_c, Array.from(_this.inputNodes));\r\n        (_d = _this.nodes).push.apply(_d, Array.from(_this.outputNodes));\r\n        return _this;\r\n    }\r\n    /**\r\n     * Checks if a given connection type is allowed on this layer.\r\n     *\r\n     * @param type the type to check\r\n     *\r\n     * @return Is this connection type allowed?\r\n     */\r\n    HopfieldLayer.prototype.connectionTypeisAllowed = function (type) {\r\n        return true;\r\n    };\r\n    /**\r\n     * Gets the default connection type for a incoming connection to this layer.\r\n     *\r\n     * @returns the default incoming connection\r\n     */\r\n    HopfieldLayer.prototype.getDefaultIncomingConnectionType = function () {\r\n        return ConnectionType_1.ConnectionType.ALL_TO_ALL;\r\n    };\r\n    return HopfieldLayer;\r\n}(Layer_1.Layer));\r\nexports.HopfieldLayer = HopfieldLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LSTMLayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar ConnectionType_1 = require(\"../../../enums/ConnectionType\");\r\nvar GatingType_1 = require(\"../../../enums/GatingType\");\r\nvar NodeType_1 = require(\"../../../enums/NodeType\");\r\nvar Node_1 = require(\"../../Node\");\r\nvar Layer_1 = require(\"../Layer\");\r\n/**\r\n * LSTM layer\r\n */\r\nvar LSTMLayer = /** @class */ (function (_super) {\r\n    __extends(LSTMLayer, _super);\r\n    function LSTMLayer(outputSize, options) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t;\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, outputSize) || this;\r\n        var inputGate = [];\r\n        var forgetGate = [];\r\n        var memoryCell = [];\r\n        var outputGate = [];\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new Node_1.Node(NodeType_1.NodeType.HIDDEN));\r\n            inputGate.push(new Node_1.Node(NodeType_1.NodeType.HIDDEN).setBias(1));\r\n            forgetGate.push(new Node_1.Node(NodeType_1.NodeType.HIDDEN).setBias(1).setActivationType(src_1.Logistic));\r\n            memoryCell.push(new Node_1.Node(NodeType_1.NodeType.HIDDEN));\r\n            outputGate.push(new Node_1.Node(NodeType_1.NodeType.HIDDEN).setBias(1));\r\n            _this.outputNodes.add(new Node_1.Node(NodeType_1.NodeType.HIDDEN));\r\n        }\r\n        (_a = _this.connections).push.apply(_a, Layer_1.Layer.connect(memoryCell, inputGate, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        (_b = _this.connections).push.apply(_b, Layer_1.Layer.connect(memoryCell, forgetGate, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        (_c = _this.connections).push.apply(_c, Layer_1.Layer.connect(memoryCell, outputGate, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        var forgetGateConnections = Layer_1.Layer.connect(memoryCell, memoryCell, ConnectionType_1.ConnectionType.ONE_TO_ONE);\r\n        var outputGateConnections = Layer_1.Layer.connect(memoryCell, _this.outputNodes, ConnectionType_1.ConnectionType.ALL_TO_ALL);\r\n        (_d = _this.connections).push.apply(_d, forgetGateConnections);\r\n        (_e = _this.connections).push.apply(_e, outputGateConnections);\r\n        (_f = _this.connections).push.apply(_f, Layer_1.Layer.connect(_this.inputNodes, memoryCell, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        (_g = _this.connections).push.apply(_g, Layer_1.Layer.connect(_this.inputNodes, outputGate, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        (_h = _this.connections).push.apply(_h, Layer_1.Layer.connect(_this.inputNodes, forgetGate, ConnectionType_1.ConnectionType.ALL_TO_ALL));\r\n        var inputGateConnections = Layer_1.Layer.connect(_this.inputNodes, inputGate, ConnectionType_1.ConnectionType.ALL_TO_ALL);\r\n        (_j = _this.connections).push.apply(_j, inputGateConnections);\r\n        (_k = _this.gates).push.apply(_k, Layer_1.Layer.gate(forgetGate, forgetGateConnections, GatingType_1.GatingType.SELF));\r\n        (_l = _this.gates).push.apply(_l, Layer_1.Layer.gate(outputGate, outputGateConnections, GatingType_1.GatingType.OUTPUT));\r\n        (_m = _this.gates).push.apply(_m, Layer_1.Layer.gate(inputGate, inputGateConnections, GatingType_1.GatingType.INPUT));\r\n        (_o = _this.nodes).push.apply(_o, Array.from(_this.inputNodes));\r\n        (_p = _this.nodes).push.apply(_p, inputGate);\r\n        (_q = _this.nodes).push.apply(_q, forgetGate);\r\n        (_r = _this.nodes).push.apply(_r, memoryCell);\r\n        (_s = _this.nodes).push.apply(_s, outputGate);\r\n        (_t = _this.nodes).push.apply(_t, Array.from(_this.outputNodes));\r\n        _this.outputNodes.forEach(function (node) { var _a; return node.squash = (_a = options.activation) !== null && _a !== void 0 ? _a : src_1.TANH; });\r\n        return _this;\r\n    }\r\n    /**\r\n     * Checks if a given connection type is allowed on this layer.\r\n     *\r\n     * @param type the type to check\r\n     *\r\n     * @return Is this connection type allowed?\r\n     */\r\n    LSTMLayer.prototype.connectionTypeisAllowed = function (type) {\r\n        return true;\r\n    };\r\n    /**\r\n     * Gets the default connection type for a incoming connection to this layer.\r\n     *\r\n     * @returns the default incoming connection\r\n     */\r\n    LSTMLayer.prototype.getDefaultIncomingConnectionType = function () {\r\n        return ConnectionType_1.ConnectionType.ALL_TO_ALL;\r\n    };\r\n    return LSTMLayer;\r\n}(Layer_1.Layer));\r\nexports.LSTMLayer = LSTMLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MemoryLayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar ConnectionType_1 = require(\"../../../enums/ConnectionType\");\r\nvar NodeType_1 = require(\"../../../enums/NodeType\");\r\nvar Node_1 = require(\"../../Node\");\r\nvar Layer_1 = require(\"../Layer\");\r\n/**\r\n * Memory layer\r\n */\r\nvar MemoryLayer = /** @class */ (function (_super) {\r\n    __extends(MemoryLayer, _super);\r\n    function MemoryLayer(outputSize, options) {\r\n        var _a, _b, _c;\r\n        if (options === void 0) { options = {}; }\r\n        var _d;\r\n        var _this = _super.call(this, outputSize) || this;\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new Node_1.Node(NodeType_1.NodeType.HIDDEN));\r\n        }\r\n        var prevNodes = Array.from(_this.inputNodes);\r\n        var nodes = [];\r\n        for (var i = 0; i < ((_d = options.memorySize) !== null && _d !== void 0 ? _d : 1); i++) {\r\n            var block = [];\r\n            for (var j = 0; j < outputSize; j++) {\r\n                var node = new Node_1.Node(NodeType_1.NodeType.HIDDEN);\r\n                node.squash = src_1.Identitiy;\r\n                node.bias = 0;\r\n                block.push(node);\r\n            }\r\n            (_a = _this.connections).push.apply(_a, Layer_1.Layer.connect(prevNodes, block, ConnectionType_1.ConnectionType.ONE_TO_ONE));\r\n            nodes.push.apply(nodes, block);\r\n            prevNodes = block;\r\n        }\r\n        (_b = _this.nodes).push.apply(_b, Array.from(_this.inputNodes));\r\n        (_c = _this.nodes).push.apply(_c, (nodes.reverse()));\r\n        prevNodes.forEach(function (node) { return _this.outputNodes.add(node); });\r\n        _this.outputNodes.forEach(function (node) { var _a; return node.squash = (_a = options.activation) !== null && _a !== void 0 ? _a : src_1.Logistic; });\r\n        return _this;\r\n    }\r\n    /**\r\n     * Checks if a given connection type is allowed on this layer.\r\n     *\r\n     * @param type the type to check\r\n     *\r\n     * @return Is this connection type allowed?\r\n     */\r\n    MemoryLayer.prototype.connectionTypeisAllowed = function (type) {\r\n        return true;\r\n    };\r\n    /**\r\n     * Gets the default connection type for a incoming connection to this layer.\r\n     *\r\n     * @returns the default incoming connection\r\n     */\r\n    MemoryLayer.prototype.getDefaultIncomingConnectionType = function () {\r\n        return ConnectionType_1.ConnectionType.ALL_TO_ALL;\r\n    };\r\n    return MemoryLayer;\r\n}(Layer_1.Layer));\r\nexports.MemoryLayer = MemoryLayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RNNLayer = void 0;\r\nvar src_1 = require(\"activations/build/src\");\r\nvar ConnectionType_1 = require(\"../../../enums/ConnectionType\");\r\nvar NodeType_1 = require(\"../../../enums/NodeType\");\r\nvar Node_1 = require(\"../../Node\");\r\nvar Layer_1 = require(\"../Layer\");\r\n/**\r\n * RNN layer\r\n */\r\nvar RNNLayer = /** @class */ (function (_super) {\r\n    __extends(RNNLayer, _super);\r\n    function RNNLayer(outputSize, options) {\r\n        var _a, _b;\r\n        if (options === void 0) { options = {}; }\r\n        var _c;\r\n        var _this = _super.call(this, outputSize) || this;\r\n        for (var i = 0; i < outputSize; i++) {\r\n            _this.inputNodes.add(new Node_1.Node(NodeType_1.NodeType.HIDDEN).setActivationType((_c = options.activation) !== null && _c !== void 0 ? _c : src_1.Logistic));\r\n        }\r\n        _this.outputNodes = _this.inputNodes;\r\n        (_a = _this.nodes).push.apply(_a, Array.from(_this.inputNodes));\r\n        // Adding self connections\r\n        (_b = _this.connections).push.apply(_b, Layer_1.Layer.connect(_this.nodes, _this.nodes, ConnectionType_1.ConnectionType.ONE_TO_ONE));\r\n        return _this;\r\n    }\r\n    /**\r\n     * Checks if a given connection type is allowed on this layer.\r\n     *\r\n     * @param type the type to check\r\n     *\r\n     * @return Is this connection type allowed?\r\n     */\r\n    RNNLayer.prototype.connectionTypeisAllowed = function (type) {\r\n        return true;\r\n    };\r\n    /**\r\n     * Gets the default connection type for a incoming connection to this layer.\r\n     *\r\n     * @returns the default incoming connection\r\n     */\r\n    RNNLayer.prototype.getDefaultIncomingConnectionType = function () {\r\n        return ConnectionType_1.ConnectionType.ALL_TO_ALL;\r\n    };\r\n    return RNNLayer;\r\n}(Layer_1.Layer));\r\nexports.RNNLayer = RNNLayer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.generateGaussian = exports.avg = exports.sum = exports.min = exports.minValueIndex = exports.maxValueIndex = exports.max = exports.shuffle = exports.getOrDefault = exports.removeFromArray = exports.randBoolean = exports.randDouble = exports.randInt = exports.pickRandom = exports.TournamentSelection = exports.PowerSelection = exports.FitnessProportionateSelection = exports.Selection = exports.InverseRate = exports.ExponentialRate = exports.StepRate = exports.FixedRate = exports.Rate = exports.SwapNodesMutation = exports.SubBackConnectionMutation = exports.AddBackConnectionMutation = exports.SubSelfConnectionMutation = exports.AddSelfConnectionMutation = exports.SubGateMutation = exports.AddGateMutation = exports.ModActivationMutation = exports.ModBiasMutation = exports.ModWeightMutation = exports.SubConnectionMutation = exports.AddConnectionMutation = exports.SubNodeMutation = exports.AddNodeMutation = exports.Mutation = exports.ONLY_STRUCTURE = exports.NO_STRUCTURE_MUTATIONS = exports.FEEDFORWARD_MUTATIONS = exports.ALL_MUTATIONS = exports.HINGELoss = exports.MSLELoss = exports.WAPELoss = exports.MAPELoss = exports.MAELoss = exports.BinaryLoss = exports.MBELoss = exports.MSELoss = exports.ALL_LOSSES = exports.NoiseNodeType = exports.PoolNodeType = exports.NodeType = exports.GatingType = exports.ConnectionType = exports.Node = exports.Species = exports.Network = exports.Connection = exports.Architect = exports.PoolNode = exports.NoiseNode = exports.DropoutNode = exports.ConstantNode = exports.Layer = exports.MemoryLayer = exports.LSTMLayer = exports.GRULayer = exports.RNNLayer = exports.HopfieldLayer = exports.ActivationLayer = exports.PoolingLayer = exports.GlobalMaxPooling1DLayer = exports.GlobalMinPooling1DLayer = exports.GlobalAvgPooling1DLayer = exports.MaxPooling1DLayer = exports.MinPooling1DLayer = exports.AvgPooling1DLayer = exports.NoiseLayer = exports.OutputLayer = exports.InputLayer = exports.DropoutLayer = exports.DenseLayer = void 0;\r\nvar Architect_1 = require(\"../src/architecture/Architect\");\r\nObject.defineProperty(exports, \"Architect\", { enumerable: true, get: function () { return Architect_1.Architect; } });\r\nvar Connection_1 = require(\"../src/architecture/Connection\");\r\nObject.defineProperty(exports, \"Connection\", { enumerable: true, get: function () { return Connection_1.Connection; } });\r\nvar ActivationLayer_1 = require(\"../src/architecture/Layers/CoreLayers/ActivationLayer\");\r\nObject.defineProperty(exports, \"ActivationLayer\", { enumerable: true, get: function () { return ActivationLayer_1.ActivationLayer; } });\r\nvar DenseLayer_1 = require(\"../src/architecture/Layers/CoreLayers/DenseLayer\");\r\nObject.defineProperty(exports, \"DenseLayer\", { enumerable: true, get: function () { return DenseLayer_1.DenseLayer; } });\r\nvar DropoutLayer_1 = require(\"../src/architecture/Layers/CoreLayers/DropoutLayer\");\r\nObject.defineProperty(exports, \"DropoutLayer\", { enumerable: true, get: function () { return DropoutLayer_1.DropoutLayer; } });\r\nvar InputLayer_1 = require(\"../src/architecture/Layers/CoreLayers/InputLayer\");\r\nObject.defineProperty(exports, \"InputLayer\", { enumerable: true, get: function () { return InputLayer_1.InputLayer; } });\r\nvar OutputLayer_1 = require(\"../src/architecture/Layers/CoreLayers/OutputLayer\");\r\nObject.defineProperty(exports, \"OutputLayer\", { enumerable: true, get: function () { return OutputLayer_1.OutputLayer; } });\r\nvar Layer_1 = require(\"../src/architecture/Layers/Layer\");\r\nObject.defineProperty(exports, \"Layer\", { enumerable: true, get: function () { return Layer_1.Layer; } });\r\nvar NoiseLayer_1 = require(\"../src/architecture/Layers/NoiseLayers/NoiseLayer\");\r\nObject.defineProperty(exports, \"NoiseLayer\", { enumerable: true, get: function () { return NoiseLayer_1.NoiseLayer; } });\r\nvar AvgPooling1DLayer_1 = require(\"../src/architecture/Layers/PoolingLayers/AvgPooling1DLayer\");\r\nObject.defineProperty(exports, \"AvgPooling1DLayer\", { enumerable: true, get: function () { return AvgPooling1DLayer_1.AvgPooling1DLayer; } });\r\nvar GlobalAvgPooling1DLayer_1 = require(\"../src/architecture/Layers/PoolingLayers/GlobalAvgPooling1DLayer\");\r\nObject.defineProperty(exports, \"GlobalAvgPooling1DLayer\", { enumerable: true, get: function () { return GlobalAvgPooling1DLayer_1.GlobalAvgPooling1DLayer; } });\r\nvar GlobalMaxPooling1DLayer_1 = require(\"../src/architecture/Layers/PoolingLayers/GlobalMaxPooling1DLayer\");\r\nObject.defineProperty(exports, \"GlobalMaxPooling1DLayer\", { enumerable: true, get: function () { return GlobalMaxPooling1DLayer_1.GlobalMaxPooling1DLayer; } });\r\nvar GlobalMinPooling1DLayer_1 = require(\"../src/architecture/Layers/PoolingLayers/GlobalMinPooling1DLayer\");\r\nObject.defineProperty(exports, \"GlobalMinPooling1DLayer\", { enumerable: true, get: function () { return GlobalMinPooling1DLayer_1.GlobalMinPooling1DLayer; } });\r\nvar MaxPooling1DLayer_1 = require(\"../src/architecture/Layers/PoolingLayers/MaxPooling1DLayer\");\r\nObject.defineProperty(exports, \"MaxPooling1DLayer\", { enumerable: true, get: function () { return MaxPooling1DLayer_1.MaxPooling1DLayer; } });\r\nvar MinPooling1DLayer_1 = require(\"../src/architecture/Layers/PoolingLayers/MinPooling1DLayer\");\r\nObject.defineProperty(exports, \"MinPooling1DLayer\", { enumerable: true, get: function () { return MinPooling1DLayer_1.MinPooling1DLayer; } });\r\nvar PoolingLayer_1 = require(\"../src/architecture/Layers/PoolingLayers/PoolingLayer\");\r\nObject.defineProperty(exports, \"PoolingLayer\", { enumerable: true, get: function () { return PoolingLayer_1.PoolingLayer; } });\r\nvar GRULayer_1 = require(\"../src/architecture/Layers/RecurrentLayers/GRULayer\");\r\nObject.defineProperty(exports, \"GRULayer\", { enumerable: true, get: function () { return GRULayer_1.GRULayer; } });\r\nvar HopfieldLayer_1 = require(\"../src/architecture/Layers/RecurrentLayers/HopfieldLayer\");\r\nObject.defineProperty(exports, \"HopfieldLayer\", { enumerable: true, get: function () { return HopfieldLayer_1.HopfieldLayer; } });\r\nvar LSTMLayer_1 = require(\"../src/architecture/Layers/RecurrentLayers/LSTMLayer\");\r\nObject.defineProperty(exports, \"LSTMLayer\", { enumerable: true, get: function () { return LSTMLayer_1.LSTMLayer; } });\r\nvar MemoryLayer_1 = require(\"../src/architecture/Layers/RecurrentLayers/MemoryLayer\");\r\nObject.defineProperty(exports, \"MemoryLayer\", { enumerable: true, get: function () { return MemoryLayer_1.MemoryLayer; } });\r\nvar RNNLayer_1 = require(\"../src/architecture/Layers/RecurrentLayers/RNNLayer\");\r\nObject.defineProperty(exports, \"RNNLayer\", { enumerable: true, get: function () { return RNNLayer_1.RNNLayer; } });\r\nvar Network_1 = require(\"../src/architecture/Network\");\r\nObject.defineProperty(exports, \"Network\", { enumerable: true, get: function () { return Network_1.Network; } });\r\nvar Node_1 = require(\"../src/architecture/Node\");\r\nObject.defineProperty(exports, \"Node\", { enumerable: true, get: function () { return Node_1.Node; } });\r\nvar ConstantNode_1 = require(\"../src/architecture/Nodes/ConstantNode\");\r\nObject.defineProperty(exports, \"ConstantNode\", { enumerable: true, get: function () { return ConstantNode_1.ConstantNode; } });\r\nvar DropoutNode_1 = require(\"../src/architecture/Nodes/DropoutNode\");\r\nObject.defineProperty(exports, \"DropoutNode\", { enumerable: true, get: function () { return DropoutNode_1.DropoutNode; } });\r\nvar NoiseNode_1 = require(\"../src/architecture/Nodes/NoiseNode\");\r\nObject.defineProperty(exports, \"NoiseNode\", { enumerable: true, get: function () { return NoiseNode_1.NoiseNode; } });\r\nvar PoolNode_1 = require(\"../src/architecture/Nodes/PoolNode\");\r\nObject.defineProperty(exports, \"PoolNode\", { enumerable: true, get: function () { return PoolNode_1.PoolNode; } });\r\nvar Species_1 = require(\"../src/architecture/Species\");\r\nObject.defineProperty(exports, \"Species\", { enumerable: true, get: function () { return Species_1.Species; } });\r\nvar ConnectionType_1 = require(\"../src/enums/ConnectionType\");\r\nObject.defineProperty(exports, \"ConnectionType\", { enumerable: true, get: function () { return ConnectionType_1.ConnectionType; } });\r\nvar GatingType_1 = require(\"../src/enums/GatingType\");\r\nObject.defineProperty(exports, \"GatingType\", { enumerable: true, get: function () { return GatingType_1.GatingType; } });\r\nvar NodeType_1 = require(\"../src/enums/NodeType\");\r\nObject.defineProperty(exports, \"NodeType\", { enumerable: true, get: function () { return NodeType_1.NodeType; } });\r\nObject.defineProperty(exports, \"NoiseNodeType\", { enumerable: true, get: function () { return NodeType_1.NoiseNodeType; } });\r\nObject.defineProperty(exports, \"PoolNodeType\", { enumerable: true, get: function () { return NodeType_1.PoolNodeType; } });\r\nvar Loss_1 = require(\"../src/methods/Loss\");\r\nObject.defineProperty(exports, \"ALL_LOSSES\", { enumerable: true, get: function () { return Loss_1.ALL_LOSSES; } });\r\nObject.defineProperty(exports, \"BinaryLoss\", { enumerable: true, get: function () { return Loss_1.BinaryLoss; } });\r\nObject.defineProperty(exports, \"HINGELoss\", { enumerable: true, get: function () { return Loss_1.HINGELoss; } });\r\nObject.defineProperty(exports, \"MAELoss\", { enumerable: true, get: function () { return Loss_1.MAELoss; } });\r\nObject.defineProperty(exports, \"MAPELoss\", { enumerable: true, get: function () { return Loss_1.MAPELoss; } });\r\nObject.defineProperty(exports, \"MBELoss\", { enumerable: true, get: function () { return Loss_1.MBELoss; } });\r\nObject.defineProperty(exports, \"MSELoss\", { enumerable: true, get: function () { return Loss_1.MSELoss; } });\r\nObject.defineProperty(exports, \"MSLELoss\", { enumerable: true, get: function () { return Loss_1.MSLELoss; } });\r\nObject.defineProperty(exports, \"WAPELoss\", { enumerable: true, get: function () { return Loss_1.WAPELoss; } });\r\nvar Mutation_1 = require(\"../src/methods/Mutation\");\r\nObject.defineProperty(exports, \"AddBackConnectionMutation\", { enumerable: true, get: function () { return Mutation_1.AddBackConnectionMutation; } });\r\nObject.defineProperty(exports, \"AddConnectionMutation\", { enumerable: true, get: function () { return Mutation_1.AddConnectionMutation; } });\r\nObject.defineProperty(exports, \"AddGateMutation\", { enumerable: true, get: function () { return Mutation_1.AddGateMutation; } });\r\nObject.defineProperty(exports, \"AddNodeMutation\", { enumerable: true, get: function () { return Mutation_1.AddNodeMutation; } });\r\nObject.defineProperty(exports, \"AddSelfConnectionMutation\", { enumerable: true, get: function () { return Mutation_1.AddSelfConnectionMutation; } });\r\nObject.defineProperty(exports, \"ALL_MUTATIONS\", { enumerable: true, get: function () { return Mutation_1.ALL_MUTATIONS; } });\r\nObject.defineProperty(exports, \"FEEDFORWARD_MUTATIONS\", { enumerable: true, get: function () { return Mutation_1.FEEDFORWARD_MUTATIONS; } });\r\nObject.defineProperty(exports, \"ModActivationMutation\", { enumerable: true, get: function () { return Mutation_1.ModActivationMutation; } });\r\nObject.defineProperty(exports, \"ModBiasMutation\", { enumerable: true, get: function () { return Mutation_1.ModBiasMutation; } });\r\nObject.defineProperty(exports, \"ModWeightMutation\", { enumerable: true, get: function () { return Mutation_1.ModWeightMutation; } });\r\nObject.defineProperty(exports, \"Mutation\", { enumerable: true, get: function () { return Mutation_1.Mutation; } });\r\nObject.defineProperty(exports, \"NO_STRUCTURE_MUTATIONS\", { enumerable: true, get: function () { return Mutation_1.NO_STRUCTURE_MUTATIONS; } });\r\nObject.defineProperty(exports, \"ONLY_STRUCTURE\", { enumerable: true, get: function () { return Mutation_1.ONLY_STRUCTURE; } });\r\nObject.defineProperty(exports, \"SubBackConnectionMutation\", { enumerable: true, get: function () { return Mutation_1.SubBackConnectionMutation; } });\r\nObject.defineProperty(exports, \"SubConnectionMutation\", { enumerable: true, get: function () { return Mutation_1.SubConnectionMutation; } });\r\nObject.defineProperty(exports, \"SubGateMutation\", { enumerable: true, get: function () { return Mutation_1.SubGateMutation; } });\r\nObject.defineProperty(exports, \"SubNodeMutation\", { enumerable: true, get: function () { return Mutation_1.SubNodeMutation; } });\r\nObject.defineProperty(exports, \"SubSelfConnectionMutation\", { enumerable: true, get: function () { return Mutation_1.SubSelfConnectionMutation; } });\r\nObject.defineProperty(exports, \"SwapNodesMutation\", { enumerable: true, get: function () { return Mutation_1.SwapNodesMutation; } });\r\nvar Rate_1 = require(\"../src/methods/Rate\");\r\nObject.defineProperty(exports, \"ExponentialRate\", { enumerable: true, get: function () { return Rate_1.ExponentialRate; } });\r\nObject.defineProperty(exports, \"FixedRate\", { enumerable: true, get: function () { return Rate_1.FixedRate; } });\r\nObject.defineProperty(exports, \"InverseRate\", { enumerable: true, get: function () { return Rate_1.InverseRate; } });\r\nObject.defineProperty(exports, \"Rate\", { enumerable: true, get: function () { return Rate_1.Rate; } });\r\nObject.defineProperty(exports, \"StepRate\", { enumerable: true, get: function () { return Rate_1.StepRate; } });\r\nvar Selection_1 = require(\"../src/methods/Selection\");\r\nObject.defineProperty(exports, \"FitnessProportionateSelection\", { enumerable: true, get: function () { return Selection_1.FitnessProportionateSelection; } });\r\nObject.defineProperty(exports, \"PowerSelection\", { enumerable: true, get: function () { return Selection_1.PowerSelection; } });\r\nObject.defineProperty(exports, \"Selection\", { enumerable: true, get: function () { return Selection_1.Selection; } });\r\nObject.defineProperty(exports, \"TournamentSelection\", { enumerable: true, get: function () { return Selection_1.TournamentSelection; } });\r\nvar Utils_1 = require(\"../src/utils/Utils\");\r\nObject.defineProperty(exports, \"avg\", { enumerable: true, get: function () { return Utils_1.avg; } });\r\nObject.defineProperty(exports, \"generateGaussian\", { enumerable: true, get: function () { return Utils_1.generateGaussian; } });\r\nObject.defineProperty(exports, \"getOrDefault\", { enumerable: true, get: function () { return Utils_1.getOrDefault; } });\r\nObject.defineProperty(exports, \"max\", { enumerable: true, get: function () { return Utils_1.max; } });\r\nObject.defineProperty(exports, \"maxValueIndex\", { enumerable: true, get: function () { return Utils_1.maxValueIndex; } });\r\nObject.defineProperty(exports, \"min\", { enumerable: true, get: function () { return Utils_1.min; } });\r\nObject.defineProperty(exports, \"minValueIndex\", { enumerable: true, get: function () { return Utils_1.minValueIndex; } });\r\nObject.defineProperty(exports, \"pickRandom\", { enumerable: true, get: function () { return Utils_1.pickRandom; } });\r\nObject.defineProperty(exports, \"randBoolean\", { enumerable: true, get: function () { return Utils_1.randBoolean; } });\r\nObject.defineProperty(exports, \"randDouble\", { enumerable: true, get: function () { return Utils_1.randDouble; } });\r\nObject.defineProperty(exports, \"randInt\", { enumerable: true, get: function () { return Utils_1.randInt; } });\r\nObject.defineProperty(exports, \"removeFromArray\", { enumerable: true, get: function () { return Utils_1.removeFromArray; } });\r\nObject.defineProperty(exports, \"shuffle\", { enumerable: true, get: function () { return Utils_1.shuffle; } });\r\nObject.defineProperty(exports, \"sum\", { enumerable: true, get: function () { return Utils_1.sum; } });\r\n"]}